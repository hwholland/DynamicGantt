jQuery.sap.require("sap.ui.core.CustomizingConfiguration");(function(){"use strict";var o=sap.ui.core.CustomizingConfiguration.getViewExtension;sap.ui.core.CustomizingConfiguration.getViewExtension=function(v,e,a){var c=a&&typeof a==="string"?a:(a&&sap.ui.core.Component.getOwnerIdFor(a));var C=c&&sap.ui.component(c);if(C instanceof sap.suite.ui.generic.template.lib.TemplateComponent){a=C.getAppComponent().getId();}var r=o(v,e,a);return r;};var O=sap.ui.core.CustomizingConfiguration.getControllerExtension;sap.ui.core.CustomizingConfiguration.getControllerExtension=function(c,C){var a=null;if(C){a=sap.ui.component(C);if(a instanceof sap.suite.ui.generic.template.lib.TemplateComponent){a=a.getAppComponent();if(a){C=a.getId();}}}var r=O(c,C);return r;};sap.ui.define(["sap/ui/core/mvc/ViewType","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","sap/ui/Device","sap/suite/ui/generic/template/js/AnnotationHelper"],function(V,U,J,R,D){function E(C){var i=new R({bundleName:"sap/suite/ui/generic/template/lib/i18n/i18n"});var t=C.getModel("i18n");if(t){i.enhance(t.getResourceBundle());}var m=C.getAppComponent().getModel("i18n|"+C.getMetadata().getComponentName()+"|"+C.getEntitySet());if(m){i.enhance(m.getResourceBundle());}C.setModel(i,"i18n");}function d(C){if(C.getAppComponent().getMetadata().getComponentName()===""||C.getTemplateName()===""||C.getEntitySet()===""){}return C.getAppComponent().getMetadata().getComponentName()+"::"+C.getTemplateName()+"::"+C.getEntitySet();}function c(e,C){var i=C.getAppComponent().getTransactionController().getDraftController().getDraftContext().isDraftEnabled(C.getEntitySet());var s=null;var A=C.getComponentContainer().getSettings();s=jQuery.extend({},A);delete s.appComponent;delete s.entitySet;delete s.navigationProperty;return new J({entitySet:C.getEntitySet(),entityType:e,"sap-ui-debug":window["sap-ui-debug"],isDraftEnabled:i,"settings":s,"manifest":C.getAppComponent().getMetadata().getManifest()});}function a(C){var v=null;var m=C.getModel().getMetaModel();var b=m.getODataEntitySet(C.getEntitySet());if(!b||!b.entityType){return null;}E(C);try{var s=d(C);v=sap.ui.getCore().byId(s);if(v){jQuery.sap.log.warning("View with ID: "+s+" already exists - old view is getting destroyed now!");try{v.destroy();}catch(f){jQuery.sap.log.error("Error destroying view: "+f);}v=null;}var g=new J(D);g.setDefaultBindingMode("OneWay");v=sap.ui.view({preprocessors:{xml:{bindingContexts:{meta:m.createBindingContext(m.getODataEntityType(b.entityType,true)),entitySet:m.createBindingContext(m.getODataEntitySet(C.getEntitySet(),true))},models:{device:g,meta:m,entitySet:m,parameter:c(b.entityType,C)},preprocessorsData:C.getComponentData().preprocessorsData}},id:s,type:V.XML,viewName:C.getTemplateName(),height:"100%"});}catch(e){throw e;}return v;}return U.extend("sap.suite.ui.generic.template.lib.TemplateComponent",{metadata:{properties:{templateName:{type:"string",defaultValue:null},entitySet:{type:"string",defaultValue:null},navigationProperty:{type:"string",defaultValue:null},appComponent:{type:"object",defaultValue:null},isRefreshRequired:{type:"boolean",defaultValue:false},isLeaf:{type:"boolean"}},library:"sap.suite.ui.generic.template"},init:function(){(U.prototype.init||jQuery.noop).apply(this,arguments);var u=new J({editable:false,enabled:false});this.setModel(u,"ui");var p=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing");var t=new J({generic:{crossAppNavSupport:!!p&&p.isIntentUrl(document.URL),draftIndicatorState:sap.m.DraftIndicatorState.Clear}});t.setDefaultBindingMode("OneWay");this.setModel(t,"_templPriv");},getComponentContainer:function(){return this.oContainer;},setContainer:function(){var m;U.prototype.setContainer.apply(this,arguments);if(this.oContainer){m=this.oContainer.getModel();if(m){m.getMetaModel().loaded().then(function(){this.runAsOwner(function(){var v=a(this);this.setAggregation("rootControl",v);this.oContainer.invalidate();}.bind(this));}.bind(this));}}},getRouter:function(){if(this.getAppComponent()){return this.getAppComponent().getRouter();}return U.prototype.getRouter.apply(this,arguments);}});});})();
