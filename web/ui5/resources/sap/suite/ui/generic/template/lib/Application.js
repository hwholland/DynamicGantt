sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","sap/ui/core/routing/HistoryDirection","sap/m/MessageToast","sap/m/ActionSheet","sap/m/Dialog","sap/m/Popover","sap/suite/ui/generic/template/lib/deletionHelper","sap/suite/ui/generic/template/lib/routingHelper","sap/suite/ui/generic/template/lib/ContextBookkeeping","sap/suite/ui/generic/template/lib/StatePreserver","sap/suite/ui/generic/template/lib/testableHelper"],function(q,B,D,J,H,a,M,A,b,P,d,r,C,S,t){"use strict";var c=(t.testableStatic(function(T,o){var s="sapUiSizeCozy",h="sapUiSizeCompact";if(o.hasClass(s)||o.hasClass(h)){return"";}else{return T?s:h;}},"Application_determineContentDensityClass")(D.support.touch,q(document.body)));function g(){return c;}function f(o,p){q.sap.syncStyleClass(c,p,o);p.addDependent(o);}var f=t.testableStatic(f,"Application_attachControlToParent");function e(T){var o=new C(T.oAppComponent);var l,E;function h(){return l;}function s(i){l=i;}function k(i){var j=T.oNavigationControllerProxy.getActiveComponents();return j.indexOf(i.getId())>=0;}var I=false;function p(j){if(I){return;}var i=0;for(;i<T.aRunningSideEffectExecutions.length&&!T.aRunningSideEffectExecutions[i];i++){i++;}if(T.aRunningSideEffectExecutions[i]){I=true;var l1=T.aRunningSideEffectExecutions[i];l1.then(function(){if(T.aRunningSideEffectExecutions[i]===l1){T.aRunningSideEffectExecutions[i]=null;}I=false;p(j);});}else{j();}}function m(i){var j;if(i instanceof b){j="open";}else if(i instanceof P||i instanceof A){j="openBy";}if(j){var l1=i[j];i[j]=function(){var m1=arguments;p(function(){if(!T.oBusyHelper.isBusy()){T.oBusyHelper.getUnbusy().then(function(){l1.apply(i,m1);});}});};}}var F={};function n(i,j,l1,m1,n1){i=i||T.oNavigationHost;var o1=i.getId();var p1=F[o1]||(F[o1]={});var q1=p1[j];if(!q1){q1=sap.ui.xmlfragment(o1,j,l1);f(q1,i);var r1;if(m1){r1=new J();q1.setModel(r1,m1);}(n1||q.noop)(q1,r1);p1[j]=q1;m(q1);}return q1;}function u(){return new Promise(function(i){T.oNavigationObserver.getProcessFinished(true).then(function(){T.oBusyHelper.getUnbusy().then(i);});});}function v(i){T.oShellServicePromise.then(function(j){j.setBackNavigation(i);});}function w(i){if(!T.oFlexibleColumnLayoutHandler){return{handleDataReceived:function(){return false;}};}return T.oFlexibleColumnLayoutHandler.getFclProxyForView(i);}var x=false;function y(i){x=i;}function z(i,j){if(!T.oFlexibleColumnLayoutHandler){return true;}var l1=r.determineNavigationPath(i,j);return T.oFlexibleColumnLayoutHandler.isNewHistoryEntryRequired(l1);}function R(i){T.aStateChangers.push(i);}function G(i){return T.oFlexibleColumnLayoutHandler?T.oFlexibleColumnLayoutHandler.getTargetAfterCancelPromise(i):Promise.resolve(i);}function K(i,j){j.then(function(){o.adaptAfterObjectDeleted(i);});}function L(i,j,l1){var m1=T.mEntityTree[i];var n1;if(m1.navigationProperty&&m1.parent){n1=j?m1.entitySet:m1.navigationProperty;}else{n1=i;}if(l1.indexOf(n1)<0){l1.unshift(n1);if(m1.navigationProperty&&m1.parent){L(m1.parent,j,l1);}}}function N(i,j){var l1=[];L(i,j,l1);return l1;}function O(j){var l1=N(j);l1.pop();var m1="";var n1="";var o1=[];for(var i=0;i<l1.length;i++){m1=m1+n1+l1[i];o1.push(m1);n1="/";}return o1;}function Q(){var i=T.oNavigationControllerProxy.oHashChanger.getHash();var j=i.split("?")[0];var l1=j.split("/");if(l1[0]===""||l1[0]==="#"){l1.splice(0,1);}return l1;}function U(i,j,l1){if(T.oFlexibleColumnLayoutHandler){return T.oFlexibleColumnLayoutHandler.adaptBreadCrumbUrl(i,j,l1);}return i;}function V(){var j=T.oNavigationControllerProxy.getActiveComponents();var l1=0;var m1;for(var i=0;i<j.length;i++){var n1=T.componentRegistry[j[i]];if(n1.viewLevel>0&&(l1===0||n1.viewLevel<l1)){l1=n1.viewLevel;m1=n1.oComponent;}}var o1=m1?Promise.resolve(m1):T.oNavigationControllerProxy.getRootComponentPromise();return o1.then(function(p1){return p1.getModel("i18n").getResourceBundle();});}function W(){return T.oNavigationControllerProxy.getAppTitle();}function X(i,j){T.oNavigationControllerProxy.subTitleForViewLevelChanged(i,j);}function Y(i){return T.oNavigationControllerProxy.getCurrentKeys(i);}function Z(){for(var i in T.componentRegistry){var j=T.componentRegistry[i];if(j.viewLevel===1){if(k(j.oComponent)){var l1=j.oComponent.getComponentContainer().getElementBinding();return l1&&l1.getPath();}else{return null;}}}return null;}function $(l1,m1,n1,o1,p1){var q1=n1.oComponent.getEntitySet();var r1=T.mEntityTree[q1];var s1=false;var t1;var u1=true;for(var i=0;i<r1.children.length&&!t1;i++){var v1=r1.children[i];var w1=T.mEntityTree[v1];if(w1.navigationProperty===l1){t1=w1.sRouteName;u1=!w1.noKey;}}if(o1&&!t1){var x1=r1.embeddedComponents[o1];if(x1){for(var j=0;j<x1.pages.length&&!s1;j++){var y1=x1.pages[j];if(y1.navigationProperty===l1){s1=true;t1=q1+"/"+o1+"/"+l1;u1=!(y1.routingSpec&&y1.routingSpec.noKey);}}}}if(t1){var z1=s1?o1+r.getPatternDelimiter():"";var A1=u1?"("+m1+")":"";var B1=z1+l1+A1;T.oNavigationControllerProxy.navigateToSuffix(B1,n1.viewLevel+1,t1,p1);}}var _;function a1(i){var j=i.getEntitySet();var l1=T.mEntityTree[j];if(l1&&l1.communicationModel){return l1.communicationModel;}_=_||new J();return _;}var b1;function c1(j,l1){var i=l1||0;if(i>0){return null;}var m1=j.getEntitySet();var n1=T.mEntityTree[m1];var o1=n1&&n1.communicationObject;for(;i<0&&o1;){n1=T.mEntityTree[n1.parent];if(n1.communicationObject!==o1){i++;o1=n1.communicationObject;}}if(i<0||o1){return o1;}b1=b1||{};return b1;}function d1(i){for(var j in T.mEntityTree){if(T.mEntityTree[j].navigationProperty&&(T.mEntityTree[j].level===i+1)){return T.mEntityTree[j].navigationProperty;}}}function e1(){return T.oFlexibleColumnLayoutHandler?T.oFlexibleColumnLayoutHandler.getMaxColumnCountInFCL():false;}function f1(){var j=T.oNavigationControllerProxy.getActiveComponents();for(var i=0;i<j.length;i++){var l1=j[i];var m1=T.componentRegistry[l1];var n1=m1.methods.currentDraftModified&&m1.methods.currentDraftModified();if(n1){o.markDraftAsModified(n1);}}}function g1(){if(E!==undefined){return E;}var i,j,l1,m1,n1,o1,p1=true;var q1=T.oAppComponent.getModel();var r1=q1.getMetaModel();var s1=q1.mContexts;for(l1 in s1){p1=false;n1=s1[l1].sPath;m1=n1&&n1.substring(1,n1.indexOf('('));o1=m1&&r1.getODataEntitySet(m1);if(o1){i=q1.getProperty(n1);j=i&&q1.getETag(undefined,undefined,i)||null;if(j){E=true;return E;}}}if(p1){return true;}E=false;return E;}function h1(j){var i,l1,m1;var n1=T.oNavigationControllerProxy.getAllComponents();for(i=0;i<n1.length;i++){l1=n1[i];if(!j||!j[l1]){m1=T.componentRegistry[l1];m1.utils.refreshBinding(true);}}}function i1(i){if(T.oFlexibleColumnLayoutHandler){T.oFlexibleColumnLayoutHandler.setStoredTargetLayoutToFullscreen(i);}}function j1(){T.oPaginatorInfo={};}function k1(i){return new S(T,i);}T.oApplicationProxy={getDraftSiblingPromise:o.getDraftSiblingPromise,getAlternativeContextPromise:o.getAlternativeContextPromise,getPathOfLastShownDraftRoot:o.getPathOfLastShownDraftRoot,areTwoKnownPathesIdentical:o.areTwoKnownPathesIdentical,getResourceBundleForEditPromise:V,getHierarchySectionsFromCurrentHash:Q,getContentDensityClass:g,setEditableNDC:y,getDialogFragment:n.bind(null,null),destroyView:function(i){delete F[i];},setListReportTable:s,markCurrentDraftAsModified:f1,prepareDeletion:K};return{setEditableNDC:y,getEditableNDC:function(){return x;},getContentDensityClass:g,attachControlToParent:f,getDialogFragmentForView:n,getBusyHelper:function(){return T.oBusyHelper;},performAfterSideEffectExecution:p,isComponentActive:k,showMessageToast:function(){var i=arguments;var j=function(){q.sap.log.info("Show message toast");M.show.apply(M,i);};Promise.all([u(true),T.oBusyHelper.getUnbusy()]).then(j);},setBackNavigation:v,getFclProxyForView:w,isNewHistoryEntryRequired:z,registerStateChanger:R,getDraftSiblingPromise:o.getDraftSiblingPromise,registerContext:o.registerContext,activationStarted:o.activationStarted,cancellationStarted:o.cancellationStarted,editingStarted:o.editingStarted,getTargetAfterCancelPromise:G,getBreadCrumbInfo:O,adaptBreadCrumbUrl:U,getSections:N,getHierarchySectionsFromCurrentHash:Q,getAppTitle:W,subTitleForViewLevelChanged:X,getCurrentKeys:Y,getPathForViewLevelOneIfVisible:Z,getCommunicationModel:a1,getCommunicationObject:c1,navigateRoute:$,getForwardNavigationProperty:d1,getMaxColumnCountInFCL:e1,getListReportTable:h,markCurrentDraftAsModified:f1,checkEtags:g1,refreshAllComponents:h1,getIsDraftModified:o.getIsDraftModified,prepareDeletion:d.prepareDeletion.bind(null,T),prepareDeletionOfCreateDraft:d.prepareDeletionOfCreateDraft.bind(null,T),setStoredTargetLayoutToFullscreen:i1,invalidatePaginatorInfo:j1,getStatePreserver:k1};}return B.extend("sap.suite.ui.generic.template.lib.Application",{constructor:function(T){q.extend(this,e(T));}});});
