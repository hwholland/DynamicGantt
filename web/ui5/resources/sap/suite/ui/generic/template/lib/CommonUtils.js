sap.ui.define(["jquery.sap.global","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Context","sap/ui/model/json/JSONModel","sap/m/Table","sap/m/ListBase","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavigationHandler","sap/ui/generic/app/navigation/service/NavError","sap/suite/ui/generic/template/lib/testableHelper"],function(q,B,D,C,J,R,L,M,N,a,t){"use strict";function g(p,E){for(var i in p){var o=p[i];if(o.entitySet===E&&o.component.list&&o.navigationProperty){return o.navigationProperty;}else if(o.pages){var r=g(o.pages,E);if(r){return r;}}}}function b(o,p){var F=sap.ui.require(p);return typeof F==="function"&&(o instanceof F);}function c(o){return b(o,"sap/ui/comp/smarttable/SmartTable");}function d(o){return b(o,"sap/ui/comp/smartchart/SmartChart");}function e(o){return b(o,"sap/ui/table/Table");}function f(o){return b(o,"sap/ui/table/AnalyticalTable");}function h(o){return b(o,"sap/ui/table/TreeTable");}function l(o){if(d(o)||c(o)){return o.getEntitySet();}else if(c(o.getParent())){return o.getParent().getEntitySet();}}var c=t.testableStatic(c,"CommonUtils_isSmartTable");function m(o,s,n){var p;function A(i){s.oApplication.attachControlToParent(i,o.getView());}function r(i,j,k,t1){return s.oApplication.getDialogFragmentForView(o.getView(),i,j,k,t1);}var u;function v(){u=u||o.getOwnerComponent().getModel("i18n").getResourceBundle();return u.getText.apply(u,arguments);}function w(i){var j=i.getSelectionBehavior();if(j==="DATAPOINT"){return{"dataPoints":i.getSelectedDataPoints().dataPoints,"count":i.getSelectedDataPoints().count};}else if(j==="CATEGORY"){return{"dataPoints":i.getSelectedCategories().categories,"count":i.getSelectedCategories().count};}else if(j==="SERIES"){return{"dataPoints":i.getSelectedSeries().series,"count":i.getSelectedSeries().count};}}function x(j){var k=[];if(c(j)){j=j.getTable();}else if(d(j)){j=j.getChart();if(j&&j.getMetadata().getName()==="sap.chart.Chart"){var t1,u1=false;t1=w(j);if(t1&&t1.count>0){if(j.getSelectionBehavior()==="DATAPOINT"){u1=true;}var v1=t1.dataPoints;var w1=[];for(var i=0;i<v1.length;i++){if(u1){if(v1[i].context){k.push(v1[i].context);}}else{w1.push(v1[i].dimensions);}}if(!u1){k[0]=w1;}}}}if(j instanceof L){k=j.getSelectedContexts();}else if(e(j)){var x1=j.getSelectedIndices();for(var i=0;i<x1.length;i++){k.push(j.getContextByIndex(x1[i]));}}return k;}function y(i){var j={};if(i instanceof sap.ui.core.Element){i.getCustomData().forEach(function(k){j[k.getKey()]=k.getValue();});}return j;}function S(j){var k,t1,u1,v1,w1,x1;var y1=T(j);if(!c(y1)&&!d(y1)){y1=y1.getParent();}var z1=x(y1);var A1=y1.getModel();var B1=A1.getMetaModel();var C1=o.getView();if(c(y1)){k=y1.getCustomToolbar()&&y1.getCustomToolbar().getContent();t1=K(y1);I(t1,z1,A1,y1);}else if(d(y1)){k=y1.getToolbar()&&y1.getToolbar().getContent();var D1=o.getOwnerComponent().getAppComponent();var E1=D1.getConfig();if(o.getMetadata().getName()==='sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'){t1=O(y1);I(t1,z1,A1,y1);}else if(E1&&E1.pages[0]&&E1.pages[0].component&&E1.pages[0].component.settings&&E1.pages[0].component.settings.quickVariantSelectionX){t1=O(y1);I(t1,z1,A1);}}if(k&&k.length>0){for(var i=0;i<k.length;i++){w1=undefined;u1=k[i];if(u1.getMetadata().getName()==="sap.m.Button"&&u1.getVisible()){x1=y(u1);if(x1&&x1.Type){v1=C1.getLocalId(u1.getId());if(x1.Type==="CRUDActionDelete"){w1=G(A1,B1,z1,y1);y1.getModel("_templPriv").setProperty("/listReport/deleteEnabled",w1);}else if(x1.Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||x1.Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){w1=F(A1,B1,z1,x1.Type,x1.Action,y1);}}if(/generic\/controlProperties/.test(u1.getBindingPath("enabled"))&&w1!==undefined){E(v1,"enabled",w1);}}}}}function z(i){var j;var k=T(i);var t1=x(k);var u1=i.getModel();j=P();I(j,t1,u1,k);}function E(i,j,k){var t1=o.getView().getModel("_templPriv");var u1=t1.getProperty("/generic/controlProperties/"+i);if(!u1){u1={};u1[j]=k;t1.setProperty("/generic/controlProperties/"+i,u1);}else{t1.setProperty("/generic/controlProperties/"+i+"/"+j,k);}}function F(i,k,t1,u1,v1,w1){var x1,y1,z1,A1;var B1=false;if(u1==="com.sap.vocabularies.UI.v1.DataFieldForAction"){x1=k.getODataFunctionImport(v1);z1=x1&&x1["sap:action-for"];if(z1&&z1!==""&&z1!==" "){if(t1.length>0){A1=x1["sap:applicable-path"];if(A1&&A1!==""&&A1!==" "){for(var j=0;j<t1.length;j++){if(!t1[j]){continue;}y1=i.getObject(t1[j].getPath());if(y1&&y1[A1]===true){B1=true;break;}}}else{B1=true;}}}else{B1=true;}}else if(u1==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(t1.length>0||(d(w1)&&w1.getDrillStackFilters().length>0)){B1=true;}}return B1;}function G(j,k,t1,u1){var v1=H(u1);var w1=false;var x1;var y1=k.getODataEntitySet(u1.getEntitySet());if(sap.suite.ui.generic.template.js.AnnotationHelper.areDeleteRestrictionsValid(k,y1.entityType,v1)){if(t1.length>0){var z1=v1&&v1.Deletable&&v1.Deletable.Path;for(var i=0;i<t1.length;i++){x1=j.getObject(t1[i].getPath());if(z1){if(t1[i]&&j.getProperty(z1,t1[i])){if(!(x1.IsActiveEntity&&x1.HasDraftEntity&&x1.DraftAdministrativeData&&j.getProperty("DraftAdministrativeData/InProcessByUser",t1[i]))){w1=true;break;}}}else{if(!(x1.IsActiveEntity&&x1.HasDraftEntity&&x1.DraftAdministrativeData&&j.getProperty("DraftAdministrativeData/InProcessByUser",t1[i]))){w1=true;break;}}}}}return w1;}function H(i){var j=i.getModel()&&i.getModel().getMetaModel();var k=j&&j.getODataEntitySet(i.getEntitySet());var t1=k&&k["Org.OData.Capabilities.V1.DeleteRestrictions"];return t1;}function I(i,j,k,t1){var u1=Q(k,t1);var v1=o.getView().getModel("_templPriv");var w1=v1.getProperty("/generic/listCommons/breakoutActionsEnabled");if(u1){var x1=o.byId("template::IconTabBar");var y1="";if(x1){y1=x1.getSelectedKey();}U(w1,u1,i,j,k,y1,t1);}v1.setProperty("/generic/listCommons/breakoutActionsEnabled",w1);}function U(i,j,k,t1,u1,v1,w1){var x1;for(var y1 in j){var z1=j[y1].id;if(v1&&!j[y1].determining){z1=z1.concat("-",v1);}if(q.inArray(z1,k)!==-1){x1=true;if(j[y1].requiresSelection){if(t1.length>0){if(j[y1].applicablePath!==undefined&&j[y1].applicablePath!==""){x1=false;for(var A1=0;A1<t1.length;A1++){var B1="";var C1=j[y1].applicablePath.split("/");if(C1.length>1){for(var D1=0;D1<C1.length-1;D1++){B1+="/"+C1[D1];}}var E1=u1.getObject(t1[A1].getPath()+B1);var F1=C1[C1.length-1];if(E1[F1]===true){x1=true;break;}}}}else if(d(w1)&&w1.getDrillStackFilters().length>0){x1=true;}else{x1=false;}}i[z1]={enabled:x1};}}}function K(i){var j=[];var k=q.grep(i.getCustomToolbar().getContent(),function(v1){return v1.getMetadata().getName()==="sap.m.Button";});for(var t1=0;t1<k.length;t1++){var u1=k[t1].getId().split("--");j.push(u1[u1.length-1]);}return j;}function O(i){var j=[];var k=q.grep(i.getToolbar().getContent(),function(v1){return v1.getMetadata().getName()==="sap.m.Button";});for(var t1=0;t1<k.length;t1++){var u1=k[t1].getId().split("--");j.push(u1[u1.length-1]);}return j;}function P(){var i=[];var j=[];var k=o.byId("page");if(k&&k.getFooter()){j=q.grep(k.getFooter().getContent(),function(v1){return v1.getMetadata().getName()==="sap.m.Button";});}for(var t1=0;t1<j.length;t1++){var u1=j[t1].getId().split("--");i.push(u1[u1.length-1]);}return i;}function Q(i,j){var k;var t1=o.getOwnerComponent().getAppComponent().getManifestEntry("sap.ui5");var u1=t1.extends&&t1.extends.extensions&&t1.extends.extensions["sap.ui.controllerExtensions"];if(u1){var v1=(u1[o.getOwnerComponent().getTemplateName()]||{})["sap.ui.generic.app"]||{};var w1=i.getMetaModel();if(o.getMetadata().getName()==='sap.suite.ui.generic.template.ListReport.view.ListReport'){k=j&&l(j);}if(!k){k=o.getOwnerComponent().getEntitySet();}var x1=(v1[w1.getODataEntitySet(k).name]||{})["Actions"];if(!x1){x1={};var y1=(v1[w1.getODataEntitySet(k).name]||{})["Sections"];if(y1){for(var z1 in y1){x1=q.extend(x1,y1[z1]["Actions"]);}}}return x1;}}function T(i){var j=i;while(j){if(j instanceof R||e(j)||c(j)||d(j)){return j;}j=j.getParent&&j.getParent();}return null;}function V(i){if(c(i)){i=i.getTable();}if(e(i)){return i.getBindingInfo("rows");}else if(i instanceof R){return i.getBindingInfo("items");}return null;}function W(i){var j=V(i);if(j&&j.binding){j.binding.refresh();}else{i.rebindTable();}}function X(i){var j=o.getOwnerComponent();var k=j.getModel();var t1,u1;var v1=!s.oApplication.checkEtags();if(v1){u1=V(i);if(u1){t1=u1.path;var w1=i.getEntitySet();var x1=k.getMetaModel();var y1=x1.getODataEntitySet(w1);if(o.getMetadata().getName()==='sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'&&Y(k,y1)){k.invalidateEntityType(y1.entityType);}else{k.invalidate(Z.bind(null,t1));}var z1=j.getId();var A1=Object.create(null);A1[z1]=true;s.oApplication.refreshAllComponents(A1);}}}function Y(i,j){q.sap.require("sap.ui.model.analytics.odata4analytics");var k=new sap.ui.model.analytics.odata4analytics.Model(sap.ui.model.analytics.odata4analytics.Model.ReferenceByModel(i));var t1=k.findQueryResultByName(j.name);var u1=t1.getParameterization();return!!u1;}function Z(i,k,j){var t1=i[0]==="/"?i.substr(1):i;if(k.split("(")[0]===t1){return true;}else{return false;}}function $(i,j){var k=i.getPath();var t1=o.getOwnerComponent();var u1=t1.getComponentContainer().getElementBinding();var v1=u1?u1.getPath():"";var w1=null;if(k.indexOf(v1)!==0){w1=V(j).path;}var x1=!s.oApplication.isNewHistoryEntryRequired(i,w1);var y1;if(n.isDraftEnabled()){y1=s.oDraftController.isActiveEntity(i)?1:6;}else{y1=t1.getModel("ui").getProperty("/editable")?6:1;}var z1=n.getViewLevel();if(z1===0){var A1=s.oApplication.getForwardNavigationProperty(z1);}if(A1){var B1=new Promise(function(D1){i.getModel().createBindingContext(A1,i,null,function(E1){if(E1){s.oNavigationController.navigateToContext(E1,w1,x1,y1);D1();}else{n.navigateToDataLoadedFailedPage();D1();}});});var C1=s.oApplication.getBusyHelper();C1.setBusy(B1);}else{s.oNavigationController.navigateToContext(i,w1,x1,y1);}}function _(i,j){if(i instanceof C){s.oNavigationController.navigateToContext(i,j&&j.navigationProperty,j&&j.replaceInHistory);return;}var k=j&&j.routeName;if(k){n.navigateRoute(k,i,null,j&&j.replaceInHistory);return;}q.sap.log.warning("navigateToContext called without context or route");}function a1(i){if(i instanceof a){if(i.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){M.show(v("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:v("ST_GENERIC_ERROR_TITLE")});}else{M.show(i.getErrorCode(),{title:v("ST_GENERIC_ERROR_TITLE")});}}}function b1(i,j){j1(function(){p=q1();var k={semanticObject:i.semanticObject,action:i.action};var t1=p.mixAttributesAndSelectionVariant(i.parameters);o.adaptNavigationParameterExtension(t1,k);p.navigate(i.semanticObject,i.action,t1.toJSONString(),null,a1);},q.noop,j,"LeavePage");}function c1(t1){var u1=[],v1,w1,x1;var y1=o.getOwnerComponent();var z1=y1.getModel().getMetaModel();if(!t1){return{};}var A1=y1.getAppComponent().getConfig().pages[0];if(!A1){return{};}var B1=function(i){x1=z1.getODataEntitySet(i.entitySet).entityType;w1=z1.getODataEntityType(x1);v1={};v1={entitySet:i.entitySet,aKeys:z1.getODataEntityType(x1).key.propertyRef,navigationProperty:i.navigationProperty};for(var j=0,D1=v1.aKeys.length;j<D1;j++){var k=0,E1=w1.property.length;for(k;k<E1;k++){if(v1.aKeys[j].name===w1.property[k].name){v1.aKeys[j].type=w1.property[k].type;break;}}}};var C1=function(t1,A1){if(!A1.pages){return u1;}for(var i=0,j=A1.pages.length;i<j;i++){if(!A1.pages[i]){break;}if(t1===A1.pages[i].entitySet){B1(A1.pages[i]);u1.splice(0,0,v1);break;}u1=C1(t1,A1.pages[i]);if(u1.length>0){B1(A1.pages[i]);u1.splice(0,0,v1);}}return u1;};return C1(t1,A1);}function d1(k,t1){var u1,v1,i,w1;for(i=0,w1=k.length;i<w1;i++){if(k[i].navigationProperty){v1+="/"+k[i].navigationProperty;}else{v1="/"+k[i].entitySet;}for(var j=0,x1=k[i].aKeys.length;j<x1;j++){if(j===0){v1+="(";u1="";}else{u1=",";}switch(k[i].aKeys[j].type){case"Edm.Guid":if(t1.DraftAdministrativeData&&t1.DraftAdministrativeData.DraftIsCreatedByMe){v1+=u1+k[i].aKeys[j].name+"="+"guid'"+t1.DraftAdministrativeData[k[i].aKeys[j].name]+"'";}else{v1+=u1+k[i].aKeys[j].name+"="+"guid'"+t1[k[i].aKeys[j].name]+"'";}break;case"Edm.Boolean":if(t1.DraftAdministrativeData&&t1.DraftAdministrativeData.DraftIsCreatedByMe){v1+=u1+k[i].aKeys[j].name+"="+false;}else{v1+=u1+k[i].aKeys[j].name+"="+t1[k[i].aKeys[j].name];}break;default:if(typeof t1[k[i].aKeys[j].name]==="string"){v1+=u1+k[i].aKeys[j].name+"="+"'"+t1[k[i].aKeys[j].name]+"'";}else{v1+=u1+k[i].aKeys[j].name+"="+t1[k[i].aKeys[j].name];}break;}if(j===(x1-1)){v1+=")";}}}return v1;}function e1(k,t1,o){var u1,v1,w1,x1,y1,z1,A1;var B1={semanticObject:"",action:""};p=q1();for(x1 in k.semanticAttributesOfSemanticObjects){u1=p.mixAttributesAndSelectionVariant({},t1);for(w1 in k.semanticAttributesOfSemanticObjects[x1]){if(!u1.getSelectOption(w1)){u1.addParameter(w1,"");}}y1=u1.getPropertyNames();B1.semanticObject=x1;o.adaptNavigationParameterExtension(u1,B1);z1=u1.getSelectOptionsPropertyNames();A1=u1.getParameterNames();for(var i=0,C1=y1.length;i<C1;i++){if(z1.indexOf(y1[i])<0&&A1.indexOf(y1[i])<0){delete k.semanticAttributesOfSemanticObjects[x1][y1[i]];u1.removeSelectOption(y1[i]);}}if(x1===k.semanticObject){var D1=k.semanticAttributesOfSemanticObjects[""];for(var j=0,C1=A1.length;j<C1;j++){if(A1[j]in D1){u1.removeParameter(A1[j]);}else{u1.removeParameter(A1[j]);u1.addParameter(A1[j],k.semanticAttributesOfSemanticObjects[k.semanticObject][A1[j]]);}}u1=p.mixAttributesAndSelectionVariant(k.semanticAttributesOfSemanticObjects[x1],t1);v1=u1.toJSONString();}}delete k.semanticAttributes;p.processBeforeSmartLinkPopoverOpens(k,v1);}function f1(i,j,k){if(!i){return v("DRAFT_OBJECT");}else if(j){return v(k?"LOCKED_OBJECT":"UNSAVED_CHANGES");}else{return"";}}function g1(){var i=r("sap.suite.ui.generic.template.fragments.DraftAdminDataPopover",{formatText:function(){var j=Array.prototype.slice.call(arguments,1);var k=arguments[0];if(!k){return"";}if(j.length>0&&(j[0]===null||j[0]===undefined||j[0]==="")){if(j.length>3&&(j[3]===null||j[3]===undefined||j[3]==="")){return(j.length>2&&(j[1]===null||j[1]===undefined||j[1]===""))?"":j[2];}else{return v(k,j[3]);}}else{return v(k,j[0]);}},closeDraftAdminPopover:function(){i.close();},formatDraftLockText:f1},"admin");return i;}function h1(i,j,k,t1,u1,v1){var w1=s.oApplication.getBusyHelper();if(!u1&&w1.isBusy()){return;}if(!n.isDraftEnabled()){var x1=false;if(k&&k.aUnsavedDataCheckFunctions){x1=k.aUnsavedDataCheckFunctions.some(function(B1){return B1();});}var y1=o.getView();var z1=y1.getModel();if(x1||z1.hasPendingChanges()){var A1;l1(function(){y1.setBindingContext(null);z1.resetChanges();y1.setBindingContext();n.fire(o,"AfterCancel",{});A1=i();},function(){A1=j();},t1,v1);return A1;}}return i();}function i1(i,j,k,t1){var u1=false;if(k&&k.aUnsavedDataCheckFunctions){u1=k.aUnsavedDataCheckFunctions.some(function(w1){return w1();});}if(u1||o.getView().getModel().hasPendingChanges()){var v1;n1(function(){o.getView().getModel().resetChanges();n.fire(o,"AfterCancel",{});v1=i();},function(){v1=j();},t1);return v1;}return i();}function j1(i,j,k,t1,u1,v1){if(u1){return h1(i,j,k,t1,true,v1);}s.oApplication.performAfterSideEffectExecution(h1.bind(null,i,j,k,t1,false,v1));}var k1;function l1(i,j,k,t1){var u1;k1=i;if(!k||!t1){var v1=r("sap.suite.ui.generic.template.fragments.DataLoss",{onDataLossOK:function(){v1.close();k1();},onDataLossCancel:function(){v1.close();j();}},"dataLoss");if(!k){k="LeavePage";}u1=v1.getModel("dataLoss");u1.setProperty("/mode",k);v1.open();}else{var w1=r("sap.suite.ui.generic.template.fragments.DiscardDraftPopover",{onDiscardConfirm:function(){k1();}},"discard");u1=w1.getModel("discard");u1.setProperty("/placement",sap.m.PlacementType.Top);if(k!=="Proceed"){u1.setProperty("/isCreateDraft",true);}else{u1.setProperty("/isCreateDraft",false);}u1.setProperty("/mode",k);w1.openBy(t1.getSource());}}var m1;function n1(i,j,k){m1=i;if(!k){k="LeavePage";}var t1=r("sap.suite.ui.generic.template.fragments.DataLossTechnicalError",{onDataLossOK:function(){t1.close();m1();},onDataLossCancel:function(){t1.close();j();}},"dataLoss");var u1=t1.getModel("dataLoss");u1.setProperty("/mode",k);t1.open();}function o1(i,j,k,t1,u1,v1){if(j.busy.check&&t1.isBusy()){v1();return;}var w1=j.busy.set?function(){t1.setBusy(Promise.resolve(),false,{actionLabel:j.sActionLabel});return i();}:i;var x1=j.mConsiderObjectsAsDeleted?function(z1){s.oApplication.prepareDeletion(j.mConsiderObjectsAsDeleted);return w1();}:w1;var y1=(j.dataloss.popup?j1(x1,v1,k,(j.dataloss.navigation?"LeavePage":"Proceed"),true):x1());if(y1 instanceof Promise){y1.then(u1,v1);}else{u1();}}function p1(i,j,k){j=q.extend(true,{busy:{set:true,check:true},dataloss:{popup:true,navigation:false}},j);var t1=s.oApplication.getBusyHelper();var u1=new Promise(function(v1,w1){s.oApplication.performAfterSideEffectExecution(o1.bind(null,i,j,k,t1,v1,w1));});if(j.busy.set){t1.setBusy(u1,false,{actionLabel:j.sActionLabel});}return u1;}function q1(){p=p||new N(o);return p;}function r1(j){var k;var t1=n.getTemplatePrivateModel();var u1,v1,w1,x1,y1,z1=[],A1=[],i,B1,C1,D1,E1,F1,G1;var H1,I1;u1=o.getOwnerComponent().getAppComponent();v1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");w1=t1.getProperty("/generic/supportedIntents/");if(d(j)){k=j.getToolbar();}else if(c(j)){k=j.getCustomToolbar();}x1=k.getContent();y1=x1.length;for(i=0;i<y1;i++){B1=y(x1[i]);if(B1.hasOwnProperty("SemanticObject")&&B1.hasOwnProperty("Action")){C1=B1.SemanticObject;D1=B1.Action;E1={semanticObject:C1,action:D1,ui5Component:u1};z1.push([E1]);F1=q.extend({},E1);F1.bLinkIsSupported=false;A1.push(F1);}}if(z1.length>0&&v1){G1=v1.getLinks(z1);G1.done(function(J1){w1=t1.getProperty("/generic/supportedIntents/");H1=J1.length;for(i=0;i<H1;i++){if(J1[i][0].length>0){A1[i].bLinkIsSupported=true;}C1=A1[i].semanticObject;D1=A1[i].action;I1=t1.getProperty("/generic/supportedIntents/"+C1);if(!I1){w1[C1]={};w1[C1][D1]={"visible":A1[i].bLinkIsSupported};}else if(!I1[D1]){I1[D1]={"visible":A1[i].bLinkIsSupported};}else{I1[D1]["visible"]=A1[i].bLinkIsSupported;}}t1.updateBindings();});}}function s1(k,t1){var u1=[],v1;var w1=y(k).variantAnnotationPath;if(!w1&&t1){w1=y(t1).variantAnnotationPath;}if(w1){var x1=k.getModel();var y1=x1.getMetaModel();var z1=k.getEntitySet();var A1=y1.getODataEntitySet(z1);var B1=y1.getODataEntityType(A1.entityType);var C1=B1[w1];if(!C1){return;}if(!C1.SelectOptions&&C1.SelectionVariant){C1=C1.SelectionVariant;if(C1.Path){var w1=C1.Path.split("@")[1];C1=w1&&B1[w1];}}if(C1.AnnotationPath){v1=C1.AnnotationPath.split("@")[1];C1=B1[v1];}for(var i in C1.SelectOptions){if(C1.SelectOptions[i].PropertyName){var D1=C1.SelectOptions[i].PropertyName.PropertyPath;for(var j in C1.SelectOptions[i].Ranges){var E1=C1.SelectOptions[i].Ranges[j].Option;E1.EnumMember=E1.EnumMember.replace("com.sap.vocabularies.UI.v1.SelectionRangeOptionType/","");var F1=C1.SelectOptions[i].Ranges[j].Low;var G1=C1.SelectOptions[i].Ranges[j].High;var H1=Object.keys(F1)[0];if(G1){var I1=Object.keys(G1)[0];u1.push(new sap.ui.model.Filter(D1,E1.EnumMember,F1[H1],G1[I1]));}else{u1.push(new sap.ui.model.Filter(D1,E1.EnumMember,F1[H1]));}}}}}return u1;}var q1=t.testable(q1,"getNavigationHandler");var I=t.testable(I,"fillEnabledMapForBreakoutActions");var K=t.testable(K,"getBreakoutActionsForTable");var T=t.testable(T,"getOwnerControl");var x=t.testable(x,"getSelectedContexts");return{isSmartTable:c,isSmartChart:d,isUiTable:e,isAnalyticalTable:f,isTreeTable:h,getCurrentEntitySetName:l,getNavigationProperty:g,getText:v,getNavigationHandler:q1,getNavigationKeyProperties:c1,mergeNavigationKeyPropertiesWithValues:d1,executeGlobalSideEffect:function(){if(n.isDraftEnabled()){var i=o.getView();i.attachBrowserEvent("keyup",function(j){var k=(j.target.type==="search")?true:false;var t1=(j.target.type==="textarea")?true:false;if(j.keyCode===13&&j.ctrlKey!==true&&i.getModel("ui").getProperty("/editable")&&!k&&!t1){var u1=o.getOwnerComponent().getAppComponent().getConfig();var v1=u1.settings&&u1.settings.forceGlobalRefresh;var w1=s.oApplicationController.executeSideEffects(i.getBindingContext(),null,null,v1);w1.then(setTimeout(function(){document.getElementById(j.target.id).focus();},0));}});}},setEnabledToolbarButtons:S,setEnabledFooterButtons:z,fillEnabledMapForBreakoutActions:I,getBreakoutActionsForTable:K,getBreakoutActionsFromManifest:Q,getSelectedContexts:x,getSelectionPoints:w,getDeleteRestrictions:H,setPrivateModelControlProperty:E,navigateFromListItem:$,navigateToContext:_,navigateExternal:b1,semanticObjectLinkNavigation:e1,getSelectionVariantFilters:s1,getCustomData:function(j){var k=j.getSource().getCustomData();var t1={};for(var i=0;i<k.length;i++){t1[k[i].getKey()]=k[i].getValue();}return t1;},formatDraftLockText:f1,showDraftPopover:function(i,j){var k=g1();var t1=k.getModel("admin");t1.setProperty("/IsActiveEntity",i.getProperty("IsActiveEntity"));t1.setProperty("/HasDraftEntity",i.getProperty("HasDraftEntity"));k.bindElement({path:i.getPath()+"/DraftAdministrativeData"});if(k.getBindingContext()){k.openBy(j);}else{k.getObjectBinding().attachDataReceived(function(){k.openBy(j);});}},getContentDensityClass:function(){return s.oApplication.getContentDensityClass();},attachControlToView:A,getDialogFragment:r,processDataLossConfirmationIfNonDraft:j1,processDataLossTechnicalErrorConfirmation:i1,securedExecution:p1,getOwnerControl:T,getTableBindingInfo:V,refreshSmartTable:W,refreshModel:X,getElementCustomData:y,triggerAction:function(i,j,k,t1,u1){j1(function(){s.oCRUDManager.callAction({functionImportPath:k.Action,contexts:i,sourceControl:t1,label:k.Label,operationGrouping:"",navigationProperty:""}).then(function(v1){if(v1&&v1.length>0){var w1=v1[0];if(w1.response&&w1.response.context&&(!w1.actionContext||w1.actionContext&&w1.response.context.getPath()!==w1.actionContext.getPath())){s.oApplication.getBusyHelper().getUnbusy().then(s.oViewDependencyHelper.setMeToDirty.bind(null,o.getOwnerComponent(),j));}}});},q.noop,u1,"Proceed");},checkToolbarIntentsSupported:r1};}return B.extend("sap.suite.ui.generic.template.lib.CommonUtils",{constructor:function(o,s,i){q.extend(this,m(o,s,i));}});});
