sap.ui.define(["sap/ui/base/Object","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/comp/smarttable/SmartTable","sap/ui/table/Table","sap/m/Table","sap/m/ListBase","sap/ui/generic/app/navigation/service/NavigationHandler","sap/suite/ui/generic/template/lib/MessageUtils"],function(B,D,J,S,U,R,L,N,M){"use strict";var c=(function(){var C="sapUiSizeCozy",s="sapUiSizeCompact",b=jQuery(document.body);if(b.hasClass(C)||b.hasClass(s)){return"";}else{return D.support.touch?C:s;}}());function g(p,e){for(var i in p){var E=p[i];if(E.entitySet===e&&E.component.list&&E.navigationProperty){return E.navigationProperty;}else if(E.pages){var r=g(E.pages,e);if(r){return r;}}}}function a(C,s){var n;function A(i){var v=C.getView();jQuery.sap.syncStyleClass(c,v,i);v.addDependent(i);}var f={};function b(i,F,q,t){var u=f[i];if(!u){u=sap.ui.xmlfragment(C.getView().getId(),i,F);A(u);var v;if(q){v=new J();u.setModel(v,q);}(t||jQuery.noop)(u,v);f[i]=u;}return u;}var r;function d(){r=r||C.getOwnerComponent().getModel("i18n").getResourceBundle();return r.getText.apply(r,arguments);}function e(){var i=s.oDraftController.getDraftContext();return i.isDraftEnabled(C.getOwnerComponent().getEntitySet());}function h(q){var t=[];if(q instanceof S){q=q.getTable();}if(q instanceof L){t=q.getSelectedContexts();}else if(q instanceof U){var I=q.getSelectedIndices();for(var i=0;i<I.length;i++){t.push(q.getContextByIndex(I[i]));}}return t;}function j(i){var q=i;while(q){if(q instanceof R||q instanceof U||q instanceof S){return q;}if(q.getParent){q=q.getParent();}else{return null;}}return null;}function k(t){if(t instanceof S){t=t.getTable();}if(t instanceof U){return t.getBindingInfo("rows");}else if(t instanceof R){return t.getBindingInfo("items");}return null;}function l(i,t){var q=i.getPath();var u=C.getOwnerComponent();var P="";if(u.getComponentContainer().getElementBinding()){P=u.getComponentContainer().getElementBinding().getPath();}var v=null;if(q.indexOf(P)!==0){v=k(t).path;}s.oNavigationController.navigateToContext(i,v,false);}function m(I,H,i){if(!I){return d("DRAFT_OBJECT");}else if(H){return d(i?"LOCKED_OBJECT":"UNSAVED_CHANGES");}else{return"";}}function o(){var i=b("sap.suite.ui.generic.template.fragments.DraftAdminDataPopover",{formatText:function(){var q=Array.prototype.slice.call(arguments,1);var K=arguments[0];if(!K){return"";}if(q.length>0&&(q[0]===null||q[0]===undefined||q[0]==="")){if(q.length>3&&(q[3]===null||q[3]===undefined||q[3]==="")){return(q.length>2&&(q[1]===null||q[1]===undefined||q[1]===""))?"":q[2];}else{return d(K,q[3]);}}else{return d(K,q[0]);}},closeDraftAdminPopover:function(){i.close();},formatDraftLockText:m},"admin");return i;}var O;function p(i){O=i;var q=b("sap.suite.ui.generic.template.fragments.DataLossPopup",{onDataLossOK:function(){q.close();O();},onDataLossCancel:function(){q.close();}});q.open();}return{getNavigationProperty:g,getText:d,isDraftEnabled:e,getNavigationHandler:function(){n=n||new N(C);return n;},executeGlobalSideEffect:function(){if(e()){var v=C.getView();v.attachBrowserEvent("keyup",function(i){if(i.keyCode===13&&v.getModel("ui").getProperty("/editable")){s.oApplicationController.executeSideEffects(v.getBindingContext());}});}},getSelectedContexts:h,navigateFromListItem:l,getCustomData:function(E){var q=E.getSource().getCustomData();var t={};for(var i=0;i<q.length;i++){t[q[i].getKey()]=q[i].getValue();}return t;},formatDraftLockText:m,showDraftPopover:function(i,t){var P=o();var q=P.getModel("admin");q.setProperty("/IsActiveEntity",i.getProperty("IsActiveEntity"));q.setProperty("/HasDraftEntity",i.getProperty("HasDraftEntity"));P.bindElement({path:i.getPath()+"/DraftAdministrativeData"});if(P.getBindingContext()){P.openBy(t);}else{P.getObjectBinding().attachDataReceived(function(){P.openBy(t);});}},getContentDensityClass:function(){return c;},attachControlToView:A,getDialogFragment:b,dataLossConfirmation:p,getParentTable:j,getTableBinding:k,getElementCustomData:function(E){var i={};if(E instanceof sap.ui.core.Element){E.getCustomData().forEach(function(q){i[q.getKey()]=q.getValue();});}return i;},extractODataEntityPropertiesFromODataJSONFormattedEntity:function(E){var i={};for(var P in E){var v=E[P];if(jQuery.type(v)!=="object"){i[P]=v;}}return i;}};}return B.extend("sap.suite.ui.generic.template.lib.CommonUtils.js",{constructor:function(C,s){jQuery.extend(this,a(C,s));}});});
