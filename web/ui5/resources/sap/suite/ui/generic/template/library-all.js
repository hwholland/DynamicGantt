jQuery.sap.declare('sap.suite.ui.generic.template.library-all');if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ListReport.extensionAPI.NonDraftTransactionController')){jQuery.sap.declare('sap.suite.ui.generic.template.ListReport.extensionAPI.NonDraftTransactionController');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/ListReport/extensionAPI/NonDraftTransactionController",["sap/ui/base/Object"],function(B){"use strict";function g(t,c,s){var e="none";function E(){e="none";}return{edit:function(C){if(!C){throw new Error("Nothing to edit provided");}if(e!=="none"){throw new Error("Attempt to edit multiple contexts ("+C+")");}if(c.getView().getModel().hasPendingChanges()){throw new Error("Attempt to edit while already pending changes exist");}e="editing";},cancel:function(){if(e!=="editing"){throw new Error("Nothing edited");}t.oServices.oTransactionController.resetChanges();E();},save:function(){if(e!=="editing"){throw new Error("Nothing edited");}e="saving";var p=t.oServices.oTransactionController.triggerSubmitChanges();p.then(E,function(){e="editing";});return p;}};}return B.extend("sap.suite.ui.generic.template.ListReport.extensionAPI.NonDraftTransactionController",{constructor:function(t,c,s){jQuery.extend(this,g(t,c,s));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ObjectPage.extensionAPI.DraftTransactionController')){jQuery.sap.declare('sap.suite.ui.generic.template.ObjectPage.extensionAPI.DraftTransactionController');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/ObjectPage/extensionAPI/DraftTransactionController",["sap/ui/base/Object"],function(B){"use strict";function g(t,c){return{attachAfterActivate:function(f){t.oComponentUtils.attach(c,"AfterActivate",f);},detachAfterActivate:function(f){t.oComponentUtils.detach(c,"AfterActivate",f);},attachAfterCancel:function(f){t.oComponentUtils.attach(c,"AfterCancel",f);},detachAfterCancel:function(f){t.oComponentUtils.detach(c,"AfterCancel",f);},attachAfterDelete:function(f){t.oComponentUtils.attach(c,"AfterDelete",f);},detachAfterDelete:function(f){t.oComponentUtils.detach(c,"AfterDelete",f);}};}return B.extend("sap.suite.ui.generic.template.ObjectPage.extensionAPI.NonDraftTransactionController",{constructor:function(t,c){jQuery.extend(this,g(t,c));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ObjectPage.extensionAPI.NonDraftTransactionController')){jQuery.sap.declare('sap.suite.ui.generic.template.ObjectPage.extensionAPI.NonDraftTransactionController');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/ObjectPage/extensionAPI/NonDraftTransactionController",["sap/ui/base/Object"],function(B){"use strict";function g(t,c){return{attachAfterSave:function(f){t.oComponentUtils.attach(c,"AfterSave",f);},detachAfterSave:function(f){t.oComponentUtils.detach(c,"AfterSave",f);},attachAfterDelete:function(f){t.oComponentUtils.attach(c,"AfterDelete",f);},detachAfterDelete:function(f){t.oComponentUtils.detach(c,"AfterDelete",f);},attachAfterCancel:function(f){t.oComponentUtils.attach(c,"AfterCancel",f);},detachAfterCancel:function(f){t.oComponentUtils.detach(c,"AfterCancel",f);}};}return B.extend("sap.suite.ui.generic.template.ObjectPage.extensionAPI.NonDraftTransactionController",{constructor:function(t,c){jQuery.extend(this,g(t,c));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ObjectPage.view.fragments.DummyBlock')){jQuery.sap.declare('sap.suite.ui.generic.template.ObjectPage.view.fragments.DummyBlock');jQuery.sap.require('sap.uxap.BlockBase');sap.ui.define("sap/suite/ui/generic/template/ObjectPage/view/fragments/DummyBlock",['sap/uxap/BlockBase'],function(B){"use strict";var D=B.extend("sap.suite.ui.generic.template.ObjectPage.view.fragments.DummyBlock",{metadata:{views:{Collapsed:{viewName:"sap.suite.ui.generic.template.ObjectPage.view.fragments.DummyBlock",type:"XML"},Expanded:{viewName:"sap.suite.ui.generic.template.ObjectPage.view.fragments.DummyBlock",type:"XML"}}}.fragments});return D;});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.extensionAPI.UIMode')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.suite.ui.generic.template.extensionAPI.UIMode');sap.ui.define("sap/suite/ui/generic/template/extensionAPI/UIMode",[],function(){"use strict";var U={Create:"Create",Display:"Display",Edit:"Edit"};return U;});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.js.AnnotationHelper')){(function(){"use strict";jQuery.sap.require('sap.ui.comp.smartfield.SmartField');var U=sap.ui.require("sap/suite/ui/generic/template/extensionAPI/UIMode");jQuery.sap.declare("sap.suite.ui.generic.template.js.AnnotationHelper");sap.suite.ui.generic.template.js.AnnotationHelper={formatIndicatorValue:function(v){return parseFloat(v);},ratingIndicatorFormatter:function(d,v){var t;if(d.Value.Decimal){t=d.Value.Decimal;}else{t=d.Value.Path;}return"{parts: [{path: '"+t+"'}], formatter: 'sap.suite.ui.generic.template.js.AnnotationHelper.formatIndicatorValue'}";},createProgressFormatter:function(d,v){var D,V;if(!d.Value){return;}if(d.TargetValue){D=d.TargetValue.Path;}if(v["Org.OData.Measures.V1.Unit"]){V=v["Org.OData.Measures.V1.Unit"].Path;}else if(v["Org.OData.Measures.V1.ISOCurrency"]){V=v["Org.OData.Measures.V1.ISOCurrency"].Path;}return"{parts: [{path: '"+d.Value.Path+"'}, {path: '"+D+"'}, {path: '"+V+"'}], formatter: 'sap.suite.ui.generic.template.js.AnnotationHelper.calcProgressPerc'}";},calcProgressPerc:function(v,t,u){var p;var d;if(!t){t=this.data("fixTargetValue");}var r=this.getModel("i18n").getResourceBundle();if(u==="%"){p=parseFloat(v);d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_PERCENT",[v]);}else if(v&&t){if(t!=="0"){p=(parseFloat(v)/parseFloat(t))*100;}else{p=0;}if(u){d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_NOT_PERCENT",[v,t,u]);}else{d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_NO_UOM",[v,t]);}}else{p=0;if(u){d=r.getText("PROGRESS_INDICATOR_DISPLAY_VALUE_UOM_IS_NOT_PERCENT_NO_TARGET_VALUE",[v,u]);}else{d=v;}}if(p>100){p=100;}this.setDisplayValue(d);return p;},createProgressStateFormatter:function(d,D){var c=(d)?d:D;if(!c&&!c.Path){return"";}return"{path: '"+c.Path+"', formatter:'sap.suite.ui.generic.template.js.AnnotationHelper.formatProgressState'}";},formatProgressState:function(c){if(c==="1"||c==="com.sap.vocabularies.UI.v1.CriticalityType/Negative"){return sap.ui.core.ValueState.Error;}else if(c==="2"||c==="com.sap.vocabularies.UI.v1.CriticalityType/Critical"){return sap.ui.core.ValueState.Warning;}else if(c==="3"||c==="com.sap.vocabularies.UI.v1.CriticalityType/Positive"){return sap.ui.core.ValueState.Success;}else{return sap.ui.core.ValueState.None;}},getIdForMoreBlockContent:function(f){if(f["com.sap.vocabularies.UI.v1.PartOfPreview"]&&f["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="false"){return"::MoreContent";}},checkMoreBlockContent:function(f){return sap.suite.ui.generic.template.js.AnnotationHelper.checkFacetContent(f,false);},checkBlockContent:function(f){return sap.suite.ui.generic.template.js.AnnotationHelper.checkFacetContent(f,true);},checkFacetContent:function(f,b){var p;var i=f.getInterface(0);var F=f.getModel().getProperty("",f);var a=f.getPath().split("/Facets");var c=i.getModel().getContext(a[0]);if(i.getModel().getProperty('',c).RecordType==="com.sap.vocabularies.UI.v1.ReferenceFacet"){return c.getPath();}else{if(!F){return;}for(var d=0;d<F.length;d++){if(!b){if(F[d]["com.sap.vocabularies.UI.v1.PartOfPreview"]&&F[d]["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="false"){p=i.getPath()+"/"+d;break;}}else{if(F[d].RecordType!=="com.sap.vocabularies.UI.v1.ReferenceFacet"||(!F[d]["com.sap.vocabularies.UI.v1.PartOfPreview"]||F[d]["com.sap.vocabularies.UI.v1.PartOfPreview"].Bool==="true")){p=i.getPath()+"/"+d;break;}}}}return p;},isImageUrl:function(p){var s=p["com.sap.vocabularies.UI.v1.IsImageURL"]||p["com.sap.vocabularies.UI.v1.IsImageUrl"];if(s&&s.Bool&&s.Bool==="false"){return false;}else if(s){return true;}return false;},hasBreadCrumbs:function(I,v){if(v){var s=v.split("/");var p="",b=[],d;s.pop();if(s.length>0){for(var i=0;i<s.length;i++){p=(p)?(p+"/"+s[i]):s[i];b.push(p);}d=I.getSetting("preprocessorsData");d.breadCrumbs=b;return true;}}},matchesBreadCrumb:function(I,c,p){if(p){var s=p.split("/");var e,E,a;if(s.length>0){var m=I.getInterface(0).getModel();var b=s[0];for(var i=0;i<s.length;i++){if(i>0){e=m.getODataEntitySet(b);E=m.getODataEntityType(e.entityType);a=m.getODataAssociationSetEnd(E,s[i]);b=a.entitySet;}if((i+1)===s.length){if(b===c.name){return true;}else{return false;}}}}}},isObjectPageWithoutComplexTable:function(e,r,f){if(f&&!sap.suite.ui.generic.template.js.AnnotationHelper.isOrHasComplexTable(e,r,f)){return true;}return false;},isOrHasComplexTable:function(e,r,f){if(r){var m=r.pages;}if(m&&f){var F=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);return sap.suite.ui.generic.template.js.AnnotationHelper._hasComplexTableForFacetId(e,m,F);}else{return sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(r);}},showFullScreenButton:function(r,f){if(r&&f){var F=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);if(r.component&&r.component.settings&&r.component.settings.sections&&r.component.settings.sections[F]&&r.component.settings.sections[F].tableMode==="FullScreenTable"){return true;}}return false;},_hasComplexTableForFacetId:function(e,m,f){for(var i in m){var p=m[i];if(p.entitySet&&p.component&&p.component.settings&&p.component.settings.complexListId){if(p.navigationProperty&&p.entitySet===e&&p.component.settings.complexListId===f&&p.component.list){return true;}}if(p.pages){var r=sap.suite.ui.generic.template.js.AnnotationHelper._hasComplexTableForFacetId(e,p.pages,f);}if(r===true){return true;}}return false;},isComplexTable:function(r){if(r&&r.component&&r.component.list&&r.component.settings&&r.component.settings.complexListId&&r.navigationProperty){return true;}return false;},getPersistencyKeyForSmartTable:function(r){if(sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(r)){return r.component.settings.complexListId;}return"listReportFloorplanTable";},getDisplayNavigationIntent:function(l,s,a){return sap.suite.ui.generic.template.js.AnnotationHelper.getSubObjectPageIntent(l,s,a,'display');},getSubObjectPageIntent:function(l,s,a,m){var n;if(a){n=a.split("/")[0];}if(l&&s&&s.length>0){if(n){for(var i=0;i<s.length;i++){if(l===s[i].entitySet&&n===s[i].navigationProperty&&s[i].navigation&&s[i].navigation[m]){return s[i].navigation[m].target;}}}else{for(var i=0;i<s.length;i++){if(l===s[i].entitySet&&s[i].navigation&&s[i].navigation[m]){return s[i].navigation[m].target;}}}}},extensionPointFragmentExists:function(f,F){var i=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);if(i===F){return true;}else{return false;}},formatWithExpandSimple:function(i,d,e){var E=[],s,o;var m=i&&i.getModel&&i.getModel();if(!m){i=i.getInterface(0);m=i.getModel();}if(e){o=m.getODataEntityType(e.entityType);}else{var M=/^(\/dataServices\/schema\/\d+\/entityType\/\d+)(?:\/|$)/.exec(i.getPath());if(M&&M.length&&M[0]){var a=m.getProperty(M[0]);var n=m.getODataEntityContainer().namespace;o=m.getODataEntityType(n+'.'+a.name);}}if(o){if(d&&d.Path){s=sap.suite.ui.generic.template.js.AnnotationHelper._getNavigationPrefix(m,o,d.Path);if(s){E.push(s);}}else if(d&&d.Apply&&d.Apply.Name==="odata.concat"){d.Apply.Parameters.forEach(function(P){if(P.Type==="Path"){s=sap.suite.ui.generic.template.js.AnnotationHelper._getNavigationPrefix(m,o,P.Value);if(s){if(E.indexOf(s)===-1){E.push(s);}}}});}if(E.length>0){var p=i.getSetting("preprocessorsData");if(p){var r=p.rootContextExpand||[];for(var j=0;j<E.length;j++){if(r.indexOf(E[j])===-1){r.push(E[j]);}}p.rootContextExpand=r;}}}return sap.ui.model.odata.AnnotationHelper.format(i,d);},formatWithExpand:function(i,d,e){sap.suite.ui.generic.template.js.AnnotationHelper.getNavigationPathWithExpand(i,d,e);i=i.getInterface(0);sap.suite.ui.generic.template.js.AnnotationHelper.formatWithExpandSimple(i,d,e);return sap.ui.model.odata.AnnotationHelper.format(i,d);},_getNavigationPrefix:function(m,e,p){var E="";var P=p.split("/");if(P.length>1){for(var i=0;i<(P.length-1);i++){var a=m.getODataAssociationEnd(e,P[i]);if(a){e=m.getODataEntityType(a.type);if(E){E=E+"/";}E=E+P[i];}else{return E;}}}return E;},getNavigationPathWithExpand:function(I,c,E){I=I.getInterface(0);var d=[],a=[],f,F=[];var m=I.getModel();var o=m.getODataEntitySet(E.name||'');var r=sap.ui.model.odata.AnnotationHelper.resolvePath(m.getContext(I.getPath()));var n=sap.ui.model.odata.AnnotationHelper.getNavigationPath(I,c);var N=n.replace("{","").replace("}","");if(N){var b=m.getODataEntityType(o.entityType);var A=m.getODataAssociationSetEnd(b,N);if(A&&A.entitySet){o=m.getODataEntitySet(A.entitySet);}}else{var b=m.getODataEntityType(E.entityType);}if(r){F=m.getObject(r);}F=F.Data||F;var g=function(P,k){var s=sap.suite.ui.generic.template.js.AnnotationHelper._getNavigationPrefix(m,b,P);if(s){if(a.indexOf(s)===-1){a.push(s);}}if(k){try{d=sap.ui.comp.smartfield.SmartField.getSupportedAnnotationPaths(m,o,P,true)||[];}catch(e){d=[];}for(var i=0;i<d.length;i++){if(a.indexOf(d[i])===-1){a.push(d[i]);}}}};var h=function(P){if(P.Type==="LabeledElement"){g(P.Value.Path);}else if(P.Type==="Path"){g(P.Value);}};for(var i=0;i<F.length;i++){f=F[i];if(f.Value&&f.Value.Path){g(f.Value.Path,true);}if(f.Value&&f.Value.Apply&&f.Value.Apply.Name==="odata.concat"){f.Value.Apply.Parameters.forEach(h);}if(f.Action&&f.Action.Path){g(f.Action.Path);}if(f.Target&&f.Target.Path){g(f.Target.Path);}if(f.SemanticObject&&f.SemanticObject.Path){g(f.SemanticObject.Path);}if(f.Url&&f.Url.Path){g(f.Url.Path);}if(f.Url&&f.Url.Apply&&f.Url.Apply.Parameters){f.Url.Apply.Parameters.forEach(h);}if(f.UrlContentType&&f.UrlContentType.Path){g(f.UrlContentType.Path);}}if(F.name){g(F.name,true);}if(a.length>0){if(N===""){var p=I.getSetting("preprocessorsData");if(p){var R=p.rootContextExpand||[];for(var j=0;j<a.length;j++){if(R.indexOf(a[j])===-1){R.push(a[j]);}}p.rootContextExpand=R;}}else{n="{ path : '"+N+"', parameters : { expand : '"+a.join(',')+"'} }";}}return n;},isSelf:function(p){if(p===undefined||(p&&p.indexOf('@')===0&&p.indexOf('/')===-1)){return true;}return false;},number:function(v){if(!v){return NaN;}else if(v.Decimal){return+v.Decimal;}else if(v.Path){return'{'+v.Path+'}';}else{return NaN;}},formatColor:(function(){function f(v){if(!v){return NaN;}else if(v.Decimal){return v.Decimal;}else if(v.EnumMember){return'\''+v.EnumMember+'\'';}else if(v.Path){return'${'+v.Path+'}';}else{return NaN;}}function a(d){var c=d.Criticality;return'{= '+f(c)+' === \'UI.CriticalityType/Negative\' ? \'Error\' : '+f(c)+'=== \'UI.CriticalityType/Critical\' ? \'Critical\' : \'Good\'}';}function b(d){var v=f(d.Value);var c=d.CriticalityCalculation;return'{= ('+v+' < '+f(c.DeviationRangeLowValue)+' || '+v+' > '+f(c.DeviationRangeHighValue)+') ? \'Error\' : ('+v+' < '+f(c.ToleranceRangeLowValue)+' || '+v+' > '+f(c.ToleranceRangeHighValue)+') ? \'Critical\' : \'Good\'}';}return function(d){if(d.Criticality){return a(d);}else if(d.CriticalityCalculation){return b(d);}};})(),_determineColumnIndex:function(c){var C=c.getPath();var i=Number(C.slice(C.lastIndexOf("/")+1));var l=C.slice(0,C.lastIndexOf("/"));var L=c.getModel().getObject(l);for(var r=0;r<i;r++){if((L[r].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||L[r].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(!L[r].Inline||L[r].Inline.Bool==="false")){i--;}}return i;},createP13NColumnForAction:function(c,d){var C=sap.suite.ui.generic.template.js.AnnotationHelper._determineColumnIndex(c);var p='\\{"columnKey":"'+d.Label.String+'", "columnIndex":"'+C+'", "actionButton":"true" \\}';return p;},createP13NColumnForIndicator:function(i,c,C,d,D,o){var p=sap.suite.ui.generic.template.js.AnnotationHelper.createP13N(i,c,C,d,D,o);var O=p.slice(0,p.lastIndexOf("\\}")-1);var a=i.getInterface(2);var b=sap.suite.ui.generic.template.js.AnnotationHelper._determineColumnIndex(a);if(b){O+=', "columnIndex":"'+b;}O+='" \\}';return O;},createP13N:function(I,c,C,d,D,o){var p="",a=[],n="";if(d.RecordType==="com.sap.vocabularies.UI.v1.DataField"||d.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){if(d["RecordType"]==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&d.Target){if(D){if(d.Criticality){D.Criticality=d.Criticality;}if(D.TargetValue&&D.TargetValue.Path){a.push(D.TargetValue.Path);}d=D;C=o;}}if(d.Value.Path){var s=d.Value.Path;if(d.Visualization&&d.Visualization.EnumMember){s=s+d.Visualization.EnumMember.slice(d.Visualization.EnumMember.lastIndexOf("/")+1,d.Visualization.EnumMember.length);}p='\\{"columnKey":"'+s+'", "leadingProperty":"'+d.Value.Path;var m=I.getInterface(0).getModel("meta");if(m){var e=m.getODataEntityType(c.entityType);if(e){n=sap.suite.ui.generic.template.js.AnnotationHelper._getNavigationPrefix(m,e,d.Value.Path);if(n){n=n+"/";}}}}else if(d.Value.Apply&&d.Value.Apply.Name==="odata.concat"){d.Value.Apply.Parameters.forEach(function(P){if(P.Type==="Path"){if(!p){p='\\{"columnKey":"'+P.Value+'", "leadingProperty":"'+P.Value;}else{a.push(P.Value);}}});}if((C.type==="Edm.DateTime")&&(C["sap:display-format"]==="Date")){p+='", "type":"date';}if(d.Criticality&&d.Criticality.Path){a.push(d.Criticality.Path);}if(C["com.sap.vocabularies.Common.v1.Text"]&&C["com.sap.vocabularies.Common.v1.Text"].Path){a.push(n+C["com.sap.vocabularies.Common.v1.Text"].Path);}if(C["Org.OData.Measures.V1.ISOCurrency"]&&C["Org.OData.Measures.V1.ISOCurrency"].Path){a.push(n+C["Org.OData.Measures.V1.ISOCurrency"].Path);}if(C["Org.OData.Measures.V1.Unit"]&&C["Org.OData.Measures.V1.Unit"].Path){a.push(n+C["Org.OData.Measures.V1.Unit"].Path);}if(C["com.sap.vocabularies.Common.v1.FieldControl"]&&C["com.sap.vocabularies.Common.v1.FieldControl"].Path){a.push(n+C["com.sap.vocabularies.Common.v1.FieldControl"].Path);}if((d["RecordType"]==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&d.Url&&d.Url.Apply&&d.Url.Apply.Parameters){d.Url.Apply.Parameters.forEach(function(P){if(P.Type==="LabeledElement"){a.push(P.Value.Path);}});}if((d["RecordType"]==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&d.Url&&d.Url.Path){a.push(d.Url.Path);}if(a.length>0){var A="";a.forEach(function(P){if(A){A=A+",";}A=A+P;});p+='", "additionalProperty":"'+A;}var N=false;if(c["Org.OData.Capabilities.V1.SortRestrictions"]&&c["Org.OData.Capabilities.V1.SortRestrictions"].NonSortableProperties){var b=c["Org.OData.Capabilities.V1.SortRestrictions"].NonSortableProperties;for(var i=b.length-1;i>=0;i--){if(b[i].PropertyPath===d.Value.Path){N=true;break;}}}if(!N){if(n){p+='", "sortProperty":"'+n+C.name;}else{p+='", "sortProperty":"'+C.name;}}var f=false;if(c["Org.OData.Capabilities.V1.FilterRestrictions"]){if(c["Org.OData.Capabilities.V1.FilterRestrictions"].Filterable!=='false'){if(c["Org.OData.Capabilities.V1.FilterRestrictions"].NonFilterableProperties){var g=c["Org.OData.Capabilities.V1.FilterRestrictions"].NonFilterableProperties;for(var j=g.length-1;j>=0;j--){if(g[j].PropertyPath===d.Value.Path){f=true;break;}}}}else{f=true;}}if(!f){p+='", "filterProperty":"'+C.name;}}else{p='\\{"columnKey":"'+d.Label.String;p+='", "actionButton":"true';}return p+'" \\}';},hasActions:function(P){for(var i=0;i<P.length;i++){if(P[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||P[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){return true;}}return false;},hasCustomActions:function(r,e,m,f){if(e&&m){if(f){if(m[e]){var M=m[e];if(M.EntitySet===e){var F=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);var s=M.Sections[F];if(s&&s.id===F&&s.Actions){for(var i in s.Actions){if(s.Actions[i].requiresSelection!==false){return true;}}}}}}else{if(sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(r)){m=m["sap.suite.ui.generic.template.ListReport.view.ComplexTable"]["sap.ui.generic.app"];}else{m=m["sap.suite.ui.generic.template.ListReport.view.ListReport"]["sap.ui.generic.app"];}if(m&&m[e]){var M=m[e];if(M.EntitySet===e){if(M.Actions){for(var i in M.Actions){if(M.Actions[i].requiresSelection!==false){return true;}}}}}}}return false;},getSelectionModeGridTable:function(e,r,m,f,E,R){var s="None";for(var i in R.pages){if(R.pages[i].entitySet===r&&sap.suite.ui.generic.template.js.AnnotationHelper.hasSubObjectPage(E,R.pages[i].pages)){s="Single";break;}}if(sap.suite.ui.generic.template.js.AnnotationHelper.isOrHasComplexTable(E.name,R,f)){return s;}if(sap.suite.ui.generic.template.js.AnnotationHelper.hasActions(e)||sap.suite.ui.generic.template.js.AnnotationHelper.hasCustomActions(R,r,m,f)){s="Single";}return s;},getSelectionModeResponsiveTable:function(e,r,m,f,E,R){var s="None";if(sap.suite.ui.generic.template.js.AnnotationHelper.isOrHasComplexTable(E.name,R,f)){return s;}if(sap.suite.ui.generic.template.js.AnnotationHelper.hasActions(e)||sap.suite.ui.generic.template.js.AnnotationHelper.hasCustomActions(R,r,m,f)){s="SingleSelectLeft";}return s;},getSortOrder:function(P){var s='';for(var i=0;i<P.length;i++){if(!s){s=P[i].Property.PropertyPath;}else{s=s+', '+P[i].Property.PropertyPath;}if(P[i].Descending){s=s+' '+P[i].Descending.Bool;}}return s;},replaceSpecialCharsInId:function(i){if(i.indexOf(" ")>=0){jQuery.sap.log.error("Annotation Helper: Spaces are not allowed in ID parts. Please check the annotations, probably something is wrong there.");}return i.replace(/@/g,"").replace(/\//g,"::").replace(/#/g,"::");},getStableIdPartFromDataField:function(d){var p="",I="";if(d.RecordType&&d.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"){return sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Action.String);}else if(d.RecordType&&d.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(d.SemanticObject.String){I=sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.SemanticObject.String);}else if(d.SemanticObject.Path){I=sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.SemanticObject.Path);}if(d.Action&&d.Action.String){I=I+"::"+sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Action.String);}else if(d.Action&&d.Action.Path){I=I+"::"+sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Action.Path);}return I;}else if(d.RecordType&&d.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){return sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Target.AnnotationPath);}else if(d.Value&&d.Value.Path){return sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Value.Path);}else if(d.Value&&d.Value.Apply&&d.Value.Apply.Name==="odata.concat"){for(var i=0;i<d.Value.Apply.Parameters.length;i++){if(d.Value.Apply.Parameters[i].Type==="Path"){if(p){p=p+"::";}p=p+sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Value.Apply.Parameters[i].Value);}}return p;}else{jQuery.sap.log.error("Annotation Helper: Unable to create a stable ID. Please check the annotations.");}},getStableIdPartFromDataPoint:function(d){var p="";if(d.Value&&d.Value.Path){return sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Value.Path);}else if(d.Value&&d.Value.Apply&&d.Value.Apply.Name==="odata.concat"){for(var i=0;i<d.Value.Apply.Parameters.length;i++){if(d.Value.Apply.Parameters[i].Type==="Path"){if(p){p=p+"::";}p=p+sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(d.Value.Apply.Parameters[i].Value);}}return p;}else{jQuery.sap.log.error("Annotation Helper: Unable to create stable ID derived from annotations.");}},getStableIdPartFromFacet:function(f){var h="";if(typeof this.getContext==="function"&&this.getContext()&&this.getContext().getPath()&&this.getContext().getPath().indexOf("com.sap.vocabularies.UI.v1.HeaderFacets")>=0){h="headerEditable::";}if(f.RecordType&&f.RecordType==="com.sap.vocabularies.UI.v1.CollectionFacet"){if(f.ID&&f.ID.String){return h+f.ID.String;}else{jQuery.sap.log.error("Annotation Helper: Unable to create a stable ID. You have to set an ID at all collection facets.");return Math.floor((Math.random()*99999)+1).toString();}}else if(f.RecordType&&f.RecordType==="com.sap.vocabularies.UI.v1.ReferenceFacet"){if(f.ID&&f.ID.String){return h+f.ID.String;}else{return h+sap.suite.ui.generic.template.js.AnnotationHelper.replaceSpecialCharsInId(f.Target.AnnotationPath);}}else{jQuery.sap.log.error("Annotation Helper: Unable to create a stable ID. Please check the facet annotations.");return Math.floor((Math.random()*99999)+1).toString();}},extensionPointBeforeFacetExists:function(e,f,m){var E="BeforeFacet|"+e+"|"+sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);if(m[E]){return"true";}else{return"";}},extensionPointAfterFacetExists:function(e,f,m){var E="AfterFacet|"+e+"|"+sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);if(m[E]){return"true";}else{return"";}},getExtensionPointBeforeFacetTitle:function(e,f,m){var E="BeforeFacet|"+e+"|"+sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);var o=m[E];if(o&&o['sap.ui.generic.app']&&o['sap.ui.generic.app'].title){return o['sap.ui.generic.app'].title;}},getExtensionPointAfterFacetTitle:function(e,f,m){var E="AfterFacet|"+e+"|"+sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);var o=m[E];if(o&&o['sap.ui.generic.app']&&o['sap.ui.generic.app'].title){return o['sap.ui.generic.app'].title;}},getRepeatIndex:function(v){if(v&&v.getPath()){var p="0000000000";var P=p+((parseInt(v.getPath().substring(v.getPath().lastIndexOf("/")+1),10)+1)*10).toString();return P.substr(P.length-p.length);}else{jQuery.sap.log.error("Annotation Helper: Unable to get index.");}},getColumnListItemType:function(l,s){if(sap.suite.ui.generic.template.js.AnnotationHelper.hasSubObjectPage(l,s)){return"Navigation";}else{return"Inactive";}},hasSubObjectPage:function(l,s){var h=false;if(l.name&&s&&s.length>0){s.forEach(function(S){if(l.name===S.entitySet){if(!sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(S)){h=true;}}});}return h;},actionControlHeader:function(i,a,e){sap.suite.ui.generic.template.js.AnnotationHelper._actionControlExpand(i,a,e);if(a){return"{= !${ui>/editable} && ${path: '"+a+"'} }";}else{return"{= !${ui>/editable} }";}},actionControlFooter:function(i,a,e){sap.suite.ui.generic.template.js.AnnotationHelper._actionControlExpand(i,a,e);if(a){return"{path: '"+a+"'}";}else{return"true";}},_actionControlExpand:function(i,a,e){var E=[],s;i=i.getInterface(0);var m=i.getModel();var o=m.getODataEntityType(e);if(a){s=sap.suite.ui.generic.template.js.AnnotationHelper._getNavigationPrefix(m,o,a);if(s){E.push(s);}}if(E.length>0){var p=i.getSetting("preprocessorsData");if(p){var r=p.rootContextExpand||[];for(var j=0;j<E.length;j++){if(r.indexOf(E[j])===-1){r.push(E[j]);}}p.rootContextExpand=r;}}},getEntityTypesForFormPersonalization:function(i,f,e){i=i.getInterface(0);var E=[];var m=i.getModel();var o=m.getODataEntitySet(e.name||'');var F=[];if(f.RecordType==="com.sap.vocabularies.UI.v1.CollectionFacet"&&f.Facets){F=f.Facets;}else if(f.RecordType==="com.sap.vocabularies.UI.v1.ReferenceFacet"){F.push(f);}F.forEach(function(f){var n;if(f.Target&&f.Target.AnnotationPath&&f.Target.AnnotationPath.indexOf("/")>0){n=f.Target.AnnotationPath.split("/")[0];var a=m.getODataEntityType(o.entityType);var A=m.getODataAssociationSetEnd(a,n);if(A&&A.entitySet){o=m.getODataEntitySet(A.entitySet);if(E.indexOf(o.entityType.split(".")[1])===-1){E.push(o.entityType.split(".")[1]);}}}else{if(E.indexOf(e.entityType.split(".")[1])===-1){E.push(e.entityType.split(".")[1]);}}});return E.join(", ");},formatHeaderTitle:function(i,d){return"{path: 'ui>/createMode', formatter: '._templateFormatters.formatDefaultObjectTitle'}";},getTextArrangementForSmartControl:function(i,v,e){i=i.getInterface(0);var m=i.getModel();var E=m.getODataEntityType(e.entityType);var t="descriptionAndId";if(E["com.sap.vocabularies.UI.v1.TextArrangement"]&&E["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){switch(E["com.sap.vocabularies.UI.v1.TextArrangement"].EnumMember){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":t="idAndDescription";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":t="idOnly";break;default:break;}}return t;},isDeepFacetHierarchy:function(f){if(f.Facets){for(var i=0;i<f.Facets.length;i++){if(f.Facets[i].RecordType==="com.sap.vocabularies.UI.v1.CollectionFacet"){return true;}}}return false;},doesCollectionFacetOnlyContainForms:function(f){var r=true;if(f.Facets){for(var i=0;i<f.Facets.length;i++){if(f.Facets[i].Target&&f.Facets[i].Target.AnnotationPath){if((f.Facets[i].Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")<0)&&(f.Facets[i].Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.Identification")<0)&&(f.Facets[i].Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.DataPoint")<0)){r=false;}}}}else{r=false;}return r;},doesFieldGroupContainOnlyOneMultiLineDataField:function(f,F){if(f.Data.length!==1){return false;}if((F['com.sap.vocabularies.UI.v1.MultiLineText']===undefined)||(f.Data[0].RecordType!=="com.sap.vocabularies.UI.v1.DataField")){return false;}return true;},testFormatter:function(v){return"formatted:"+v;},getFacetID:function(e,f){return e+"|"+sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);},reuseComponentForFacetExists:function(e,f,r){var F=sap.suite.ui.generic.template.js.AnnotationHelper.getFacetID(e,f);if(r[F]){return"true";}else{return"";}},getNameOfReuseComponentForFacet:function(e,f,r){var F=sap.suite.ui.generic.template.js.AnnotationHelper.getFacetID(e,f);return r[F].componentName;},formatComponentSettings:function(i,e,f,r){var t=i.getInterface(0),F=sap.suite.ui.generic.template.js.AnnotationHelper.getFacetID(e.name,f),R=r[F];var n=sap.ui.model.odata.AnnotationHelper.getNavigationPath(t,f.Target);var N=n.replace("{","").replace("}","");return sap.suite.ui.generic.template.js.AnnotationHelper.formatComponentSettingsInt(i,e,R,N);},formatComponentSettingsInt:function(i,e,r,n){var t=i.getInterface(0),m=t.getModel(),E=m.getODataEntityType(e.entityType);n=n||r.binding;if(n){var a=m.getODataAssociationSetEnd(E,n);if(a&&a.entitySet){e=m.getODataEntitySet(a.entitySet);E=m.getODataEntityType(e.entityType);}}var s=sap.ui.model.odata.AnnotationHelper.format(t,e["com.sap.vocabularies.Common.v1.SemanticObject"]);var o="";E.key.propertyRef.forEach(function(k){o+="{"+k.name+"}::";});o=o.replace(/::$/,"");var b={"uiMode":"{= ${ui>/createMode} ? '"+U.Create+"' : ( ${ui>/editable} ? '"+U.Edit+"' : '"+U.Display+"') }","semanticObject":s||""};if(r){jQuery.extend(b,r.settings);var v=JSON.stringify(b);v=v.replace(/\}/g,"\\}").replace(/\{/g,"\\{");return v;}},isListReportTemplate:function(r){if(r){return r.template==="sap.suite.ui.generic.template.ListReport";}},getStableIdPartForDatafieldActionButton:function(d,f){var s="";var D="";var F="";if(f){F=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromFacet(f);}if(d){D=sap.suite.ui.generic.template.js.AnnotationHelper.getStableIdPartFromDataField(d);}s=(F!==""?F+"::":"")+"action::"+D;return s;}};sap.suite.ui.generic.template.js.AnnotationHelper.formatComponentSettingsInt.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.formatComponentSettings.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.getRepeatIndex.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.formatWithExpand.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.formatWithExpandSimple.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.getNavigationPathWithExpand.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.getEntityTypesForFormPersonalization.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.actionControlHeader.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.actionControlFooter.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.formatHeaderTitle.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.getTextArrangementForSmartControl.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.matchesBreadCrumb.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.hasBreadCrumbs.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.createP13N.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.createP13NColumnForIndicator.requiresIContext=true;sap.suite.ui.generic.template.js.AnnotationHelper.createP13NColumnForAction.requiresIContext=true;})();};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.js.QuickTemplates.AnnotationHelper')){jQuery.sap.declare('sap.suite.ui.generic.template.js.QuickTemplates.AnnotationHelper');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.model.Context');jQuery.sap.require('sap.ui.model.odata.AnnotationHelper');sap.ui.define("sap/suite/ui/generic/template/js/QuickTemplates/AnnotationHelper",["sap/ui/base/Object","sap/ui/model/Context","sap/ui/model/odata/AnnotationHelper"],function(B,C,O){"use strict";var A=B.extend("sap.suite.ui.generic.template.js.QuickTemplates.AnnotationHelper");A.resolveFieldGroupTarget=function(c){var f=A._getFacetOfType(c,"FieldGroup");if(f){return O.resolvePath(c.getModel().createBindingContext(c.getPath()+"/"+f.index+"/Target"));}return null;};A.resolveLineItemTarget=function(c){var f=A._getFacetOfType(c,"LineItem");if(f){return O.resolvePath(c.getModel().createBindingContext(c.getPath()+"/"+f.index+"/Target"));}return null;};A.resolveFieldGroupFacet=function(c){var f=A._getFacetOfType(c,"FieldGroup");if(f){return c.getPath()+"/"+f.index;}return undefined;};A.resolveLineItemFacet=function(c){var f=A._getFacetOfType(c,"LineItem");if(f){return c.getPath()+"/"+f.index;}return undefined;};A._getFacetOfType=function(c,f){var a=c.getObject();var t=-1;var b=null;if(Array.isArray(a)){jQuery.each(a,function(i,d){if(d.Target&&d.Target.AnnotationPath&&d.Target.AnnotationPath.indexOf(f)>=0){t=i;b=d;}});}if(t>=0){return{facet:b,index:t};}return undefined;};A.getAllPropertyPathsFromFacet=function(c,f){var i=A.createFormatterInterface(c);var m=c.getModel().getMetaModel();var M=A.getMetaDataForContext(c);var o=A.getMetaModelContextForFacetType(i,M.entityType.namespace+"."+M.entityType.name,f);var r=O.resolvePath(o);var R=m.getProperty(r);var a=R.Data||R;var p=[];if(a&&Array.isArray(a)){jQuery.each(a,function(b,d){if(d.RecordType=='com.sap.vocabularies.UI.v1.DataField'&&d.Value&&d.Value.Path){p.push(d.Value.Path);}});}return p;};A.getMetaModelContextForFacetType=function(I,e,f){var m=I.getModel()||I.getModel(0);var E=m.getODataEntityType(e);var s=["QuickCreate","QuickView"];var F="";var M=null;var a=null;for(var i=0;i<s.length;i++){F="com.sap.vocabularies.UI.v1."+s[i]+"Facets";if(E[F]){a=E[F];break;}}if(a){var t=-1;if(Array.isArray(a)){jQuery.each(a,function(i,b){if(b.Target&&b.Target.AnnotationPath&&b.Target.AnnotationPath.indexOf(f)>=0){t=i;}});}if(t>=0){M=new C(m,E.$path+"/"+F+"/"+t+"/Target");}}return M;};A.formatExpandBindingPathForHeaderObject=function(i,e){var h=A.getNavigationPathsFromFacet(i,e,"FieldGroup");return A.formatExpandPaths(h);};A.getMetaDataForContext=function(c){var m=c.getModel().getMetaModel();var e=m.getODataEntityType(c.getObject().__metadata.type);var E=null;var o=m.getProperty(m.getODataEntityContainer(true)).entitySet;jQuery.each(o,function(i,b){if(b.entityType===c.getObject().__metadata.type){E=b.name;}});var a=m.getODataEntitySet(E);return{entityType:e,entitySet:a};};A.getNavigationPathsFromFacet=function(I,e,f){var m=I.getModel()||I.getModel(0);var M=A.getMetaModelContextForFacetType(I,e,f);if(!M){return[];}var r=O.resolvePath(M);var R=m.getProperty(r);var n={};var p="/";if(R.Data){p+="Data/";}var a=R.Data||R;if(a&&Array.isArray(a)){jQuery.each(a,function(i,d){if(d.RecordType=='com.sap.vocabularies.UI.v1.DataField'&&d.Value&&d.Value.Path){var b=new C(m,r+p+i+"/Value");var c=O.getNavigationPath(b);c=c.replace(/[{}]/g,'');if(c){n[c]="";}}});}return Object.keys(n);};A.getLineItemsNavPropertyName=function(i,e){var m=A.getMetaModelContextForFacetType(i,e,"LineItem");if(m){var c=O.getNavigationPath(m);c=c.replace(/[{}]/g,'');return c;}return undefined;};A.formatBindingPathForLineItems=function(i,e,I){var l=A.getLineItemsNavPropertyName(i,e);if(arguments.length===2){I=false;}if(I){var a=A.getNavigationPathsFromFacet(i,e,"LineItem");if(a&&a.length>0){return"{path: '"+l+"', parameters : {expand:'"+A.formatExpandPaths(a)+"'}}";}}return"{path: '"+l+"'}";};A.formatExpandPaths=function(e){var E="";for(var i=0;i<e.length;i++){E+=e[i];if(i<e.length-1){E+=",";}}return E;};A.createFormatterInterface=function(b){var m=b.getModel().getMetaModel().getMetaContext(b.getPath());var i={getModel:function(){return b.getModel().getMetaModel();},getContext:function(){return m;},getPath:function(){return m.getPath();}};return i;};A.formatBindingPathForLineItems.requiresIContext=true;A.getMetaModelContextForFacetType.requiresIContext=true;A.formatExpandBindingPathForHeaderObject.requiresIContext=true;A.resolveFieldGroupTarget.requiresIContext=true;A.resolveLineItemTarget.requiresIContext=true;A.resolveLineItemFacet.requiresIContext=true;A.resolveFieldGroupFacet.requiresIContext=true;return A;},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.js.QuickTemplates.ODataModelHelper')){jQuery.sap.declare('sap.suite.ui.generic.template.js.QuickTemplates.ODataModelHelper');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.model.odata.AnnotationHelper');sap.ui.define("sap/suite/ui/generic/template/js/QuickTemplates/ODataModelHelper",["sap/ui/base/Object","./AnnotationHelper","sap/ui/model/odata/AnnotationHelper"],function(B,Q,O){"use strict";var a=B.extend("sap.suite.ui.generic.template.js.QuickTemplates.ODataModelHelper");a.initializeObjectProperties=function(o,p,c){var t=[];var k=o.getModel().getKey(o.getObject());var b=o.getModel().oData[k];if(b){t.push(b);}var C=o.getModel().mChangedEntities[k];if(C){t.push(C);}var d=Q.getMetaDataForContext(o);var i=0;if(p&&Array.isArray(p)){jQuery.each(p,function(e,f){var g=f.split("/");var h=g[0];var j=null;if(g.length>1){j=g.slice(1).join("/");}if(jQuery.isNumeric(h)&&j){a.initializeObjectProperties(o,[j],c);return;}i=0;var l=false;if(d.entityType.navigationProperty){for(;i<d.entityType.navigationProperty.length;i++){if(d.entityType.navigationProperty[i].name===h){l=true;break;}}}if(!l){jQuery.each(t,function(i,n){n[h]="";});}else if(!b[h]){var m=o.getModel().createEntry(o.getPath()+"/"+h,c);b[h]={__deferred:{}};a.restoreNavigationPropertyReferences(o,h,m);if(j){a.initializeObjectProperties(m,[j],c);}}});}};a.restoreLineItemReferences=function(e,c){var i=Q.createFormatterInterface(c);var m=Q.getMetaModelContextForFacetType(i,e,"LineItem");if(m){var C=O.getNavigationPath(m);C=C.replace(/[{}]/g,'');a.restoreNavigationPropertyReferences(c,C);}};a.restoreNavigationPropertyReferences=function(p,n,c){if(!n){return;}if(!p.getObject()){return;}var m=p.getModel().getMetaModel();var o=p.getModel().getKey(p.getObject());var C=p.getModel().oData[o];var e=m.getODataEntityType(C.__metadata.type);var N=m.getODataAssociationEnd(e,n);var s=null;var E=m.getProperty(m.getODataEntityContainer(N.type)).entitySet;jQuery.each(E,function(i,f){if(f.entityType===N.type){s=f.name;}});if(!C[n]){C[n]={};}if(C[n].__list){C[n].__list=[];}var b=function(k){if(C[n].__deferred){delete C[n].__deferred;}if(N.multiplicity==="*"){if(!C[n].__list){C[n].__list=[];}C[n].__list.push(k);}else{C[n].__ref=k;}};if(!c){var d=Object.keys(p.getModel().oData);jQuery.each(d,function(i,k){if(k.indexOf(s)>=0){b(k);}});}else{var k=c.getPath().substring(1);b(k);}};a.findObjects=function(){var p,b,c;if(arguments.length===3){p=arguments[0];b=arguments[1];c=arguments[2];}else if(arguments.length==2){b=arguments[0];c=arguments[1];}var k=c.key||undefined,m=c.matchCallback||undefined,n=c.noMatchCallback||undefined,d=c.maxNestedLevel||3;var e=true;if(!d){d=3;}if(!a.findObjects._recursionCount){a.findObjects._recursionCount=0;}a.findObjects._recursionCount++;if(a.findObjects._recursionCount>d){a.findObjects._recursionCount--;return;}var f=function(o){var s=Object.prototype.toString.call(o);return(s==='[object Array]'||s==='[object Object]');};var h=Object.prototype.hasOwnProperty.bind(b);if(b){for(var i in b){if(h(i)){var I=f(b[i]);if(b[i]&&I){b[i].__nestedKey=i;}e=true;if(i===k&&m){e=m(p,b,b[i]);}else if(n){e=n(p,b,b[i]);}if(e&&I){a.findObjects(b,b[i],{key:k,matchCallback:m,noMatchCallback:n,maxNestedLevel:d});}if(b[i]&&I){delete b[i].__nestedKey;}}}}a.findObjects._recursionCount--;};return a;},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.js.QuickTemplates.QuickCreateAPI')){jQuery.sap.declare('sap.suite.ui.generic.template.js.QuickTemplates.QuickCreateAPI');jQuery.sap.require('sap.ui.base.ManagedObject');jQuery.sap.require('sap.ui.generic.app.transaction.DraftContext');jQuery.sap.require('sap.m.MessageToast');sap.ui.define("sap/suite/ui/generic/template/js/QuickTemplates/QuickCreateAPI",["sap/ui/base/ManagedObject","sap/ui/generic/app/transaction/DraftContext","sap/m/MessageToast"],function(M,D,a){"use strict";var Q=M.extend("sap.suite.ui.generic.template.js.QuickTemplates.QuickCreateAPI",{metadata:{library:"sap.suite.ui.generic.template",properties:{},events:{objectCreated:{parameters:{context:{type:"sap.ui.model.Context"}}},destroyed:{parameters:{collectionItemGuid:{type:"String"}}},autofillLineItems:{parameters:{numberOfLineItems:{type:"Number"}}}}}});Q.EVENT_CONSTANTS={EventChannel:"sap.fiori.cp.quickactions.EventChannel",QUICKCREATE_LINE_ITEMS_FOUND:"LineItemsFound"};Q.CopilotModelName="FioriCopilotODataModel";Q._Instances={};Q.getInstance=function(c){if(!c){return undefined;}if(c.copilotEntity){return Q._Instances[c.copilotEntity.getODataKey()];}else{return Q._Instances[c];}};Q.createAPI=function(c,C,o){function g(){return o.getView().getBindingContext().getObject();}function b(){return o.getQuickCreateItem();}function d(){return C;}function e(){return c;}function f(){return sap.ui.getCore().getModel(Q.CopilotModelName);}function u(i){if(this._bDestroyed){return;}var F=this.getQuickCreateItem();if(F.draftid===i){return;}F.draftid=i;F.copilotEntity.update(F,{error:jQuery.proxy(function(G){jQuery.sap.log.error(G,"","QuickCreateAPI");},this)});}function h(){return C.getAggregation("rootControl");}function j(){return this.oRootView;}function s(i){this.oRootView=i;this.calculateViewHeight(this.oRootView,true);}function k(){if(this.oRootView&&this.oRootView.getController()&&this.oRootView.getController().bDraftEnabled!==undefined){return this.oRootView.getController().bDraftEnabled;}if(!this.oRootView||!this.oRootView.getBindingContext()){return undefined;}var i=new D(this.getQuickCreateModel());return i.hasDraft(this.oRootView.getBindingContext());}function l(){var i=this.getComponentInstance().getModel();if(!i&&this.oRootView){i=this.oRootView.getModel();}return i;}function m(){return o.isCurrentUserCreator();}function n(){if(!this.oRootView){return undefined;}return this.oRootView.getBindingContext();}function p(){var i=this.getQuickCreateRootBindingContext();if(i&&i.getObject()){return i.getObject().__metadata.type;}return undefined;}function _(i,F,P){var G=P.numberOfLineItems;if(G<=0){return;}this.fireAutofillLineItems({numberOfLineItems:G});}function q(){this._attachToModelBindingChanges();if(!this.oRootView){var V=o.oViewUtils.findFirstViewFromControlHierarchy(this.getRootControl());if(V){this.setRootView(V);}}}function r(){if(!this._bBindingChangeAttached){var i=C.getModel();if(i){var F=i.addBinding.bind(i);var G=this;i.addBinding=function(H){F(H);H.attachEvent("change",G._onDataBindingChanged);};this._bBindingChangeAttached=true;}}}function t(){return new Promise(jQuery.proxy(function(i,F){var G=this.getCopilotModel();G.read("/"+G.getKey(this.getQuickCreateItem()),{success:jQuery.proxy(function(H,R){if(H.modeljson){var I=this.getQuickCreateModel();this._loadingJSON=true;if(this.isDraftEnabled()){I.oData=JSON.parse(H.modeljson);}else{var J=JSON.parse(H.modeljson);I.mChangedEntities=J.mChangedEntities;I.mChangeHandles=J.mChangeHandles;I.mDeferredRequests=J.mDeferredRequests;I.oData=J.oData;}I.updateBindings();}if(i){i();}delete this._loadingJSON;},this),error:jQuery.proxy(function(H){if(F){F(H);}},this)});},this));}function v(){if(!this._oUpdateModelJSONTimer){this._oUpdateModelJSONTimer=setTimeout(this._updateModelJSON,1000);}}function w(){if(this._loadingJSON||this._bDestroyed||!this.isCurrentUserCreator()){return;}this._oUpdateModelJSONTimer=null;var F=this.getQuickCreateItem();var G=this.getQuickCreateModel();var H="";if(this.isDraftEnabled()){var I={};var J=Object.keys(G.mChangedEntities);var K=Object.keys(G.oData);var L={};jQuery.each(K,jQuery.proxy(function(i,O){if(G.mChangedEntities[O]){L={};jQuery.extend(L,G.oData[O]);jQuery.extend(L,G.mChangedEntities[O]);I[O]=L;}else{I[O]=G.oData[O];}},this));jQuery.each(J,jQuery.proxy(function(i,O){if(!I[O]){I[O]=G.mChangedEntities[O];}},this));H=JSON.stringify(I);}else{var N={};N.mChangedEntities=G.mChangedEntities;N.mChangeHandles=G.mChangeHandles;N.mDeferredRequests=G.mDeferredRequests;N.oData=G.oData;H=JSON.stringify(N);}if(H===F.modeljson){return;}F.modeljson=H;F.copilotEntity.update(F,{error:jQuery.proxy(function(i){jQuery.sap.log.error(i,"","QuickCreateAPI");},this)});}function x(){return new Promise(jQuery.proxy(function(i,F){var G=this.getQuickCreateModel();if(this.oRootView&&this.oRootView.getBindingContext()){if(this.isDraftEnabled()){G.remove(this.oRootView.getBindingContext().getPath(),{success:function(){a.show("Quick Create Draft has been discarded");i();},error:function(H){F(H);}});}else{G.resetChanges();i();}}else{i();}},this));}function y(V,i){if(V){o.calculateViewHeight(V,i);}}function z(i){o.setComponentContainerHeight(i);}function A(i){if(this._bDestroyed){return;}this.fireObjectCreated({context:i});}function B(){if(this._bDestroyed){return;}if(this._oUpdateModelJSONTimer){clearTimeout(this._oUpdateModelJSONTimer);this._oUpdateModelJSONTimer=null;}delete Q._Instances[this._InstanceKey];if(c&&!c._bIsBeingDestroyed&&!c.bIsDestroyed){c.destroy();}this.oRootView=undefined;sap.ui.getCore().getEventBus().unsubscribe(Q.EVENT_CONSTANTS.EventChannel,Q.EVENT_CONSTANTS.QUICKCREATE_LINE_ITEMS_FOUND,this._onLineItemsFound,this);this.fireDestroyed({collectionItemGuid:this._InstanceKey});M.prototype.destroy.call(this);this._bDestroyed=true;}var E=new Q();jQuery.extend(E,{getCollectionItem:g.bind(E),getQuickCreateItem:b.bind(E),updateDraftID:u.bind(E),getRootControl:h.bind(E),isDraftEnabled:k.bind(E),isCurrentUserCreator:m.bind(E),getQuickCreateRootBindingContext:n.bind(E),getQuickCreateRootEntityType:p.bind(E),_onComponentContainerAfterRendering:q.bind(E),calculateViewHeight:y.bind(E),setComponentContainerHeight:z.bind(E),getQuickCreateModel:l.bind(E),objectCreated:A.bind(E),destroy:B.bind(E),getRootView:j.bind(E),setRootView:s.bind(E),getComponentInstance:d.bind(E),getComponentContainer:e.bind(E),_onDataBindingChanged:v.bind(E),_attachToModelBindingChanges:r.bind(E),loadQuickCreateModelFromJSON:t.bind(E),_updateModelJSON:w.bind(E),getCopilotModel:f.bind(E),discardQuickCreateDraft:x.bind(E),_onLineItemsFound:_.bind(E)});c.addEventDelegate({onAfterRendering:E._onComponentContainerAfterRendering});E._InstanceKey=E.getCollectionItem().copilotEntity.getODataKey();if(Q._Instances[E._InstanceKey]){Q._Instances[E._InstanceKey].destroy();}delete Q._Instances[E._InstanceKey];Q._Instances[E._InstanceKey]=E;sap.ui.getCore().getEventBus().subscribe(Q.EVENT_CONSTANTS.EventChannel,Q.EVENT_CONSTANTS.QUICKCREATE_LINE_ITEMS_FOUND,E._onLineItemsFound,E);C.oQuickCreateAPI=E;return C.oQuickCreateAPI;};return Q;},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.Application')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.Application');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.core.routing.History');jQuery.sap.require('sap.ui.core.routing.HistoryDirection');sap.ui.define("sap/suite/ui/generic/template/lib/Application",["sap/ui/base/Object","sap/ui/core/routing/History","sap/ui/core/routing/HistoryDirection"],function(B,H,a){"use strict";function g(t){var c={api:{promise:Promise.resolve()}};var d={};function D(){c.fnResolve();}var r={};function i(e){var n=e.getParameters();if(n.name!==r.name){r=n;return true;}var m=jQuery.extend({},r.arguments,n.arguments);for(var s in m){if(!s.startsWith("?")&&m[s]!==r.arguments[s]){r=n;return true;}}return false;}function b(){return c.api;}var h=H.getInstance();var C;t.oApplication={onAfterNavigate:function(e){C=e.getParameter("toId");D();},onBypassed:function(){r={};c.api.outdated=true;c.api={promise:Promise.reject()};c.fnResolve=jQuery.noop;c.api.promise.catch(jQuery.noop);},onRouteMatched:function(e){if(!i(e)){return;}c.api.outdated=true;c.api={isBack:h.getDirection()===a.Backwards,dataFromLastPage:d,promise:new Promise(function(R){c.fnResolve=R;})};d={};var n=e.getParameter("view").getId();if(!C||n===C){C=n;D();}},getCurrentDisplayObject:b};var I=false;return{setEditableNDC:function(e){I=e;},getEditableNDC:function(){return I;},getCurrentDisplayObject:b,addDataForNextPage:function(o){jQuery.extend(d,o);},setBusyReason:function(){t.oBusyHelper.setBusyReason.apply(t.oBusyHelper,arguments);}};}return B.extend("sap.suite.ui.generic.template.lib.Application",{constructor:function(t){jQuery.extend(this,g(t));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.CommonEventHandlers')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.CommonEventHandlers');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.core.format.DateFormat');jQuery.sap.require('sap.m.ComboBox');jQuery.sap.require('sap.m.MessageBox');jQuery.sap.require('sap.m.MessageToast');jQuery.sap.require('sap.m.Table');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.Sorter');jQuery.sap.require('sap.ui.model.resource.ResourceModel');jQuery.sap.require('sap.ui.comp.smartfilterbar.SmartFilterBar');jQuery.sap.require('sap.ui.table.AnalyticalTable');jQuery.sap.require('sap.ui.table.Table');sap.ui.define("sap/suite/ui/generic/template/lib/CommonEventHandlers",["sap/ui/base/Object","sap/ui/core/format/DateFormat","sap/m/ComboBox","sap/m/MessageBox","sap/m/MessageToast","sap/m/Table","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/model/resource/ResourceModel","sap/ui/comp/smartfilterbar/SmartFilterBar","sap/ui/table/AnalyticalTable","sap/ui/table/Table"],function(B,D,C,M,a,T,F,S,R,b,A,U){"use strict";function g(e){var d=e.getCustomData();var o={};for(var i=0;i<d.length;i++){o[d[i].getKey()]=d[i].getValue();}return o;}function f(j){var m={};for(var p in j){var v=j[p];if(jQuery.type(v)!=="object"){m[p]=v;}}return m;}function H(e){if(e instanceof Error){e.showMessageBox();}}function G(p){var t="";var m=[];return function(o){var l="";var s=p;var d;for(var h in m){if(m[h].path===p){d=m[h];break;}}if(!d){var e=o.getModel("entitySet").getMetaModel();var P=e.getObject(e.getMetaContext(o.sPath+"/"+p).sPath);if(P){var i=" ";for(var k=0;P.extensions&&k<P.extensions.length;k++){if(P.extensions[k].namespace==="http://www.sap.com/Protocols/SAPData"){switch(P.extensions[k].name){case"display-format":i=P.extensions[k].value;break;case"label":l=P.extensions[k].value;break;case"text":var j=P.extensions[k].value;var n=p.split("/");n[n.length-1]=j;s=n.join("/");break;default:break;}}}if(l===""){l=p;}d={path:p,data:{type:P.type,displayFormat:i,label:l,textPath:s}};m.push(d);}}l=d.data.label;if(d.data.textPath!==""){t=o.getProperty(d.data.textPath);if(t===null||t===undefined){t="";}}else if(o.getProperty(p)!==""){t=o.getProperty(p);}switch(d.data.type){case"Edm.DateTime":if(d.data.displayFormat==="Date"){var q=D.getDateInstance({pattern:"MMM d, yyyy"});var r=new Date(0).getTimezoneOffset()*60*1000;t=q.format(new Date(t.getTime()+r));}break;case"Edm.Boolean":if(t===true){t="{i18n>YES}";}else if(t===false){t="{i18n>NO}";}break;default:break;}return{key:t?t:p,text:l?l+": "+t:t};};}function c(o,d,s,e){function h(){return e.getDialogFragment("sap.suite.ui.generic.template.fragments.DiscardDraftPopover",{onDiscardConfirm:function(){var i=function(w){var x=s.oCRUDManager.deleteEntity();x.then(function(){s.oNavigationController.setRootPageToDirty();s.oNavigationController.unbindChildren(o.getOwnerComponent());if(w&&w.getObject()&&w.getObject().IsActiveEntity){s.oNavigationController.navigateToContext(w,undefined,true);}else{window.history.back();}});var y={discardPromise:x};d.fire(o,"AfterCancel",y);};var j=o.getView().getBindingContext();var E=j.getObject();if(E.hasOwnProperty("HasActiveEntity")&&E.HasActiveEntity&&E.hasOwnProperty("SiblingEntity")){var k=o.getView().getModel();k.read(j.getPath()+"/SiblingEntity",{success:function(w){var x=k.getContext("/"+k.getKey(w));i(x);}});}else{i();}}},"discard");}function l(E){var j=E;var I=-1,k=-1;var w=false;var x=e.getParentTable(E);if(x.getTable){x=x.getTable();}var y=x instanceof A;if(!y){var z=null;var J=e.getTableBinding(x);var L=J&&J.binding;var K=null;if(L){if(x instanceof U){K=L.getContexts();}else if(x instanceof T){K=L.getCurrentContexts();}}var O=null;var P=e.getSelectedContexts(x);var Q=null;if(P&&P.length>0){Q=P[0].getPath();}else if(j){if(x instanceof T){Q=j.getBindingContext()?j.getBindingContext().sPath:null;}}if(L&&L.getContexts&&Q){K=L.getCurrentContexts();for(var i=0;i<K.length;i++){O=K[i];if(O.getPath()===Q){I=i;break;}}}if(x&&I!==-1){k=L.getLength();var V=Math.floor(k/5);if(x instanceof T){V=x.getGrowingThreshold();}else if(x instanceof U){V=x.getThreshold();}var W=jQuery.extend({},L);var X=J.path;var Y=d.getCurrentDisplayObject().dataFromLastPage;if(Y&&Y.nextObjectPageInfo){w=true;}var Z=null;if(W&&x instanceof U){Z=W.getContexts();}else if(W&&x instanceof T){Z=W.getCurrentContexts();}z={"NavPropertyToUse":X,"listBinding":W,"tableMaxItems":k,"growingThreshold":V,"nested":w,"selectedRelativeIndex":I,"objectPageNavigationContexts":Z,"startIndex":0,"endIndex":Z.length-1};var $;var _=x.getModel("_templPriv");var a1=sap.ui.getCore().byId(o.oView.sId);var b1=_.getProperty("/currentPageTitle",$);if(!_.oData.complexTable){$=a1.byId("objectTypeName").getText();}else{$=a1.byId("page-title").getText();}d.addDataForNextPage({"nextObjectPageInfo":z,"previousPageTitle":b1,"currentPageTitle":$});}}}function m(E,j){var k=o.getView().getModel().getMetaModel();var w=j;var x=k.getODataEntitySet(E,false);var y=k.getODataEntityType(x.entityType,false);var z=y.key.propertyRef;var i;var I=s.oDraftController.getDraftContext();if(I.isDraftEnabled(E)){z=z.concat(I.getSemanticKey(E));z.push({name:"IsActiveEntity"},{name:"HasDraftEntity"},{name:"HasActiveEntity"});}if(w.parameters.select&&w.parameters.select.length>0){var J=w.parameters.select.split(",");for(i=0;i<z.length;i++){if(jQuery.inArray(z[i].name,J)===-1){w.parameters.select+=","+z[i].name;}}}return w;}var n,p,q;function r(E){var P=E.getSource().getBindingPath("value");var V=o.getView();var i=s.oDraftController.getDraftContext().hasDraft(V.getBindingContext());if(i){if(!n){var j=V.getModel("_templPriv");n=j.setProperty.bind(j,"/generic/draftIndicatorState");p=n.bind(null,sap.m.DraftIndicatorState.Saved);q=n.bind(null,sap.m.DraftIndicatorState.Clear);}n(sap.m.DraftIndicatorState.Saving);}var k=s.oCRUDManager.modifyEntity(P,E.getSource());if(i){k.then(p,q);}return k;}function t(j){return e.getDialogFragment("sap.suite.ui.generic.template.ListReport.view.fragments.DeleteConfirmation",{onCancel:function(E){var i=E.getSource().getParent();i.close();},onDelete:function(E){var k=o.getView().getModel();var w=k.getMetaModel();var x=w.getODataEntitySet(o.getOwnerComponent().getEntitySet());var y=w.getODataEntityType(x.entityType);var z=y["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String;var I=y["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeNamePlural.String;var J=z.toLowerCase();var K=I.toLowerCase();var L=E.getSource().getParent();var O=L.getModel("delete");var P=O.getProperty("/items");var Q=[];for(var i=0;i<P.length;i++){if(!P[i].draftStatus.locked){if(P.length===O.getProperty("/unsavedChangesItemsCount")||!P[i].draftStatus.unsavedChanges||O.getProperty("/checkboxSelected")){Q.push(P[i].context.getPath());}}}s.oCRUDManager.deleteEntities(Q).then(function(V){var W=Q.length-V.length;if(V.length>0){var X="";if(W>0){X+=(W>1)?e.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL_WITH_COUNT",[W,K]):e.getText("ST_GENERIC_DELETE_SUCCESS_WITH_COUNT",[W,J]);X+="\n";X+=(V.length>1)?e.getText("ST_GENERIC_DELETE_ERROR_PLURAL_WITH_COUNT",[V.length,K]):e.getText("ST_GENERIC_DELETE_ERROR_WITH_COUNT",[V.length,J]);}else{X=(V.length>1)?e.getText("ST_GENERIC_DELETE_ERROR_PLURAL",[K]):e.getText("ST_GENERIC_DELETE_ERROR",[J]);}M.error(X);}else{var Y="";Y=(W>1)?e.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL",[K]):e.getText("ST_GENERIC_DELETE_SUCCESS",[J]);a.show(Y);}j.rebindTable();},function(V){M.error(e.getText("ST_GENERIC_DELETE_ERROR_PLURAL",[Q.length,K]),{styleClass:e.getContentDensityClass()});});L.close();}},"delete");}function u(j){var k=o.getView().getModel();var w=k.getMetaModel();var E=w.getODataEntitySet(o.getOwnerComponent().getEntitySet());var x=w.getODataEntityType(E.entityType);var y=x["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String;var z=x["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeNamePlural.String;var I=y.toLowerCase();var J=z.toLowerCase();var K={items:undefined,itemsCount:j.length,text:{title:undefined,shortText:undefined,unsavedChanges:undefined,longText:undefined},lockedItemsCount:0,unsavedChangesItemsCount:0,checkboxSelected:true};var L=[];for(var i=0;i<j.length;i++){var O=k.getObject(j[i].getPath());var P={};if(!O.IsActiveEntity){P.draft=true;}else if(O.HasDraftEntity){var Q=k.getProperty("DraftAdministrativeData/InProcessByUser",j[i]);if(Q){P.locked=true;P.user=Q;K.lockedItemsCount++;}else{P.unsavedChanges=true;P.user=k.getProperty("DraftAdministrativeData/LastChangedByUser",j[i]);K.unsavedChangesItemsCount++;}}L.push({context:j[i],draftStatus:P});}K.items=L;if(K.lockedItemsCount===K.itemsCount){K.text.title=e.getText("ST_GENERIC_ERROR_TITLE");}else{K.text.title=(K.itemsCount>1)?e.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",K.itemsCount):e.getText("ST_GENERIC_DELETE_TITLE");}K.text.unsavedChanges=e.getText("ST_GENERIC_UNSAVED_CHANGES_CHECKBOX",J);if(K.itemsCount>1){if(K.lockedItemsCount===K.itemsCount){K.text.shortText=e.getText("ST_GENERIC_DELETE_LOCKED_PLURAL",J);}else if(K.unsavedChangesItemsCount===K.itemsCount){K.text.shortText=e.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES_PLURAL",J);}else if(K.lockedItemsCount>0){var V=K.itemsCount-K.lockedItemsCount;K.text.shortText=(K.lockedItemsCount>1)?e.getText("ST_GENERIC_CURRENTLY_LOCKED_PLURAL",[K.lockedItemsCount,K.itemsCount,J]):e.getText("ST_GENERIC_CURRENTLY_LOCKED",[K.itemsCount,J]);K.text.shortText+="\n";if(V===K.unsavedChangesItemsCount){K.text.shortText+=(V>1)?e.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL",[J]):e.getText("ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES",[I]);}else{K.text.shortText+=(V>1)?e.getText("ST_GENERIC_DELETE_REMAINING_PLURAL",[V,J]):e.getText("ST_GENERIC_DELETE_REMAINING",[I]);}}else{K.text.shortText=e.getText("ST_GENERIC_DELETE_SELECTED_PLURAL",J);}}else{if(K.lockedItemsCount>0){K.text.shortText=e.getText("ST_GENERIC_DELETE_LOCKED",[y,K.items[0].draftStatus.user]);}else if(K.unsavedChangesItemsCount>0){K.text.shortText=e.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES",[I,K.items[0].draftStatus.user]);}else{K.text.shortText=e.getText("ST_GENERIC_DELETE_SELECTED",I);}}return K;}function v(E){M.error(e.getText(E),{styleClass:e.getContentDensityClass()});}function N(E,i,j){var k=i.getObject();var w=o.getOwnerComponent().getAppComponent().getManifestEntry("sap.app");var O=w.crossNavigation.outbounds[g(E).CrossNavigation];var x=e.getNavigationHandler();var y;var z;var I={};if(j){y=j.getDataSuiteFormat();z=x.mixAttributesAndSelectionVariant(k,y);var J=E.getParent().getParent();I={selectionVariant:y,tableVariantID:J.getCurrentVariantId()};}else{jQuery.extend(k,o.getView().getBindingContext().getObject());z=k;}x.navigate(O.semanticObject,O.action,JSON.stringify(z),I,H);}return{onBeforeRebindTable:function(E){var w=E.getSource().getTable();if(w&&w instanceof sap.m.Table){var x=w.getColumns();for(var y=0;y<x.length;y++){if(x[y].getCustomData()[0].getValue()["actionButton"]==="true"){x[y].setPopinDisplay("WithoutHeader");}}}var z=E.getParameter("bindingParams");var P=o.getOwnerComponent().getAggregation("rootControl");var I=E.getSource();var J=P.byId(I.getTable().sId+"-tableLengthText");if(J){z.length=5;}z.parameters=z.parameters||{};var K=o.byId(I.getSmartFilterId());if(K instanceof b){var L=K.getControlByKey("EditState");if(L instanceof C){var O=L.getSelectedKey();switch(O){case"1":z.filters.push(new F("IsActiveEntity","EQ",true));z.filters.push(new F("HasDraftEntity","EQ",false));break;case"2":z.filters.push(new F("IsActiveEntity","EQ",false));break;case"3":z.filters.push(new F("IsActiveEntity","EQ",true));z.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));z.filters.push(new F("DraftAdministrativeData/InProcessByUser","NE",""));break;case"4":z.filters.push(new F("IsActiveEntity","EQ",true));z.filters.push(new F("SiblingEntity/IsActiveEntity","EQ",null));z.filters.push(new F("DraftAdministrativeData/InProcessByUser","EQ",""));break;default:var Q=new sap.ui.model.Filter({filters:[new F("IsActiveEntity","EQ",false),new F("SiblingEntity/IsActiveEntity","EQ",null)],and:false});if(z.filters[0]&&z.filters[0].aFilters){var V=z.filters[0];z.filters[0]=new sap.ui.model.Filter([V,Q],true);}else{z.filters.push(Q);}break;}}}m(I.getEntitySet(),z);var W=z.parameters.select&&z.parameters.select.split(",")||[];var X=z.parameters&&z.parameters.expand&&z.parameters.expand.split(",")||[];var Y=I.getEntitySet();if(W&&W.length>0){var Z=I.getModel().getMetaModel();var $=Z.getODataEntitySet(Y);var _=Z.getODataEntityType($.entityType);if(w instanceof T){var a1=z.sorter[0];if(a1&&a1.vGroup){var b1=Z.getODataProperty(_,a1.sPath);var c1=b1["sap:text"]||(b1["com.sap.vocabularies.Common.v1.Text"]||"").Path||"";if(c1){if(jQuery.inArray(c1,W)===-1){z.parameters.select+=","+c1;W.push(c1);}}}}}for(var i=0;i<W.length;i++){if(W[i].indexOf("/")!==-1){var d1=W[i].split("/");d1.pop();var e1=d1.join("/");if(X.indexOf(e1)===-1){X.push(e1);}}}var f1=s.oDraftController.getDraftContext();if(f1.isDraftEnabled(Y)&&f1.isDraftRoot(Y)){if(f1.hasDraftAdministrativeData(Y)){if(W&&W.length>0){if(W.indexOf("DraftAdministrativeData")===-1){z.parameters.select=z.parameters.select+",DraftAdministrativeData";}}if(X.indexOf("DraftAdministrativeData")===-1){X.push("DraftAdministrativeData");}}}if(X.length>0){z.parameters.expand=X.join(",");}var g1=I.getCustomData();var h1={};for(var k=0;k<g1.length;k++){h1[g1[k].getKey()]=g1[k].getValue();}var w=I.getTable();var i1=I.fetchVariant();if((!i1||!i1.sort)&&w instanceof T&&h1.TemplateSortOrder){var j1=h1.TemplateSortOrder.split(", ");for(var j=0;j<j1.length;j++){var k1=j1[j].split(" ");if(k1.length>1){z.sorter.push(new S(k1[0],k1[1]==="true"));}else{z.sorter.push(new S(k1[0]));}}}if(w instanceof T){var a1=z.sorter[0];if(a1&&a1.vGroup){a1.fnGroup=G(a1.sPath);}}},onListNavigate:function(E){l(E);e.navigateFromListItem(E.getBindingContext(),E.getParent());},onListNavigateIntent:function(E,i){var j=E.getBindingContext();N(E,j,i);},onShowDetails:function(E){var i=E.getParent().getParent().getTable();var j=e.getSelectedContexts(i);switch(j.length){case 0:v("ST_GENERIC_NO_ITEM_SELECTED");return;case 1:l(E);e.navigateFromListItem(j[0],i);return;default:v("ST_GENERIC_MULTIPLE_ITEMS_SELECTED");return;}},onShowDetailsIntent:function(E,i){var j=E.getParent().getParent().getTable();var k=e.getSelectedContexts(j);switch(k.length){case 0:v("ST_GENERIC_NO_ITEM_SELECTED");return;case 1:N(E,k[0],i);return;default:v("ST_GENERIC_MULTIPLE_ITEMS_SELECTED");return;}},onChange:r,onCallActionFromList:function(E,i){var j=E.getSource();var O,I,k;var w=e.getParentTable(E.getSource());var x=w.getTable();var y=w.getTableBindingPath();var z=e.getSelectedContexts(x);var J=g(j);var K="";if(J.Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){if(z.length===0){K="ST_GENERIC_NO_ITEM_SELECTED";}else{s.oCRUDManager.callAction({functionImportPath:J.Action,contexts:z,sourceControl:x,label:J.Label,operationGrouping:J.OperationGrouping,navigationProperty:""}).then(function(V){if(V&&V.length&&V.length===1){k=V[0];if(k.response&&k.response.context&&(!k.actionContext||k.actionContext&&k.response.context.getPath()!==k.actionContext.getPath())){s.oNavigationController.setMeToDirty(o.getOwnerComponent(),y);}}});return;}}else{if(z.length===0){K="ST_GENERIC_NO_ITEM_SELECTED";}else if(z.length===1){var L=e.getNavigationHandler();if(L){var P={};if(z[0]){P=z[0].getObject();}delete P.__metadata;if(i){var Q=i.getDataSuiteFormat()||"{}";P=f(P);O=L.mixAttributesAndSelectionVariant(P,Q).toJSONString();I={selectionVariant:i.getDataSuiteFormat(),tableVariantID:w.getCurrentVariantId()};}else{jQuery.extend(P,o.getView().getBindingContext().getObject());O=f(P);O=JSON.stringify(O);I={};}L.navigate(J.SemanticObject,J.Action,O,I,H);}return;}else{K="ST_GENERIC_MULTIPLE_ITEMS_SELECTED";}}if(K){M.error(e.getText(K),{styleClass:e.getContentDensityClass()});}},onDiscardDraft:function(E){var i=E.getSource();var j=i.getCustomData();var k=h();var w=k.getModel("discard");var P=j&&j[0]?j[0].getValue():sap.m.PlacementType.Top;w.setProperty("/placement",P);var x=o.getView().getBindingContext();var y=x.getObject();var I=y.hasOwnProperty("HasActiveEntity")&&!x.getProperty("IsActiveEntity")&&!x.getProperty("HasActiveEntity");w.setProperty("/isCreateDraft",I);k.openBy(i);},addEntry:function(E,i){var j=e.getParentTable(E.getSource());var k=j.getTableBindingPath();var w=o.getOwnerComponent();if(!e.isDraftEnabled()&&o.getView().getModel().hasPendingChanges()){e.dataLossConfirmation(function(){return s.oCRUDManager.addEntry(j).then(function(x){if(!i){s.oNavigationController.navigateToContext(x.newContext,x.tableBindingPath,false);}s.oNavigationController.setMeToDirty(w,k);});});return null;}return s.oCRUDManager.addEntry(j).then(function(x){if(!i){s.oNavigationController.navigateToContext(x.newContext,x.tableBindingPath,false);}s.oNavigationController.setMeToDirty(w,k);});},deleteEntries:function(E){var i=e.getParentTable(E.getSource());var j=e.getSelectedContexts(i);if(j&&j.length>0){var J=u(j);var k=t(i);var w=k.getModel("delete");w.setData(J);k.open();}else{M.error(e.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:e.getContentDensityClass()});}},onContactDetails:function(E){var P;if(E.getSource().data("Location")==="Header"){P=E.getSource().getParent().getAggregation("items")[0];}else{P=E.getSource().getParent().getParent().getParent().getParent().getParent().getAggregation("items")[1];}P.bindElement(E.getSource().getBindingContext().getPath());P.openBy(E.getSource());}};}return B.extend("sap.suite.ui.generic.template.lib.CommonEventHandlers",{constructor:function(o,d,s,e){jQuery.extend(this,c(o,d,s,e));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.ComponentUtils')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.ComponentUtils');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/lib/ComponentUtils",["sap/ui/base/Object"],function(B){"use strict";function g(c,C){var h;var e=[];function a(){var R=c.getModel("i18n").getResourceBundle();return{dataLoadFailedTitle:R.getText("ST_GENERIC_ERROR_LOAD_DATA_TITLE"),dataLoadFailedText:R.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function A(t,E,i){if(typeof i!=="function"){throw new Error("Event handler must be a function");}e.push({template:t,event:E,handler:i});}function d(t,E,l){for(var i=e.length;i--;){if(e[i].handler===l&&e[i].event===E&&e[i].template===t){e.splice(i,1);}}}function f(t,E,o){for(var i=0;i<e.length;i++){if(e[i].event===E&&e[i].template===t){e[i].handler(o);}}}function b(o){return o.getMetadata().getName();}function F(o){h.then(function(i){if(i&&!o.outdated){o.promise.then(function(){var v=c.getAggregation("rootControl");f(b(v.getController()),"PageDataLoaded",{context:i});});}});}function D(H){if(C.isActive){C.oApplication.setBusyReason(H,true,false);}}function j(H,E){var o=E.getParameter("data");if(!o){var i=a();var n=c.getAppComponent().getNavigationController();n.navigateToMessagePage({title:i.dataLoadFailedTitle,text:i.dataLoadFailedText});}C.oApplication.setBusyReason(H,false);}function k(R,E){R(E.getSource().getBoundContext());}function r(s){var p={};var o=c.getComponentData();if(o&&o.preprocessorsData&&o.preprocessorsData.rootContextExpand&&o.preprocessorsData.rootContextExpand.length){p.expand=o.preprocessorsData.rootContextExpand.join(",");}var H="HeaderRequest::"+c.getId()+"::"+s;h=new Promise(function(R){c.getComponentContainer().bindElement({path:s,events:{dataRequested:D.bind(null,H),dataReceived:j.bind(null,H),change:k.bind(null,R)},parameters:p,batchGroupId:"Changes",changeSetId:"Changes"});});}return{setEditableNDC:function(i){C.oApplication.setEditableNDC(i);},getEditableNDC:function(){return C.oApplication.getEditableNDC();},getCreateMode:function(s){var E;var m=c.getModel();if(s){if(m){E=m.getProperty(s);}}else{var o=c.getBindingContext();if(o){E=o.getObject();}}return!!(E&&E.__metadata&&E.__metadata.created);},attach:function(o,E,i){A(b(o),E,i);},detach:function(o,E,i){d(b(o),E,i);},fire:function(o,E,i){f(b(o),E,i);},addDataForNextPage:function(o){C.oApplication.addDataForNextPage(o);},getCurrentDisplayObject:function(){return C.oApplication.getCurrentDisplayObject();},rebindHeaderData:r,bindComponent:function(s){if(s){var o=c.getComponentContainer();if(o){var S=o.getSettings();if(S.routeConfig&&S.routeConfig.component&&S.routeConfig.component.list){var n=o.getSettings().routeConfig.navigationProperty;var i=s.substring(0,s.lastIndexOf("/"+n));if(i){s=i;}}if(C.utils.getCreateMode(s)){o.unbindElement();o.setBindingContext(o.getModel().getContext(s));}else{var l=C.oApplication.getCurrentDisplayObject();var E=o.getElementBinding();if(E&&E.getPath()===s){F(l);return false;}r(s);var u=c.getModel("ui");u.setProperty("/enabled",false);u.setProperty("/editable",false);F(l);}}}}};}return B.extend("sap.suite.ui.generic.template.lib.ComponentUtils.js",{constructor:function(c,C){jQuery.extend(this,g(c,C));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.FlexEnabler')){jQuery.sap.declare("sap.suite.ui.generic.template.lib.FlexEnabler");sap.ui.core.Control.extend("sap.suite.ui.generic.template.lib.FlexEnabler",{metadata:{properties:{flexEnabled:{type:"boolean",group:"Misc",defaultValue:true}}},renderer:function(r,c){"use strict";}});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.MessageButtonHelper')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.MessageButtonHelper');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.m.MessagePopover');jQuery.sap.require('sap.m.MessagePopoverItem');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.FilterOperator');sap.ui.define("sap/suite/ui/generic/template/lib/MessageButtonHelper",["sap/ui/base/Object","sap/m/MessagePopover","sap/m/MessagePopoverItem","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(B,M,a,F,b){"use strict";function g(c,C){var m=c.getDialogFragment("sap.suite.ui.generic.template.fragments.MessagePopover");var i=false;var f=[];var s;function d(j){f.forEach(function(p){var E=p();if(jQuery.isArray(E)){j=j.concat(E);}else{j.push(E);}});return j;}function e(j){var k=[];var E="/"+C.getOwnerComponent().getEntitySet();var l=[new F({path:"target",operator:b.StartsWith,value1:j}),new F({path:"target",operator:b.EQ,value1:E}),new F({path:"validation",operator:b.EQ,value1:true})];l=d(l);var o=new F(l,false);k.push(o);return k;}function h(j){if(j===undefined){if(!i){return;}j=s;}else{s=j;}var k=e(j);var I=m.getBinding("items");I.filter(k);if(!i){var t=C.getOwnerComponent().getModel("_templPriv");t.setProperty("/generic/messageCount",0);var l=c.getText("MESSAGE_BUTTON_TOOLTIP_P",0);t.setProperty("/objectPage/messageButtonTooltip",l);I.attachChange(function(){var n=I.getLength();t.setProperty("/generic/messageCount",n);var l=c.getText("MESSAGE_BUTTON_TOOLTIP_P",n);if(n===1){l=c.getText("MESSAGE_BUTTON_TOOLTIP_S",n);}t.setProperty("/objectPage/messageButtonTooltip",l);});i=true;}}return{adaptToContext:h,showMessagePopover:function(E){var o=E.getSource();m.toggle(o);},registerMessageFilterProvider:function(p){f.push(p);h();}};}return B.extend("sap.suite.ui.generic.template.lib.MessageButtonHandler.js",{constructor:function(c,C){jQuery.extend(this,g(c,C));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.MessageUtils')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.MessageUtils');jQuery.sap.require('sap.ui.core.ValueState');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.FilterOperator');jQuery.sap.require('sap.m.MessageToast');jQuery.sap.require('sap.m.MessageBox');jQuery.sap.require('sap.ui.generic.app.util.ModelUtil');jQuery.sap.require('sap.ui.generic.app.util.MessageUtil');sap.ui.define("sap/suite/ui/generic/template/lib/MessageUtils",["sap/ui/core/ValueState","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast","sap/m/MessageBox","sap/ui/generic/app/util/ModelUtil","sap/ui/generic/app/util/MessageUtil"],function(V,F,a,M,b,c,G){"use strict";function g(C){var v=C.getView();var u=v.getModel("ui");return!u||!u.getProperty("/editable");}function d(o,p,D,C){var r={};p=p||{};var e;var f=D&&D.getDraftContext();if(f){var i=p.context||C.getView().getBindingContext();e=i?c.getEntitySetFromContext(i):C.getOwnerComponent().getEntitySet();if(e){r.entitySet=e;r.isDraft=f.isDraftEnabled(e);}}r.lastOperation=o;r.showMessages=g(C);return r;}function h(o,C,s,S,e,p){var P={errorContext:(p&&p.errorContext)||d(o,p,S.oDraftController,C),response:e};G.handleError(P,C,s,S.oNavigationController);}return{operations:G.operations,handleTransientMessages:G.handleTransientMessages,handleError:h};});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.NavigationController')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.suite.ui.generic.template.lib.NavigationController');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.core.ComponentContainer');jQuery.sap.require('sap.ui.core.routing.HashChanger');jQuery.sap.require('sap.ui.core.routing.History');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.FilterOperator');jQuery.sap.require('sap.m.MessageBox');jQuery.sap.require('sap.m.MessagePage');jQuery.sap.require('sap.m.Link');sap.ui.define("sap/suite/ui/generic/template/lib/NavigationController",["sap/ui/base/Object","sap/ui/core/ComponentContainer","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox","sap/m/MessagePage","sap/m/Link"],function(B,C,H,a,F,b,M,c,L){"use strict";function g(o,t,n){function T(h,m,D){var i;if(h&&m){if(isNaN(D)){D=0;}i=h.indexOf(m);if(i>-1){h=h.substring(0,i-D);}}return h;}function f(e,s,r){var h=n.oRouter.oHashChanger.getHash(),p;if(e){p=n._getNavigationPath(e,s);n._oTargetContextPath=e.getPath();}else{p=s;}if(p){if(s){if(s.indexOf("/")<0){s="/"+s;}h=T(h,s);h=T(h,"?");if(h){p=h+"/"+p;}}n._navigate(p,r);}}function d(p){var e,s,r,h,E,i,j,I=null,m;if(p){e=p.entitySet;s=p.title;h=p.text;I=p.icon;r=p.replaceURL;}if(e){m=n.oComponent.getModel().getMetaModel();if(m){E=m.getODataEntitySet(e);i=m.getODataEntityType(E.entityType);j=i["com.sap.vocabularies.UI.v1.HeaderInfo"];}if(j&&j.TypeImageUrl&&j.TypeImageUrl.String){I=j.TypeImageUrl.String;}}if(n.oMessagePage){n.oMessagePage.destroy();}n.oMessagePage=new c({title:s,text:h,icon:I,customDescription:new L({text:t.getText("ST_GENERIC_RETURN_TO_MAIN"),press:n.navigateBack.bind(n,r)})});t.oNavContainer.addPage(this.oMessagePage);t.oNavContainer.to(this.oMessagePage);}return{navigateToContext:f,navigateToMessagePage:d};}var N=B.extend("sap.suite.ui.generic.template.lib.NavigationController",{metadata:{library:"sap.suite.ui.generic.template"},constructor:function(o,t){if(!o||!o.getRouter()){throw"No component with router passed";}B.apply(this,arguments);this.oRouter=o.getRouter();this.oViews={};this.oComponent=o;this._oTemplateContract=t;this._sNavigationTargetId=this._oTemplateContract.oNavContainer.getId();this.oRouter.attachRouteMatched(this._handleRouteMatched,this);this.oRouter.attachBypassed(this._handleBypassed,this);this.oRouter._oViews._getViewWithGlobalId=function(v){if(!this.oViews[v.viewName]){var r=this.oRouter.getRoute(v.viewName);if(r&&r._oConfig){this.oViews[v.viewName]=this._createComponentInstance(r._oConfig);}else{this.oViews[v.viewName]=sap.ui.view({viewName:v.viewName,type:v.type,height:"100%"});}}return this.oViews[v.viewName];}.bind(this);this._oHashChanger=H.getInstance();this._generateRoutingMetadata();this._initialise();jQuery.extend(this,g(o,t,this));}});N._sChanges="Changes";N.prototype._initialise=function(){var d;d=this.oComponent.getComponentData();if(d){this._oStartupParameters=d.startupParameters;}if(this._sEntitySet&&this._oStartupParameters&&!this._oHashChanger.getHash()){this._processStartupParameters();}else{this._initialiseRouting();}};N.prototype._processStartupParameters=function(){var m,n=this,d;m=this.oComponent.getModel();m.getMetaModel().loaded().then(function(){var e,E,f,h,s,j;f=function(k,p){var i,l,S=false,K,q;if(p&&k){l=k.length;for(i=0;i<l;i++){S=true;K=k[i];q=K.name||K.PropertyPath;if(!p[q]||p[q].length>1){S=false;break;}}}return S;};if(this._oStartupParameters&&this._oStartupParameters.createWithContext&&this._oStartupParameters.createWithContext=="true"){e=m.getMetaModel().getODataEntitySet(this._sEntitySet);if(e['com.sap.vocabularies.Common.v1.DraftRoot']&&e['com.sap.vocabularies.Common.v1.DraftRoot'].NewAction){var o=m.getMetaModel().getODataFunctionImport(e['com.sap.vocabularies.Common.v1.DraftRoot'].NewAction.String.split("/")[1]);var u={};d=true;if(o&&o.parameter){for(var i=0;i<o.parameter.length;i++){if(o.parameter[i].mode=="In"&&this._oStartupParameters[o.parameter[i].name]){u[o.parameter[i].name]=this._oStartupParameters[o.parameter[i].name];}}sap.ui.core.BusyIndicator.show();m.callFunction("/"+o.name,{success:function(D,r){n._initialiseRouting();sap.ui.core.BusyIndicator.hide();var k=new sap.ui.generic.app.util.ModelUtil(m);var l=k.getContextFromResponse(D);if(l){n.navigateToContext(l,null,true);}else{n.navigateToMessagePage({title:n._oTemplateContract.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),replaceURL:true});}},error:function(k){sap.ui.core.BusyIndicator.hide();n.navigateToMessagePage({title:n._oTemplateContract.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),replaceURL:true});},method:"POST",urlParameters:u});}else{this.navigateToMessagePage({title:n._oTemplateContract.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),replaceURL:true});}}}if(!d){if(this._sEntitySet&&this.oRouter.getRoute(this._sEntitySet)){e=m.getMetaModel().getODataEntitySet(this._sEntitySet);if(e){E=m.getMetaModel().getODataEntityType(e.entityType);}if(E){h=f(E.key.propertyRef,this._oStartupParameters);}if(h){j=m.createKey(this._sEntitySet,this._oStartupParameters);if(j){this._oHashChanger.replaceHash(j);}}else{s=E["com.sap.vocabularies.Common.v1.SemanticKey"];h=f(s,this._oStartupParameters);if(h){this._readObject(s,this._oStartupParameters,m);return;}}}this._initialiseRouting();}}.bind(this));};N.prototype._initialiseRouting=function(){var h;this._oHistory=new a(this._oHashChanger);if(!this._oHashChanger.getHash()){h="";if(this._oStartupParameters&&this._oStartupParameters.route&&this._oStartupParameters.route.length===1){h=this._oStartupParameters.route[0];this._oHashChanger.replaceHash(h);}}this.oRouter.initialize();};N.prototype._preprocessForComplexTable=function(p){for(var P in p){var o=p[P];if(o&&o.component&&o.component.settings&&o.component.settings.sections){for(var s in o.component.settings.sections){var S=o.component.settings.sections[s];if(S.tableMode==="ComplexTable"){o=this._generateRouteForComplexTable(o,s);}}}if(o&&o.pages){o.pages=this._preprocessForComplexTable(o.pages);}p[P]=o;}return p;};N.prototype._generateRouteForComplexTable=function(p,s){var S=p.component.settings.sections[s];var n=S.navigationProperty;var e=S.entitySet;var G=p.component.settings.gridTable;var d=true;var o;if(p.pages){o=this._getApplicableSubPage(p.pages,n,e);}var f={"navigationProperty":n,"entitySet":e,"component":{"name":"sap.suite.ui.generic.template.ListReport","list":true,"settings":{"gridTable":G,"complexListId":s,"smartVariantManagement":d}},"pages":[o]};if(!p.pages){p.pages=[];}p.pages.push(f);return p;};N.prototype._getApplicableSubPage=function(p,n,e){for(var P in p){var o=p[P];if(o.navigationProperty===n&&o.entitySet===e){return o;}}};N.prototype._generateRoutingMetadata=function(){var o=this.oComponent.getConfig(),t,T;if(!o.pages||!o.pages.length||o.pages.length===0){throw new Error("Route Configuration missing");}else if(o.pages.length>1){throw new Error("Currently only one Top route supported");}else{o.pages=this._preprocessForComplexTable(o.pages);t=o.pages[0];this._sEntitySet=t.entitySet;T=this._createRoute(t,"root",0);this.oRouter.addRoute(T);this._createQueryRoute(T);this._createChildRoutes(t,0,null);}};N.prototype._createChildRoutes=function(r,l,p){var i,d;if(r.pages){d=r.pages.length;for(i=0;i<d;i++){this._createRoutes(r.pages[i],(l+1),p);}}};N.prototype._createRoutes=function(r,l,p){if(r.component){var n=this._createRoute(r,r.component.list?"aggregation":"detail",l,p);this.oRouter.addRoute(n);this._createQueryRoute(n);this._createChildRoutes(r,l,n);}};N.prototype._createQueryRoute=function(r){var q=jQuery.extend({},r);q.name=r.name+"query";q.pattern=r.pattern+"{?query}";this.oRouter.addRoute(q);};N.prototype._createRoute=function(r,o,l,p){var P,n;P=r.navigationProperty||r.entitySet;n=jQuery.extend({},r);n.path="/"+r.entitySet;n.operation=o;n.viewLevel=l;n.template=r.component?(r.component.name||r.component):r.template;switch(o){case"root":n.name='root';n.pattern='';break;case"aggregation":n.name=P+"~aggregation";n.pattern=P;break;default:n.name=P;n.pattern=P+"({keys"+l+"})";break;}if(p){n.name=p.name+"/"+n.name;n.pattern=p.pattern+"/"+n.pattern;n.parentEntitySet=p.entitySet;}n.view=n.name;n.controlId=this._sNavigationTargetId;n.controlAggregation="pages";return n;};N.prototype._createComponentInstance=function(r){var t,E,o,s;t=r.template;E=r.entitySet;s={appComponent:this.oComponent,isLeaf:!r.pages||!r.pages.length,subPages:r.pages,entitySet:E,navigationProperty:r.navigationProperty,routeConfig:r,componentData:{preprocessorsData:{}}};if(r.component.settings){jQuery.extend(s,r.component.settings);}try{o=new C({name:t,propagateModel:true,width:'100%',height:'100%',handleValidation:true,settings:s});return o;}catch(e){throw new Error("Component "+t+" could not be loaded");}};N.prototype._handleRouteMatched=function(e){this._oTemplateContract.oApplication.onRouteMatched(e);var v,r,k,K,p;v=e.getParameter("view");r=e.getParameter("config");if(this._oTargetContextPath){p=this._oTargetContextPath;delete this._oTargetContextPath;}else if(r.operation!=="root"){if(r.operation==="aggregation"){p="/"+r.pattern;}else{p=this._getContextPath(r);}K=e.getParameter("arguments");delete K["?query"];if(K){for(k in K){p=p.replace("{"+k+"}",K[k]);}}}this._activateView(v,p);};N.prototype._activateView=function(v,p,d){var o,O,e,V;if(v){if(v.getComponentInstance){e=v.getComponentInstance();if(!e){V={onBeforeRendering:function(){v.removeEventDelegate(V,this);if(v.getComponentInstance&&v.getComponentInstance()){this._activateView(v,p,true);}}};v.addEventDelegate(V,this);return;}}o=this._oTemplateContract.oNavContainer.getPreviousPage();if(!d&&(o||v!==this._oTemplateContract.oNavContainer.getCurrentPage())){o=this._oTemplateContract.oNavContainer.getCurrentPage();}if(o&&o.getComponentInstance){O=o.getComponentInstance();if(O&&O.onDeactivate){O.onDeactivate();}}if(e){e.onActivate(p);}}};N.prototype._navigate=function(h,r){if(!h){h="";}if(r){this.oRouter.oHashChanger.replaceHash(h);}else{this.oRouter.oHashChanger.setHash(h);}};N.prototype.navigateToRoot=function(r){this._navigate("",r);};N.prototype.navigateBack=function(r){this._navigate(this._oHistory?this._oHistory.getPreviousHash():"",r);};N.prototype._getNavigationPath=function(t,n){var p,P,e;p=t.getPath().substring(1);P=p.split('(');if(P[0]){e=P[0];}if(n){p=p.replace(e,n);if(p.indexOf("/")===0){p=p.substring(1);}}return p;};N.prototype._getContextPath=function(r){var p,P,i;if(r){p=r.pattern;P=r.navigationProperty||r.entitySet;if(p&&P){i=p.indexOf("{?query}");if(i>0){p=p.substring(0,i);}i=-1;P+="({keys";i=p.indexOf(P);if(i>0){p=p.substring(i);}if(r.navigationProperty){p=p.replace(r.navigationProperty,r.entitySet);}p="/"+p;}}return p;};N.prototype._handleBypassed=function(){this._oTemplateContract.oApplication.onBypassed();this.navigateToMessagePage({title:this._oTemplateContract.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),replaceURL:true});};N.prototype.getViews=function(){return this.oViews;};N.prototype.getNavContainer=function(){return this._oTemplateContract.oNavContainer;};N.prototype._readObject=function(k,p,m){var i,l,P,v,f=[];if(k&&p&&m){l=k.length;for(i=0;i<l;i++){P=k[i].PropertyPath;v=p[P][0];f.push(new F(P,b.EQ,v));}m.read("/"+this._sEntitySet,{filters:f,success:function(r){var R,i,d,K;if(r&&r.results){d=r.results.length;for(i=0;i<d;i++){R=r.results[i];if(R&&R.IsActiveEntity){break;}R=null;}if(!R){R=r.results[0];}}if(R){K=m.getKey(R);}if(K){this._oHashChanger.replaceHash(K);}this._initialiseRouting();}.bind(this),error:function(e){this._initialiseRouting();}.bind(this)});}};N.prototype.setRootPageToDirty=function(){var v=this.getViews();if(v&&v.root){var i=v.root.getComponentInstance();if(i&&typeof i.setIsRefreshRequired==="function"){i.setIsRefreshRequired(true);}}};N.prototype.setParentToDirty=function(o,n,d){var s,p,P,r,m=this._oTemplateContract.componentRegistry;var e=o.getId();s=o.getComponentContainer().getSettings();var R=s&&s.routeConfig;if(R){if(R.viewLevel===0){return false;}else{for(var f in m){if(f!==e){p=m[f].oComponent.getComponentContainer().getSettings();if(p&&p.routeConfig&&p.routeConfig.viewLevel===(R.viewLevel-1)&&(R.viewLevel===1||p.routeConfig.entitySet===R.parentEntitySet)){P=m[f].oComponent;if(n){r=m[f].oGenericData.mRefreshInfos;r[n]=true;}else{if(typeof P.setIsRefreshRequired==="function"){P.setIsRefreshRequired(true);}}break;}}}if(P&&!d){this._setComplexTableChildrenToDirty(P,n);}}}};N.prototype.setMeToDirty=function(o,n){if(n){var r=this._oTemplateContract.componentRegistry[o.getId()].oGenericData.mRefreshInfos;r[n]=true;}else{if(typeof o.setIsRefreshRequired==="function"){o.setIsRefreshRequired(true);}}var s=o.getComponentContainer().getSettings();var d=sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(s.routeConfig);if(d){this.setParentToDirty(o,n,true);}else{this._setComplexTableChildrenToDirty(o,n);}};N.prototype._setComplexTableChildrenToDirty=function(o,n){var p,d,i,m=this._oTemplateContract.componentRegistry;p=o.getComponentContainer().getSettings();for(var s in m){d=m[s].oComponent.getComponentContainer().getSettings();i=sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(d.routeConfig);if(i){if(p.routeConfig&&p.routeConfig.viewLevel===(d.routeConfig.viewLevel-1)&&(p.routeConfig.entitySet===d.routeConfig.parentEntitySet)){var e=m[s].oComponent;if(typeof e.setIsRefreshRequired==="function"){e.setIsRefreshRequired(true);}}}}};N.prototype._getChildren=function(v,o){var d=[];var o=o||this.getViews();var s=o[v].getSettings();for(var O in o){var e=o[O].getSettings();if(s.routeConfig.viewLevel+1===e.routeConfig.viewLevel&&s.routeConfig.entitySet===e.routeConfig.parentEntitySet){d.push(O);}}return d;};N.prototype._getSuccessors=function(v,V){var s=[];var d=this._getChildren(v,V);for(var i=0;i<d.length;i++){s=s.concat(this._getSuccessors(d[i],V));}return s.concat(d);};N.prototype.unbindChildren=function(o){var v=this.getViews();var m=o.getId();for(var V in v){var I=v[V].getComponentInstance();if(I&&I.getId()===m){var s=this._getSuccessors(V,v);for(var i=0;i<s.length;i++){v[s[i]].unbindElement();}}}};N.prototype.destroy=function(){B.prototype.destroy.apply(this,arguments);if(this._oHistory&&this._oHistory.destroy){this._oHistory.destroy();}this._oHistory=null;this.oRouter=null;this.oViews=null;this.oComponent=null;};return N;});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.TemplateComponent')){jQuery.sap.require('sap.ui.core.CustomizingConfiguration');(function(){"use strict";var o=sap.ui.core.CustomizingConfiguration.getViewExtension;sap.ui.core.CustomizingConfiguration.getViewExtension=function(v,e,a){var c=a&&typeof a==="string"?a:(a&&sap.ui.core.Component.getOwnerIdFor(a));var C=c&&sap.ui.component(c);if(C instanceof sap.suite.ui.generic.template.lib.TemplateComponent){a=C.getAppComponent().getId();}var r=o(v,e,a);return r;};var O=sap.ui.core.CustomizingConfiguration.getControllerExtension;sap.ui.core.CustomizingConfiguration.getControllerExtension=function(c,C){var a=null;if(C){a=sap.ui.component(C);if(a instanceof sap.suite.ui.generic.template.lib.TemplateComponent){a=a.getAppComponent();if(a){C=a.getId();}}}var r=O(c,C);return r;};jQuery.sap.declare('sap.suite.ui.generic.template.lib.TemplateComponent');jQuery.sap.require('sap.ui.core.mvc.ViewType');jQuery.sap.require('sap.ui.core.UIComponent');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.model.resource.ResourceModel');jQuery.sap.require('sap.ui.Device');sap.ui.define("sap/suite/ui/generic/template/lib/TemplateComponent",["sap/ui/core/mvc/ViewType","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ui/model/resource/ResourceModel","sap/ui/Device","sap/suite/ui/generic/template/js/AnnotationHelper"],function(V,U,J,R,D){function E(C){var i=new R({bundleName:"sap/suite/ui/generic/template/lib/i18n/i18n"});var t=C.getModel("i18n");if(t){i.enhance(t.getResourceBundle());}var m=C.getAppComponent().getModel("i18n|"+C.getMetadata().getComponentName()+"|"+C.getEntitySet());if(m){i.enhance(m.getResourceBundle());}C.setModel(i,"i18n");}function d(C){if(C.getAppComponent().getMetadata().getComponentName()===""||C.getTemplateName()===""||C.getEntitySet()===""){}return C.getAppComponent().getMetadata().getComponentName()+"::"+C.getTemplateName()+"::"+C.getEntitySet();}function c(e,C){var i=C.getAppComponent().getTransactionController().getDraftController().getDraftContext().isDraftEnabled(C.getEntitySet());var s=null;var A=C.getComponentContainer().getSettings();s=jQuery.extend({},A);delete s.appComponent;delete s.entitySet;delete s.navigationProperty;return new J({entitySet:C.getEntitySet(),entityType:e,"sap-ui-debug":window["sap-ui-debug"],isDraftEnabled:i,"settings":s,"manifest":C.getAppComponent().getMetadata().getManifest()});}function a(C){var v=null;var m=C.getModel().getMetaModel();var b=m.getODataEntitySet(C.getEntitySet());if(!b||!b.entityType){return null;}E(C);try{var s=d(C);v=sap.ui.getCore().byId(s);if(v){jQuery.sap.log.warning("View with ID: "+s+" already exists - old view is getting destroyed now!");try{v.destroy();}catch(f){jQuery.sap.log.error("Error destroying view: "+f);}v=null;}var g=new J(D);g.setDefaultBindingMode("OneWay");v=sap.ui.view({preprocessors:{xml:{bindingContexts:{meta:m.createBindingContext(m.getODataEntityType(b.entityType,true)),entitySet:m.createBindingContext(m.getODataEntitySet(C.getEntitySet(),true))},models:{device:g,meta:m,entitySet:m,parameter:c(b.entityType,C)},preprocessorsData:C.getComponentData().preprocessorsData}},id:s,type:V.XML,viewName:C.getTemplateName(),height:"100%"});}catch(e){throw e;}return v;}return U.extend("sap.suite.ui.generic.template.lib.TemplateComponent",{metadata:{properties:{templateName:{type:"string",defaultValue:null},entitySet:{type:"string",defaultValue:null},navigationProperty:{type:"string",defaultValue:null},appComponent:{type:"object",defaultValue:null},isRefreshRequired:{type:"boolean",defaultValue:false},isLeaf:{type:"boolean"}},library:"sap.suite.ui.generic.template"},init:function(){(U.prototype.init||jQuery.noop).apply(this,arguments);var u=new J({editable:false,enabled:false});this.setModel(u,"ui");var p=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing");var t=new J({generic:{crossAppNavSupport:!!p&&p.isIntentUrl(document.URL),draftIndicatorState:sap.m.DraftIndicatorState.Clear}});t.setDefaultBindingMode("OneWay");this.setModel(t,"_templPriv");},getComponentContainer:function(){return this.oContainer;},setContainer:function(){var m;U.prototype.setContainer.apply(this,arguments);if(this.oContainer){m=this.oContainer.getModel();if(m){m.getMetaModel().loaded().then(function(){this.runAsOwner(function(){var v=a(this);this.setAggregation("rootControl",v);this.oContainer.invalidate();}.bind(this));}.bind(this));}}},getRouter:function(){if(this.getAppComponent()){return this.getAppComponent().getRouter();}return U.prototype.getRouter.apply(this,arguments);}});});})();};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.TemplateViewController')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.TemplateViewController');jQuery.sap.require('sap.ui.core.mvc.Controller');sap.ui.define("sap/suite/ui/generic/template/lib/TemplateViewController",["sap/ui/core/mvc/Controller"],function(m){"use strict";return m.extend("sap.suite.ui.generic.template.lib.TemplateViewController",{metadata:{library:"sap.suite.ui.generic.template"}});},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.ViewDependencyHelper')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.ViewDependencyHelper');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/lib/ViewDependencyHelper",["sap/ui/base/Object"],function(B){"use strict";function g(t){function s(){for(var i in t.componentRegistry){var c=t.componentRegistry[i];c.oComponent.setIsRefreshRequired(true);}}return{setAllPagesDirty:s};}return B.extend("sap.suite.ui.generic.template.lib.ViewDependencyHelper",{constructor:function(t){jQuery.extend(this,g(t));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.library')){jQuery.sap.declare('sap.suite.ui.generic.template.library');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.library');sap.ui.define("sap/suite/ui/generic/template/library",['jquery.sap.global','sap/ui/core/library'],function(q,l){"use strict";sap.ui.getCore().initLibrary({name:"sap.suite.ui.generic.template",dependencies:["sap.ui.core"],types:[],interfaces:[],controls:[],elements:[],version:"1.38.16"});return sap.suite.ui.generic.template;},false);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ListReport.extensionAPI.ExtensionAPI')){jQuery.sap.declare('sap.suite.ui.generic.template.ListReport.extensionAPI.ExtensionAPI');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/ListReport/extensionAPI/ExtensionAPI",["sap/ui/base/Object","sap/suite/ui/generic/template/ListReport/extensionAPI/NonDraftTransactionController"],function(B,N){"use strict";function g(t,c,s){var T;return{getSelectedContexts:function(){return t.oCommonUtils.getSelectedContexts(s.oSmartTable);},getTransactionController:function(){if(t.oCommonUtils.isDraftEnabled()){throw new Error("Transaction support on ListReport for draft case not implemented yet");}T=T||new N(t,c,s);return T;},refreshTable:function(){s.oSmartTable.rebindTable();},attachToView:function(C){t.oCommonUtils.attachControlToView(C);},invokeActions:function(f,C){return t.oServices.oApplicationController.invokeActions(f,C);}};}return B.extend("sap.suite.ui.generic.template.ListReport.extensionAPI.ExtensionAPI",{constructor:function(t,c,s){jQuery.extend(this,g(t,c,s));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ObjectPage.extensionAPI.ExtensionAPI')){jQuery.sap.declare('sap.suite.ui.generic.template.ObjectPage.extensionAPI.ExtensionAPI');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI",["sap/ui/base/Object","sap/suite/ui/generic/template/ObjectPage/extensionAPI/DraftTransactionController","sap/suite/ui/generic/template/ObjectPage/extensionAPI/NonDraftTransactionController"],function(B,D,N){"use strict";function g(t,c,s){var T;return{getSelectedContexts:function(u){var C=c.byId(u);return t.oCommonUtils.getSelectedContexts(C);},getTransactionController:function(){if(!T){var C=t.oCommonUtils.isDraftEnabled()?D:N;T=new C(t,c);}return T;},attachToView:function(C){t.oCommonUtils.attachControlToView(C);},invokeActions:function(f,C){return t.oServices.oApplicationController.invokeActions(f,C);},attachPageDataLoaded:function(f){t.oComponentUtils.attach(c,"PageDataLoaded",f);},detachPageDataLoaded:function(f){t.oComponentUtils.detach(c,"PageDataLoaded",f);},registerMessageFilterProvider:function(p){s.messageButtonHelper.registerMessageFilterProvider(p);}};}return B.extend("sap.suite.ui.generic.template.ObjectPage.extensionAPI.ExtensionAPI",{constructor:function(t,c,s){jQuery.extend(this,g(t,c,s));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.BusyHelper')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.BusyHelper');jQuery.sap.require('sap.ui.base.Object');sap.ui.define("sap/suite/ui/generic/template/lib/BusyHelper",["sap/ui/base/Object","sap/suite/ui/generic/template/lib/MessageUtils"],function(B,M){"use strict";function g(t){var b={};var i=false;var a=false;var c=0;var d=t.oNavContainer.getBusyIndicatorDelay();var A;function f(I){i=c!==0||!jQuery.isEmptyObject(b);if(i||I){a=false;if(i!==t.oNavContainer.getBusy()){t.oNavContainer.setBusy(i);if(!i){t.oNavContainer.setBusyIndicatorDelay(d);if(t.hasView()){M.handleTransientMessages(t.getDialogFragment);}}}}else{t.oApplication.getCurrentDisplayObject().promise.then(A);}}A=f.bind(null,true);function e(I){if(I){t.oNavContainer.setBusyIndicatorDelay(0);f();}else if(!a){a=true;setTimeout(f,0);}}function h(){c--;if(!c){e(false);}}function s(r,I,k){if(I){i=true;b[r]=true;}else{delete b[r];}e(k);}function j(o,I){c++;i=true;if(I){t.oNavContainer.setBusyIndicatorDelay(0);}o.then(h,h);e(I);}return{setBusyReason:s,setBusy:j,isBusy:function(){return i;}};}return B.extend("sap.suite.ui.generic.template.lib.BusyHelper",{constructor:function(t){jQuery.extend(this,g(t));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.CRUDManager')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.CRUDManager');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.m.MessageToast');jQuery.sap.require('sap.ui.generic.app.util.ModelUtil');jQuery.sap.require('sap.ui.generic.app.util.ActionUtil');sap.ui.define("sap/suite/ui/generic/template/lib/CRUDManager",["sap/ui/base/Object","sap/m/MessageToast","sap/ui/generic/app/util/ModelUtil","sap/ui/generic/app/util/ActionUtil","sap/suite/ui/generic/template/lib/MessageUtils"],function(B,M,a,A,b){"use strict";function g(c,C,s,o,d){var r=Promise.reject();r.catch(jQuery.noop);function h(O,i,E,P){b.handleError(O,c,o.getContentDensityClass(),s,E,P);return(i||jQuery.noop)(E);}function e(){b.handleTransientMessages(o.getDialogFragment);}function f(P){return new Promise(function(j,w){s.oTransactionController.editEntity(c.getView().getBindingContext(),P).then(function(R){C.rebindHeaderData(R.context.getPath());e(R);return j(R.context);},function(R){if(R&&R.response&&R.response.statusCode==='409'&&P){R.unsavedChanges=true;var x=sap.ui.getCore().getMessageManager();var y=x.getMessageModel().oData;var z=[];for(var i=0;i<y.length;i++){if(y[i].getCode()==="SDRAFT_COMMON/000"){z.push(y[i]);}}if(z.length>0){x.removeMessages(z);}return j(R);}else{h(b.operations.editEntity,w,R,R);}});});}function k(D){var i=c.getView().getBindingContext();var I=s.oDraftController.isActiveEntity(i);var H=s.oDraftController.hasActiveEntity(i);return new Promise(function(j,w){var E=function(x){c.getOwnerComponent().getComponentContainer().bindElement(i.getPath());return h(b.operations.deleteEntity,w,x);};if(I&&D){s.oDraftController.getDraftForActiveEntity(i).then(function(R){s.oTransactionController.deleteEntity(R.context).then(function(){setTimeout(function(){M.show(o.getText("ST_GENERIC_DRAFT_WITH_ACTIVE_DOCUMENT_DELETED"));},50);return j();});},E);}else{s.oTransactionController.deleteEntity(i).then(function(){var x=a.getEntitySetFromContext(i);var y=s.oDraftController.getDraftContext();var R=y.isDraftRoot(x);var z=o.getText("ST_GENERIC_OBJECT_DELETED");if(!I&&R){z=o.getText(H?"ST_GENERIC_DRAFT_WITH_ACTIVE_DOCUMENT_DELETED":"ST_GENERIC_DRAFT_WITHOUT_ACTIVE_DOCUMENT_DELETED");}setTimeout(function(){M.show(z);},50);return j();},E);}});}function l(P){return new Promise(function(w,x){s.oTransactionController.deleteEntities(P).then(function(D){var F=[];var O=sap.ui.getCore().getMessageManager().getMessageModel().getData();for(var i=0;i<O.length;i++){var y=O[i].getTarget();for(var j=0;j<P.length;j++){if(y.indexOf(P[j])>-1){F.push(y);break;}}}return w(F);},function(E){return x(E);});});}function m(V,i){return new Promise(function(j,w){var x=c.getOwnerComponent();var E=x.getEntitySet();if(!s.oDraftController.getDraftContext().isDraftEnabled(E)){return j();}var y=x.getComponentContainer().getElementBinding();s[i?"oApplicationController":"oTransactionController"].propertyChanged(E,V,y,i).then(function(){return j();},h.bind(null,b.operations.modifyEntity,w));});}function n(){return new Promise(function(i,j){s.oTransactionController.triggerSubmitChanges().then(function(R){e();return i(R.context);},h.bind(null,b.operations.saveEntity,j));});}function p(){return new Promise(function(i,j){s.oDraftController.activateDraftEntity(c.getView().getBindingContext()).then(function(R){var w=c.getOwnerComponent();var x=w.getComponentContainer();x.unbindElement();C.rebindHeaderData(R.context.getPath());x.getObjectBinding().refresh(true);e();return i(R);},h.bind(null,b.operations.activateDraftEntity,j));});}function q(P){return new A(P);}function t(P,R,i){if(d.isBusy()){i();return;}var F=P.functionImportPath;var j=P.contexts;var S=P.sourceControl;var w=P.label;var N=P.navigationProperty;var x=q({controller:c,contexts:j,applicationController:s.oApplicationController});var y=function(D){var E,G;if(jQuery.isArray(D)&&D.length===1){E=D[0];G=E.response&&E.response.context;if(G&&G!==E.actionContext&&G.getPath()!=="/undefined"){if(S){o.navigateFromListItem(G,S);}else{s.oNavigationController.navigateToContext(G,N,false);}}}R(D);};var z=function(E){if(!jQuery.isArray(E)){var D={context:j};h(b.operations.callAction,null,E,D);i(E);}};x.call(F,w).then(function(D){if(D&&D.executionPromise){d.setBusy(D.executionPromise);D.executionPromise.then(y,z);}else{if(!D){i();}else{y(D);}}},function(E){if(!E){i();}else{z(E);}});}function u(P){var R=new Promise(function(i,j){t(P,i,j);});return R;}function v(T){if(!T){throw new Error("Unknown Table");}var i="";var j="";var E=c.getOwnerComponent().getEntitySet();var w,x,N,y;var V=c.getView();var z=V.getModel();var D=V.getBindingContext();if(D){j=o.getTableBinding(T).path;y=z.getMetaModel();x=y.getODataEntitySet(E);w=y.getODataEntityType(x.entityType);N=y.getODataAssociationSetEnd(w,j);if(N){E=N.entitySet;}j="/"+j;i=D.getPath()+j;}else{i="/"+E;}return new Promise(function(F,G){if(s.oDraftController.getDraftContext().isDraftEnabled(E)){s.oDraftController.createNewDraftEntity(E,i).then(function(R){return F({newContext:R.context,tableBindingPath:j});},h.bind(null,b.operations.addEntry,G));}else{var H=z.createEntry(i,{batchGroupId:"Changes",changeSetId:"Changes"});return F({newContext:H,tableBindingPath:j});}});}return{editEntity:f,deleteEntity:k,deleteEntities:l,modifyEntity:m,saveEntity:n,activateDraftEntity:p,callAction:u,addEntry:v};}return B.extend("sap.suite.ui.generic.template.lib.CRUDManager.js",{constructor:function(c,C,s,o,d){jQuery.extend(this,g(c,C,s,o,d));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.CommonUtils')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.CommonUtils');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.Device');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.comp.smarttable.SmartTable');jQuery.sap.require('sap.ui.table.Table');jQuery.sap.require('sap.m.Table');jQuery.sap.require('sap.m.ListBase');jQuery.sap.require('sap.ui.generic.app.navigation.service.NavigationHandler');sap.ui.define("sap/suite/ui/generic/template/lib/CommonUtils",["sap/ui/base/Object","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/comp/smarttable/SmartTable","sap/ui/table/Table","sap/m/Table","sap/m/ListBase","sap/ui/generic/app/navigation/service/NavigationHandler","sap/suite/ui/generic/template/lib/MessageUtils"],function(B,D,J,S,U,R,L,N,M){"use strict";var c=(function(){var C="sapUiSizeCozy",s="sapUiSizeCompact",b=jQuery(document.body);if(b.hasClass(C)||b.hasClass(s)){return"";}else{return D.support.touch?C:s;}}());function g(p,e){for(var i in p){var E=p[i];if(E.entitySet===e&&E.component.list&&E.navigationProperty){return E.navigationProperty;}else if(E.pages){var r=g(E.pages,e);if(r){return r;}}}}function a(C,s){var n;function A(i){var v=C.getView();jQuery.sap.syncStyleClass(c,v,i);v.addDependent(i);}var f={};function b(i,F,q,t){var u=f[i];if(!u){u=sap.ui.xmlfragment(C.getView().getId(),i,F);A(u);var v;if(q){v=new J();u.setModel(v,q);}(t||jQuery.noop)(u,v);f[i]=u;}return u;}var r;function d(){r=r||C.getOwnerComponent().getModel("i18n").getResourceBundle();return r.getText.apply(r,arguments);}function e(){var i=s.oDraftController.getDraftContext();return i.isDraftEnabled(C.getOwnerComponent().getEntitySet());}function h(q){var t=[];if(q instanceof S){q=q.getTable();}if(q instanceof L){t=q.getSelectedContexts();}else if(q instanceof U){var I=q.getSelectedIndices();for(var i=0;i<I.length;i++){t.push(q.getContextByIndex(I[i]));}}return t;}function j(i){var q=i;while(q){if(q instanceof R||q instanceof U||q instanceof S){return q;}if(q.getParent){q=q.getParent();}else{return null;}}return null;}function k(t){if(t instanceof S){t=t.getTable();}if(t instanceof U){return t.getBindingInfo("rows");}else if(t instanceof R){return t.getBindingInfo("items");}return null;}function l(i,t){var q=i.getPath();var u=C.getOwnerComponent();var P="";if(u.getComponentContainer().getElementBinding()){P=u.getComponentContainer().getElementBinding().getPath();}var v=null;if(q.indexOf(P)!==0){v=k(t).path;}s.oNavigationController.navigateToContext(i,v,false);}function m(I,H,i){if(!I){return d("DRAFT_OBJECT");}else if(H){return d(i?"LOCKED_OBJECT":"UNSAVED_CHANGES");}else{return"";}}function o(){var i=b("sap.suite.ui.generic.template.fragments.DraftAdminDataPopover",{formatText:function(){var q=Array.prototype.slice.call(arguments,1);var K=arguments[0];if(!K){return"";}if(q.length>0&&(q[0]===null||q[0]===undefined||q[0]==="")){if(q.length>3&&(q[3]===null||q[3]===undefined||q[3]==="")){return(q.length>2&&(q[1]===null||q[1]===undefined||q[1]===""))?"":q[2];}else{return d(K,q[3]);}}else{return d(K,q[0]);}},closeDraftAdminPopover:function(){i.close();},formatDraftLockText:m},"admin");return i;}var O;function p(i){O=i;var q=b("sap.suite.ui.generic.template.fragments.DataLossPopup",{onDataLossOK:function(){q.close();O();},onDataLossCancel:function(){q.close();}});q.open();}return{getNavigationProperty:g,getText:d,isDraftEnabled:e,getNavigationHandler:function(){n=n||new N(C);return n;},executeGlobalSideEffect:function(){if(e()){var v=C.getView();v.attachBrowserEvent("keyup",function(i){if(i.keyCode===13&&v.getModel("ui").getProperty("/editable")){s.oApplicationController.executeSideEffects(v.getBindingContext());}});}},getSelectedContexts:h,navigateFromListItem:l,getCustomData:function(E){var q=E.getSource().getCustomData();var t={};for(var i=0;i<q.length;i++){t[q[i].getKey()]=q[i].getValue();}return t;},formatDraftLockText:m,showDraftPopover:function(i,t){var P=o();var q=P.getModel("admin");q.setProperty("/IsActiveEntity",i.getProperty("IsActiveEntity"));q.setProperty("/HasDraftEntity",i.getProperty("HasDraftEntity"));P.bindElement({path:i.getPath()+"/DraftAdministrativeData"});if(P.getBindingContext()){P.openBy(t);}else{P.getObjectBinding().attachDataReceived(function(){P.openBy(t);});}},getContentDensityClass:function(){return c;},attachControlToView:A,getDialogFragment:b,dataLossConfirmation:p,getParentTable:j,getTableBinding:k,getElementCustomData:function(E){var i={};if(E instanceof sap.ui.core.Element){E.getCustomData().forEach(function(q){i[q.getKey()]=q.getValue();});}return i;},extractODataEntityPropertiesFromODataJSONFormattedEntity:function(E){var i={};for(var P in E){var v=E[P];if(jQuery.type(v)!=="object"){i[P]=v;}}return i;}};}return B.extend("sap.suite.ui.generic.template.lib.CommonUtils.js",{constructor:function(C,s){jQuery.extend(this,a(C,s));}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.TemplateAssembler')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.TemplateAssembler');jQuery.sap.require('sap.ui.core.mvc.View');jQuery.sap.require('sap.ui.model.resource.ResourceModel');sap.ui.define("sap/suite/ui/generic/template/lib/TemplateAssembler",["sap/ui/core/mvc/View","sap/ui/model/resource/ResourceModel","sap/suite/ui/generic/template/lib/TemplateViewController","sap/suite/ui/generic/template/lib/TemplateComponent","sap/suite/ui/generic/template/lib/Application","sap/suite/ui/generic/template/lib/CRUDManager","sap/suite/ui/generic/template/lib/CommonUtils","sap/suite/ui/generic/template/lib/ComponentUtils","sap/suite/ui/generic/template/lib/CommonEventHandlers"],function(V,R,T,a,A,C,b,c,d){"use strict";var f;var m={};var e={};var g={};var r;function h(){r=r||new R({bundleName:"sap/suite/ui/generic/template/lib/i18n/i18n"}).getResourceBundle();return r.getText.apply(r,arguments);}function i(o,l){var I=o.getId();var n=m[I];if(l){delete m[I];}return n;}function j(o){return function(){var l=i(o);if(l.oActiveComponentRegistryEntry&&l.oActiveComponentRegistryEntry.oController){var v=l.oActiveComponentRegistryEntry.oController.getView();var I=v.getId();return g[I].oTemplateUtils.oCommonUtils.getDialogFragment.apply(null,arguments);}};}function k(o){return e[o.getId()];}function F(o){while(o&&!(o instanceof V)){o=o.getParent();}return o;}function G(o){while(o){var v=F(o);var l=v&&v.getController();var n=l&&l.getOwnerComponent();if(n instanceof a){var p=k(n);return p;}else{o=n&&n.oContainer;}}}return{getTemplateController:function(l,s,o){o=o||{};o.constructor=function(){var t={};var M=l(t,this);this._templateEventHandlers=Object.freeze(M.handlers||{});this._templateFormatters=Object.freeze(M.formatters||{});this.extensionAPI=Object.freeze(M.extensionAPI||{});this.fnGenericOnInit=function(n){var v=n.getView();var I=v.getId();jQuery.sap.log.info("Init view "+I+" of template "+s);g[I]={onExit:M.onExit||jQuery.noop,oTemplateUtils:t};var p=n.getOwnerComponent();var q=k(p);t.oComponentUtils=q.utils;t.oComponentAPI=q.methods.forView;var u=p.getAppComponent();var w=i(u);var x=u.getTransactionController();t.oServices={oApplicationController:u.getApplicationController(),oTransactionController:x,oNavigationController:u.getNavigationController(),oDraftController:x.getDraftController()};t.oServices.oApplicationController.registerView(v);t.oCommonUtils=new b(n,t.oServices);t.oServices.oCRUDManager=new C(n,t.oComponentUtils,t.oServices,t.oCommonUtils,w.oTemplateContract.oBusyHelper);t.oCommonEventHandlers=new d(n,t.oComponentUtils,t.oServices,t.oCommonUtils);v.addStyleClass(t.oCommonUtils.getContentDensityClass());(M.onInit||jQuery.noop)();q.fnViewRegisteredResolve(M.onBeforePageDisplay||jQuery.noop);q.oController=this;delete q.fnViewRegisteredResolve;};};o.onInit=function(){this.fnGenericOnInit(this);delete this.fnGenericOnInit;};o.onExit=function(){var I=this.getView().getId();g[I].onExit();delete g[I];jQuery.sap.log.info("View "+I+" of template "+s+" exited");};return T.extend(s,o);},getTemplateComponent:function(l,s,o){o=o||{};o.init=function(){var p={};var v=new Promise(function(q){p.fnViewRegisteredResolve=q;});(a.prototype.init||jQuery.noop).apply(this,arguments);p.componentName=s;p.oComponent=this;p.utils=new c(this,p);p.methods=l(this,p.utils)||{};p.viewRegisterd=v;p.oGenericData={mRefreshInfos:{}};e[this.getId()]=p;var O=jQuery.extend({},p.methods.overwrite);delete O.init;delete O.exit;delete O.setContainer;delete O.onActivate;jQuery.extend(this,O);(p.methods.init||jQuery.noop)();};o.exit=function(){var I=this.getId();var M=k(this).methods;(M.exit||jQuery.noop)();delete e[I];(a.prototype.exit||jQuery.noop).apply(this,arguments);};var n;o.onActivate=function(B){n=B;var p=this.getAppComponent();var q=i(p);if(q.oActiveComponentRegistryEntry){q.oActiveComponentRegistryEntry.isActive=false;}q.oActiveComponentRegistryEntry=k(this);q.oActiveComponentRegistryEntry.isActive=true;q.oActiveComponentRegistryEntry.viewRegisterd.then(function(t){q.oActiveComponentRegistryEntry.utils.bindComponent(n);this.getModel("message").refresh(true);t();var u=this.getIsRefreshRequired();if(u||!jQuery.isEmptyObject(q.oActiveComponentRegistryEntry.oGenericData.mRefreshInfos)){(q.oActiveComponentRegistryEntry.methods.refreshBinding||jQuery.noop)(u,u?{}:q.oActiveComponentRegistryEntry.oGenericData.mRefreshInfos);this.setIsRefreshRequired(false);q.oActiveComponentRegistryEntry.oGenericData.mRefreshInfos={};}(q.oActiveComponentRegistryEntry.methods.onActivate||jQuery.noop)(B);}.bind(this));};o.setContainer=function(){a.prototype.setContainer.apply(this,arguments);var p=k(this);if(!p.oApplication){var q=this.getAppComponent();var t=i(q);t.oTemplateContract.oBusyHelper.setBusy(p.viewRegisterd,true);p.oApplication=t.application;}(p.methods.setContainer||jQuery.noop)();};o.onDeactivate=jQuery.noop;return a.extend(s,o);},getAppComponent:function(l,n,s,o){o=o||{};o.constructor=function(){var p={appComponent:this,oTemplateContract:{componentRegistry:e,getDialogFragment:j(this),getText:h,hasView:function(){return!!(p.oActiveComponentRegistryEntry&&p.oActiveComponentRegistryEntry.oController);}}};p.application=new A(p.oTemplateContract);p.methods=l(this,p.oTemplateContract);var P=jQuery.extend({},p.methods.publicMethods);delete P.init;delete P.exit;jQuery.extend(this,P);f=p.methods.init||jQuery.noop;(n.prototype.constructor||jQuery.noop).apply(this,arguments);m[this.getId()]=p;};o.init=function(){(n.prototype.init||jQuery.noop).apply(this,arguments);f();f=null;};o.exit=function(){var p=i(this,true);(p.methods.exit||jQuery.noop)();(n.prototype.exit||jQuery.noop).apply(this,arguments);};return n.extend(s,o);},getExtensionAPIPromise:function(o){var l=G(o);if(!l){return Promise.reject();}return l.viewRegisterd.then(function(){return l.oController.extensionAPI;});},getExtensionAPI:function(o){var l=G(o);return l&&l.oController&&l.oController.extensionAPI;}};});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ListReport.Component')){jQuery.sap.declare('sap.suite.ui.generic.template.ListReport.Component');sap.ui.define("sap/suite/ui/generic/template/ListReport/Component",["sap/suite/ui/generic/template/lib/TemplateAssembler"],function(T){"use strict";function g(c){return{init:function(){var t=c.getModel("_templPriv");t.setProperty("/listReport",{});t.setProperty("/complexTable",{});},setContainer:function(){var s=c.getComponentContainer().getSettings();if(sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(s.routeConfig)){c.setTemplateName("sap.suite.ui.generic.template.ListReport.view.ComplexTable");}},forView:{hasDraft:function(){return c.getAppComponent().getTransactionController().getDraftController().getDraftContext().isDraftEnabled(c.getEntitySet());}},refreshBinding:function(u){var v=c.getAggregation("rootControl");if(v instanceof sap.ui.core.mvc.XMLView){var s=v.byId("listReport");if(s&&s.rebindTable){s.rebindTable();}}},overwrite:{updateBindingContext:function(){sap.suite.ui.generic.template.lib.TemplateComponent.prototype.updateBindingContext.apply(c,arguments);var b=c.getBindingContext();if(b){c.getModel().getMetaModel().loaded().then(function(){var u=c.getModel("ui");var a=b.getObject();if(a){var d=c.getAppComponent().getTransactionController().getDraftController();var D=d.getDraftContext();var i=D.hasDraft(b)&&!a.IsActiveEntity;if(i){u.setProperty("/editable",true);u.setProperty("/enabled",true);}}});}}}};}return T.getTemplateComponent(g,"sap.suite.ui.generic.template.ListReport.Component",{metadata:{library:"sap.suite.ui.generic.template",properties:{"templateName":{"type":"string","defaultValue":"sap.suite.ui.generic.template.ListReport.view.ListReport"},"gridTable":"boolean","multiSelect":"boolean","smartVariantManagement":"boolean","hideTableVariantManagement":"boolean","complexListId":"string"},"manifest":"json"}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ListReport.controller.ControllerImplementation')){jQuery.sap.declare('sap.suite.ui.generic.template.ListReport.controller.ControllerImplementation');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.m.ObjectIdentifier');jQuery.sap.require('sap.m.Table');jQuery.sap.require('sap.m.Text');jQuery.sap.require('sap.ui.comp.smartfield.SmartField');jQuery.sap.require('sap.ui.generic.app.navigation.service.SelectionVariant');sap.ui.define("sap/suite/ui/generic/template/ListReport/controller/ControllerImplementation",["sap/ui/base/Object","sap/ui/model/json/JSONModel","sap/m/ObjectIdentifier","sap/m/Table","sap/m/Text","sap/ui/comp/smartfield/SmartField","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/ListReport/extensionAPI/ExtensionAPI"],function(B,J,O,T,a,S,b,E){"use strict";var c="sap.suite.ui.generic.template.customData",g="sap.suite.ui.generic.template.genericData";function n(o){if(o){for(var p in o){o[p]=null;}}}return{getMethods:function(t,C){var s={};function d(){var o={};o[c]={};o[g]={};var i=C.byId("editStateFilter");if(i){o[g].editStateFilter=i.getSelectedKey();}C.getCustomAppStateDataExtension(o[c]);return o;}function e(){var o=new b(s.oSmartFilterbar.getDataSuiteFormat());var v=C.getVisibleSelectionsWithDefaults();for(var i=0;i<v.length;i++){if(!o.getValue(v[i])){o.addSelectOption(v[i],"I","EQ","");}}return{selectionVariant:o.toJSONString(),tableVariantId:s.oSmartTable.getCurrentVariantId(),customData:d()};}function f(o){o=o||e();try{t.oCommonUtils.getNavigationHandler().storeInnerAppState(o);}catch(i){jQuery.sap.log.error("ListReport.fnStoreCurrentAppStateAndAdjustURL: "+i);}}function h(){var o=C.getOwnerComponent();var i=o.getModel("_templPriv");i.setProperty("/listReport/isLeaf",o.getIsLeaf());}function j(){var o=C.getOwnerComponent();var i=o.getComponentContainer().getSettings();var p=o.getModel("_templPriv");var q="";q=t.oCommonUtils.getText("BACK");var P=i.routeConfig.parentEntitySet;var M="";if(P!==undefined&&P!==""){var u=o.getModel().getMetaModel();var v=u.getODataEntitySet(P);var w=u.getODataEntityType(v.entityType);var H=w["com.sap.vocabularies.UI.v1.HeaderInfo"];if(H&&H.TypeName&&H.TypeName.String!==""){M=H.TypeName.String;q=t.oCommonUtils.getText("BACK_TO_MAIN",M);}}p.setProperty("/complexTable/backToMain",q);}function k(){var G=jQuery.sap.getObject("sap.ushell.Container.getUser");var M=C.getOwnerComponent().getAppComponent().getMetadata().getManifestEntry("sap.ui");var i=(M&&M.icons&&M.icons.icon)||"";var o={bookmarkIcon:i,bookmarkCustomUrl:function(){f();return hasher.getHash()?("#"+hasher.getHash()):window.location.href;},bookmarkServiceUrl:function(){var q=s.oSmartTable.getTable();var u=q.getBinding("rows")||q.getBinding("items");return u?u.getDownloadUrl()+"&$top=0&$inlinecount=allpages":"";},isShareInJamActive:!!G&&G().isJamActive()};var p=C.getOwnerComponent().getModel("_templPriv");p.setProperty("/listReport/share",o);}function r(G){if(G&&G.editStateFilter!==undefined){var o=C.byId("editStateFilter");if(o){o.setSelectedKey((G.editStateFilter===null)?0:G.editStateFilter);}}}function R(o){C.restoreCustomAppStateDataExtension(o||{});}function l(o){o=o||{};if(o.hasOwnProperty(c)&&o.hasOwnProperty(g)){r(o[g]);R(o[c]);}else{if(o._editStateFilter!==undefined){r({editStateFilter:o._editStateFilter});delete o._editStateFilter;}R(o);}}function I(){var p=t.oCommonUtils.getNavigationHandler().parseNavigation();p.done(function(A,u,o){if(o!==sap.ui.generic.app.navigation.service.NavType.initial){var H=A&&A.bNavSelVarHasDefaultsOnly;var q=new b(A.selectionVariant);var v=q.getParameterNames().concat(q.getSelectOptionsPropertyNames());for(var i=0;i<v.length;i++){s.oSmartFilterbar.addFieldToAdvancedArea(v[i]);}if(H&&s.oSmartFilterbar.isCurrentVariantStandard()){s.oSmartFilterbar.setDataSuiteFormat(A.selectionVariant);}else if(!H||s.oSmartFilterbar.isCurrentVariantStandard()){s.oSmartFilterbar.clearVariantSelection();s.oSmartFilterbar.clear();s.oSmartFilterbar.setDataSuiteFormat(A.selectionVariant,true);}if(A.tableVariantId){s.oSmartTable.setCurrentVariantId(A.tableVariantId);}l(A.customData);if(!H){s.oSmartFilterbar.search();}}});p.fail(function(o){if(o instanceof Error){o.showMessageBox();}});}var N;function m(){N=N||t.oCommonUtils.getText("CREATE_NEW_OBJECT_DYN",[C.byId("idEntityTypeName").getValue()]);return N;}return{onInit:function(){s.oSmartFilterbar=C.byId("listReportFilter");s.oSmartTable=C.byId("listReport");h();k();var o=C.getOwnerComponent();var i=o.getComponentContainer().getSettings();var p=sap.suite.ui.generic.template.js.AnnotationHelper.isComplexTable(i.routeConfig);if(p){j();}},handlers:{onBack:function(){window.history.back();},addEntry:function(o){t.oCommonEventHandlers.addEntry(o).then(function(){t.oComponentUtils.addDataForNextPage({isObjectRoot:true});});},deleteEntries:function(o){t.oCommonEventHandlers.deleteEntries(o);},onChange:function(o){t.oCommonEventHandlers.onChange(o);},onContactDetails:function(o){t.oCommonEventHandlers.onContactDetails(o);},onInitSmartFilterBar:function(o){C.onInitSmartFilterBarExtension(o);I();},onEditStateFilterChanged:function(o){o.getSource().fireChange();},onBeforeSFBVariantSave:function(){var o=e();s.oSmartFilterbar.setFilterData({_CUSTOM:o.customData});f(o);},onAfterSFBVariantLoad:function(){var D=s.oSmartFilterbar.getFilterData();if(D._CUSTOM!==undefined){l(D._CUSTOM);}else{var o=d();n(o[c]);n(o[g]);l(o);}f();},onBeforeRebindTable:function(o){t.oCommonEventHandlers.onBeforeRebindTable(o);C.onBeforeRebindTableExtension(o);},onShowDetails:function(o){var i=o.getSource();t.oCommonEventHandlers.onShowDetails(i);},onShowDetailsIntent:function(o){var i=o.getSource();t.oCommonEventHandlers.onShowDetailsIntent(i,s.oSmartFilterbar);},onListNavigate:function(o){var i=o.getSource();t.oCommonEventHandlers.onListNavigate(i);},onListNavigateIntent:function(o){var i=o.getSource();t.oCommonEventHandlers.onListNavigateIntent(i,s.oSmartFilterbar);},onCallAction:function(o){t.oCommonEventHandlers.onCallActionFromList(o,s.oSmartFilterbar);},onCallActionFromList:function(o){t.oCommonEventHandlers.onCallActionFromList(o);},onBeforeSemanticObjectLinkPopoverOpens:function(o){var i=t.oCommonUtils.getNavigationHandler();if(i){var p=o.getParameters();var q=s.oSmartFilterbar.getDataSuiteFormat();i.processBeforeSmartLinkPopoverOpens(p,q);}else{o.getParameters().open();}},onSearchButtonPressed:function(){var M=C.getOwnerComponent().getModel();M.attachEventOnce('requestSent',function(){f();});},onSemanticObjectLinkPopoverLinkPressed:function(){f();},onAfterTableVariantSave:function(){f();},onAfterApplyTableVariant:function(){f();},onShareEmailPress:function(){f();sap.m.URLHelper.triggerEmail(null,t.oCommonUtils.getText("EMAIL_HEADER",[t.oCommonUtils.getText("PAGEHEADER")]),document.URL);},onShareInJamPress:function(){f();var o=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:t.oCommonUtils.getText("PAGEHEADER")}}});o.open();},onInlineDataFieldForAction:function(o){var i=o.getSource();var p=t.oCommonUtils.getElementCustomData(i);var q=t.oCommonUtils.getParentTable(i);var u=q.getParent().getTableBindingPath();t.oServices.oCRUDManager.callAction({functionImportPath:p.Action,contexts:[i.getBindingContext()],sourceControl:q,label:p.Label,operationGrouping:"",navigationProperty:""}).then(function(v){if(v){var w=v[0];if(w.response&&w.response.context&&(!w.actionContext||w.actionContext&&w.response.context.getPath()!==w.actionContext.getPath())){t.oServices.oNavigationController.setMeToDirty(this.getOwnerComponent(),u);}}});},onInlineDataFieldForIntentBasedNavigation:function(o){var i=o.getSource();var p=t.oCommonUtils.getElementCustomData(i);var q=t.oCommonUtils.getParentTable(i);var u=t.oCommonUtils.getNavigationHandler();if(u){var v={};v=i.getBindingContext().getObject();delete v.__metadata;var w=s.oSmartFilterbar.getDataSuiteFormat()||"{}";v=t.oCommonUtils.extractODataEntityPropertiesFromODataJSONFormattedEntity(v);var x=u.mixAttributesAndSelectionVariant(v,w).toJSONString();var y={selectionVariant:s.oSmartFilterbar.getDataSuiteFormat(),tableVariantID:q.getParent().getCurrentVariantId()};u.navigate(p.SemanticObject,p.Action,x,y,function(z){if(z instanceof sap.ui.generic.app.navigation.service.NavError){sap.m.MessageBox.show(z.getErrorCode(),{title:t.oCommonUtils.getText("ST_GENERIC_ERROR_TITLE")});}});}}},formatters:{formatNewObjectTooltip:m,formatDraftLink:function(D,i,H){if(D&&D.DraftUUID){if(!i){return t.oCommonUtils.getText("DRAFT_OBJECT");}else if(H){return t.oCommonUtils.getText(D.InProcessByUser?"LOCKED_OBJECT":"UNSAVED_CHANGES");}}return"";},formatDraftIcon:function(D,i,H){if(D&&D.DraftUUID&&i&&H){if(D.InProcessByUser){return"sap-icon://locked";}else{return"sap-icon://request";}}return"";}},extensionAPI:new E(t,C,s)};}};});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ListReport.view.ComplexTable.controller')){jQuery.sap.declare('sap.suite.ui.generic.template.ListReport.view.ComplexTable.controller');sap.ui.define("sap/suite/ui/generic/template/ListReport/view/ComplexTable.controller",["sap/suite/ui/generic/template/lib/TemplateAssembler","sap/suite/ui/generic/template/ListReport/controller/ControllerImplementation"],function(T,C){"use strict";return T.getTemplateController(C.getMethods,"sap.suite.ui.generic.template.ListReport.view.ComplexTable",{getVisibleSelectionsWithDefaults:function(){var v=[];return v;},onInitSmartFilterBarExtension:function(e){},getCustomAppStateDataExtension:function(c){},restoreCustomAppStateDataExtension:function(c){},onBeforeRebindTableExtension:function(e){}});},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ListReport.view.ListReport.controller')){jQuery.sap.declare('sap.suite.ui.generic.template.ListReport.view.ListReport.controller');sap.ui.define("sap/suite/ui/generic/template/ListReport/view/ListReport.controller",["sap/suite/ui/generic/template/lib/TemplateAssembler","sap/suite/ui/generic/template/ListReport/controller/ControllerImplementation"],function(T,C){"use strict";return T.getTemplateController(C.getMethods,"sap.suite.ui.generic.template.ListReport.view.ListReport",{getVisibleSelectionsWithDefaults:function(){var v=[];return v;},onInitSmartFilterBarExtension:function(e){},getCustomAppStateDataExtension:function(c){},restoreCustomAppStateDataExtension:function(c){},onBeforeRebindTableExtension:function(e){}});},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ObjectPage.Component')){jQuery.sap.declare('sap.suite.ui.generic.template.ObjectPage.Component');sap.ui.define("sap/suite/ui/generic/template/ObjectPage/Component",["sap/suite/ui/generic/template/lib/TemplateAssembler"],function(T){"use strict";function g(c,C){var v;function b(){if(!v){return;}var r=c.getRouter();var p=r&&r.oHashChanger&&r.oHashChanger.getHash();if(!p){return;}p=p.split("?")[0];var s=p.split("/");if(s[0]===""||s[0]==="#"){s.splice(0,1);}s.pop();v.bindBreadCrumbs(s);}return{onActivate:function(B){var u=c.getModel("ui");if(C.getEditableNDC()){u.setProperty("/editable",true);}else if(v&&!v.isDraftEnabled()){u.setProperty("/editable",false);}v.onComponentActivate(B);},forView:{registerView:function(t){v=t;}},refreshBinding:function(u,r){if(u){var e=c.getComponentContainer().getElementBinding();if(e){e.refresh(true);}}else{v.refreshFacets(r);}},overwrite:{updateBindingContext:function(){sap.suite.ui.generic.template.lib.TemplateComponent.prototype.updateBindingContext.apply(c,arguments);var B=c.getBindingContext();if(B){c.getModel().getMetaModel().loaded().then(function(){var t=c.getModel("_templPriv");t.setProperty("/generic/draftIndicatorState",sap.m.DraftIndicatorState.Clear);var a=B.getObject();if(a){var u=c.getModel("ui");var d=c.getAppComponent().getTransactionController().getDraftController();var D=d.getDraftContext();var i=D.hasDraft(B)&&!a.IsActiveEntity;var h=a.HasActiveEntity;if(C.getCreateMode()){u.setProperty("/createMode",true);u.setProperty("/editable",true);u.setProperty("/enabled",true);}else if(i){if(h){u.setProperty("/createMode",false);u.setProperty("/editable",true);u.setProperty("/enabled",true);}else{u.setProperty("/createMode",true);u.setProperty("/editable",true);u.setProperty("/enabled",true);}}else{u.setProperty("/createMode",false);u.setProperty("/editable",C.getEditableNDC());if(a.hasOwnProperty("HasDraftEntity")&&a.HasDraftEntity&&D.hasSiblingEntity(c.getEntitySet())){u.setProperty("/enabled",false);c.getModel().read(B.getPath(),{urlParameters:{"$expand":"SiblingEntity,DraftAdministrativeData"},success:function(r){var s=c.getModel().getContext("/"+c.getModel().getKey(r.SiblingEntity));if(s){v.draftResume(s,a,r.DraftAdministrativeData);}u.setProperty("/enabled",true);}});}else{u.setProperty("/enabled",true);}}}});b();}}}};}return T.getTemplateComponent(g,"sap.suite.ui.generic.template.ObjectPage.Component",{metadata:{library:"sap.suite.ui.generic.template",properties:{"templateName":{"type":"string","defaultValue":"sap.suite.ui.generic.template.ObjectPage.view.Details"},"showRelatedApps":{"type":"boolean","defaultValue":"false"},"editableHeaderContent":{"type":"boolean","defaultValue":"false"},"gridTable":"boolean"},"manifest":"json"}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation')){jQuery.sap.declare('sap.suite.ui.generic.template.ObjectPage.controller.ControllerImplementation');jQuery.sap.require('sap.ui.base.Object');jQuery.sap.require('sap.ui.core.format.DateFormat');jQuery.sap.require('sap.ui.core.routing.HashChanger');jQuery.sap.require('sap.m.ActionSheet');jQuery.sap.require('sap.m.Button');jQuery.sap.require('sap.m.MessageBox');jQuery.sap.require('sap.m.MessageToast');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ushell.ui.footerbar.AddBookmarkButton');jQuery.sap.require('sap.ui.table.AnalyticalTable');jQuery.sap.require('sap.ui.generic.app.navigation.service.SelectionVariant');sap.ui.define("sap/suite/ui/generic/template/ObjectPage/controller/ControllerImplementation",["sap/ui/base/Object","sap/ui/core/format/DateFormat","sap/ui/core/routing/HashChanger","sap/m/ActionSheet","sap/m/Button","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ushell/ui/footerbar/AddBookmarkButton","sap/ui/table/AnalyticalTable","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/lib/MessageButtonHelper","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/lib/MessageUtils"],function(B,D,H,A,a,M,b,J,c,d,S,e,E,f){"use strict";return{getMethods:function(t,C){var s={};var I;var m;function h(i,j,k,x){f.handleError(i,C,t.oCommonUtils.getContentDensityClass(),t.oServices,k,x);return(j||jQuery.noop)(k);}function g(i){var j=C.getView().getModel("ui");j.setProperty("/editable",i);if(!t.oCommonUtils.isDraftEnabled()&&I){t.oComponentUtils.setEditableNDC(i);}}function p(i){if(!t.oCommonUtils.isDraftEnabled()){if(C.getView().getModel().hasPendingChanges()){t.oCommonUtils.dataLossConfirmation(function(){g(false);C.getView().getModel().resetChanges();t.oComponentUtils.fire(C,"AfterCancel",{});i();});return;}g(false);}i();}function o(i,j){var k=i;if(j){k=k+" - "+j;}sap.m.URLHelper.triggerEmail(null,k,document.URL);}function O(i,j){var k=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:i+" "+j}}});k.open();}function l(){var i=C.byId("objectPage");return i.getHeaderTitle();}function n(i){var j=t.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.ShareSheet",{shareEmailPressed:function(){var k=j.getModel("share");o(k.getProperty("/objectTitle"),k.getProperty("/objectSubtitle"));},shareJamPressed:function(){var k=j.getModel("share");O(k.getProperty("/objectTitle"),k.getProperty("/objectSubtitle"));}},"share",function(X,k){var Y=sap.ui.getCore().getLibraryResourceBundle("sap.m");k.setProperty("/emailButtonText",Y.getText("SEMANTIC_CONTROL_SEND_EMAIL"));k.setProperty("/jamButtonText",Y.getText("SEMANTIC_CONTROL_SHARE_IN_JAM"));k.setProperty("/bookmarkButtonText",Y.getText("SEMANTIC_CONTROL_SAVE_AS_TILE"));var Z=jQuery.sap.getObject("sap.ushell.Container.getUser");k.setProperty("/jamVisible",!!Z&&Z().isJamActive());});var k=j.getModel("share");var x=l();k.setProperty("/objectTitle",x.getProperty("objectTitle"));k.setProperty("/objectSubtitle",x.getProperty("objectSubtitle"));k.setProperty("/bookmarkCustomUrl",document.URL);j.openBy(i.getSource());}function q(){var i=t.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(j){var k=j.getSource();var x=k.getBindingContext("buttons");var X=x.getProperty("link");var Y=x.getProperty("param");var Z=X.intent;var $=Z.substring(1,Z.indexOf("-"));var _=(Z.indexOf("~")>-1)?Z.indexOf("~"):Z.length;var a1=Z.substring(Z.indexOf("-")+1,_);var b1={target:{semanticObject:$,action:a1},params:Y};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(b1);}},"buttons");return i;}function r(){var i=C.getOwnerComponent();var j=i.getNavigationProperty();var k=t.oCommonUtils;var x=C.byId("objectPageHeader");var X=x.getProperty("objectSubtitle")?x.getProperty("objectSubtitle"):'';var Y=[C.byId("objectTypeName").getText(),x.getProperty("objectTitle").trim(),X];var Z=k.getText("DELETE_WITH_OBJECTINFO",Y);M.show(Z,{icon:M.Icon.WARNING,styleClass:t.oCommonUtils.getContentDensityClass(),title:k.getText("DELETE"),actions:[M.Action.DELETE,M.Action.CANCEL],onClose:function($){if($===M.Action.DELETE){var _=t.oServices.oCRUDManager.deleteEntity();_.then(function(){t.oServices.oNavigationController.setParentToDirty(i,j);t.oServices.oNavigationController.unbindChildren(i);window.history.back();});var a1={deleteEntityPromise:_};t.oComponentUtils.fire(C,"AfterDelete",a1);}}});}function u(i){var j,k;if(i){k=i.context||i;if(t.oServices.oDraftController.getDraftContext().hasDraft(k)){t.oServices.oNavigationController.setRootPageToDirty();j=i.context&&i.context.context||i.context||i;}}if(j){t.oServices.oNavigationController.navigateToContext(j,undefined,true);}else{g(true);}}function v(i){t.oServices.oCRUDManager.editEntity(i).then(function(j){if(j&&j.unsavedChanges){var k=C.getOwnerComponent();var x=k.getEntitySet();var X=t.oServices.oDraftController.getDraftContext();if(X.isDraftRoot(x)){var Y=k.getBindingContext();var Z=k.getModel();Z.read(Y.getPath(),{urlParameters:{"$expand":"DraftAdministrativeData"},success:function($){if(!$.DraftAdministrativeData.DraftIsProcessedByMe&&!$.DraftAdministrativeData.InProcessByUser){w($.DraftAdministrativeData.CreatedByUserDescription||$.DraftAdministrativeData.CreatedByUser);}else if(!$.DraftAdministrativeData.DraftIsProcessedByMe&&$.DraftAdministrativeData.InProcessByUser){h(f.operations.editEntity,null,j,j);}else{u(j);}}});return;}else{h(f.operations.editEntity,null,j,j);}}else{u(j);}});}function w(i){var j=t.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){j.close();v();},onCancel:function(){j.close();}},"Dialog");var k=j.getModel("Dialog");var x=t.oCommonUtils.getText("DRAFT_LOCK_EXPIRED",[i]);k.setProperty("/unsavedChangesQuestion",x);j.open();}var y;function z(){y=y||t.oCommonUtils.getText("NEW_OBJECT",[C.byId("objectTypeName").getText()]);return y;}var F;function G(j){if(!j.length){return;}var k=l();var x=k&&k.getBreadCrumbsLinks();if(!x||!x.length){return;}F=F||H.getInstance();var X="",Y,Z,$,_,a1,b1,c1;for(var i=0;i<j.length;i++){$=j[i];X=X+"/"+$;if(x[i]){_=x[i];Y=_.getCustomData()&&_.getCustomData()[0];if(Y&&Y.getKey()==="entitySet"){Z=Y.getValue();a1=$.split("(");if(a1&&a1[1]){if(F.hrefForAppSpecificHash){c1=F.hrefForAppSpecificHash(X);}else{c1="#"+X;}b1="/"+Z+"("+a1[1];_.setHref(c1);_.bindElement(b1);}}}}}function R(i){C.getView().getContent()[0].getContent()[0].getSections().forEach(function(j){j.getSubSections().forEach(function(k){k.getBlocks().forEach(function(x){x.getContent().forEach(function(X){if(X instanceof sap.ui.comp.smarttable.SmartTable){if(i[X.getTableBindingPath()]){X.rebindTable();if(t.oCommonUtils.isDraftEnabled()){C.getOwnerComponent().getAppComponent().getApplicationController().executeSideEffects(C.getOwnerComponent().getBindingContext(),[],[X.getTableBindingPath()]);}}}});});});});}function K(i){var j=sap.ui.getCore().byId(l().getId()+"-lock");j.setVisible(i);}function L(j,k,x){var X=j.getObject();if(!X||!X.hasOwnProperty("IsActiveEntity")||X.IsActiveEntity!==false){return;}var Y=C.getView().getModel();var Z=Y.getMetaModel();var $=Z.getODataEntitySet(C.getOwnerComponent().getEntitySet());var _=Z.getODataEntityType($.entityType);var a1="";var b1;if(_["com.sap.vocabularies.Common.v1.Label"]){a1=_["com.sap.vocabularies.Common.v1.Label"].String;if(a1===""){b1=_["com.sap.vocabularies.Common.v1.Label"].Path;if(b1){a1=k[b1];}}}if(_["com.sap.vocabularies.UI.v1.HeaderInfo"]&&_["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName){if(a1===""){a1=_["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String;}if(a1===""){b1=_["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.Path;if(b1){a1=k[b1];}}}var c1="";var d1=_["com.sap.vocabularies.Common.v1.SemanticKey"];for(var i in d1){var e1=d1[i];if(c1===""){c1=k[e1.PropertyPath];}else{c1=c1+"-"+k[e1.PropertyPath];}}var f1="-";if(x&&x.LastChangeDateTime!==null){var g1=D.getDateTimeInstance({pattern:"MMMM d, yyyy HH:mm",style:"long"});f1=g1.format(x.LastChangeDateTime);}var h1=[a1,c1,f1];var i1=t.oCommonUtils.getText("DRAFT_FOUND_RESUME",h1);var j1;var k1=t.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.DraftResumeDialog",{onDraftResume:function(){k1.close();t.oServices.oNavigationController.navigateToContext(j1.getProperty("/siblingContext"),null,true);},onDraftDiscard:function(){k1.close();C.getView().getModel("ui").setProperty("/enabled",true);t.oServices.oCRUDManager.deleteEntity(true);K(false);j1.getProperty("/activeEntity").HasDraftEntity=false;var l1=t.oServices.oNavigationController.getViews();for(var m1 in l1){var n1=l1[m1].getComponentInstance();if(n1.setIsRefreshRequired){n1.setIsRefreshRequired(true);}}},onResumeDialogClosed:function(){j1.setProperty("/siblingContext",null);j1.setProperty("/activeEntity",null);}},"Dialog");j1=k1.getModel("Dialog");j1.setProperty("/draftResumeText",i1);j1.setProperty("/siblingContext",j);j1.setProperty("/activeEntity",k);k1.open();}function N(){var j="{\"SelectionVariantID\":\"\"}";var k=C.getOwnerComponent();var X=k.getEntitySet();var Y=k.getModel();var Z=Y.getMetaModel();var $=Z.getODataEntitySet(X);var _=Z.getODataEntityType($.entityType);var a1=_.property;var b1=[];for(var x in a1){var c1=a1[x]["sap:field-control"];if(c1&&b1.indexOf(c1)<0){b1.push(a1[x]["sap:field-control"]);}}var d1=C.getView().getBindingContext();var e1=d1.getObject();var f1=new S();for(var i in a1){var g1=a1[i].type;var h1=a1[i].name;var i1=e1[a1[i].name];if(b1.indexOf(h1)>-1){continue;}if(h1&&(i1||g1==="Edm.Boolean")){if(g1==="Edm.Time"&&i1.ms!==undefined){i1=i1.ms;}if(typeof i1!=="string"){i1=i1.toString();}f1.addParameter(h1,i1);}}j=f1.toJSONString();return j;}function P(){var i=C.byId("imageDialog")||t.oCommonUtils.getDialogFragment("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");return i;}var Q={};var T;function U(i){var j=t.oComponentUtils.getCurrentDisplayObject();if(j.isBack){T=Q[i];}else{T=j.dataFromLastPage;Q[i]=T;}m.adaptToContext(i);W();}function V(){return T;}function W(){var i=V()||t.oComponentUtils.getCurrentDisplayObject().dataFromLastPage;var j=C.getOwnerComponent();var k=j.getModel("_templPriv");if(!k.getProperty("/objectPage")){k.setProperty("/objectPage",{});}var x=sap.ui.getCore().getLibraryResourceBundle("sap.m");k.setProperty("/objectPage/navDownTooltip",x.getText("FACETFILTER_NEXT"));k.setProperty("/objectPage/navUpTooltip",x.getText("FACETFILTER_PREVIOUS"));if(i&&i.nextObjectPageInfo){var X=i.nextObjectPageInfo;var Y,Z;var $=X.objectPageNavigationContexts;Z=!!$&&((X.selectedRelativeIndex)!==X.endIndex);Y=!!$&&!(X.selectedRelativeIndex<=0&&X.startIndex<=0);k.setProperty("/objectPage/navUpEnabled",Y);k.setProperty("/objectPage/navDownEnabled",Z);if(!Z&&!Y){k.setProperty("/objectPage/navBtnsVisible",false);}else{k.setProperty("/objectPage/navBtnsVisible",true);}}else{k.setProperty("/objectPage/navUpEnabled",false);k.setProperty("/objectPage/navDownEnabled",false);k.setProperty("/objectPage/navBtnsVisible",false);}}return{onInit:function(){t.oCommonUtils.executeGlobalSideEffect();t.oComponentAPI.registerView({onComponentActivate:U,draftResume:L,bindBreadCrumbs:G,isDraftEnabled:t.oCommonUtils.isDraftEnabled,refreshFacets:R});m=new e(t.oCommonUtils,C);s.messageButtonHelper=m;},handlers:{addEntry:function(i){t.oCommonEventHandlers.addEntry(i);},onBack:function(){p(function(){window.history.back();});},onCancel:function(){g(false);C.getView().getModel().resetChanges();t.oComponentUtils.fire(C,"AfterCancel",{});if(t.oComponentUtils.getCreateMode()){window.history.back();}},onContactDetails:function(i){t.oCommonEventHandlers.onContactDetails(i);},onPressDraftInfo:function(i){var j=C.getView().getBindingContext();var k=sap.ui.getCore().byId(i.getSource().getId()+(i.getId()==="markChangesPress"?"-changes":"-lock"));t.oCommonUtils.showDraftPopover(j,k);},onShareObjectPageActionButtonPress:n,onRelatedApps:function(x){var X=x.getSource();var Y=sap.ushell.Container.getService("URLParsing").parseShellHash(document.location.hash);var Z=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(Y.semanticObject);var $=q();var _=$.getModel("buttons");_.setProperty("/buttons",[]);$.openBy(X);Z.done(function(a1){var b1=C.getOwnerComponent().getModel().getMetaModel();var c1=C.getView().getBindingContext();var d1=c1.getObject();var e1=d1.__metadata.type;var f1=b1.getODataEntityType(e1);var g1=f1["com.sap.vocabularies.Common.v1.SemanticKey"];var h1={};if(g1&&g1.length>0){for(var j=0;j<g1.length;j++){var i1=g1[j].PropertyPath;if(!h1[i1]){h1[i1]=[];h1[i1].push(d1[i1]);}}}else{for(var k in f1.key.propertyRef){var j1=f1.key.propertyRef[k].name;if(!h1[j1]){h1[j1]=[];h1[j1].push(d1[j1]);}}}var k1=[];var l1="#"+Y.semanticObject+"-"+Y.action;for(var i=0;i<a1.length;i++){var m1=a1[i];if(m1.intent!=l1){k1.push({enabled:true,text:m1.text,link:m1,param:h1});}}if(k1.length===0){k1.push({enabled:false,text:t.oCommonUtils.getText("NO_RELATED_APPS")});}_.setProperty("/buttons",k1);});},handleNavigateToObject:function(i,j){if(j){if(i!==null&&i!==undefined&&j){var k=j.NavPropertyToUse;t.oComponentUtils.addDataForNextPage({"nextObjectPageInfo":j});if(j.nested){t.oServices.oNavigationController.navigateToContext(i,k,true);}else{t.oServices.oNavigationController.navigateToContext(i,null,true);}}}},handleShowNextObject:function(i){var j=V()||t.oComponentUtils.getCurrentDisplayObject().dataFromLastPage;if(j&&j.nextObjectPageInfo){var k=jQuery.extend(true,{},j.nextObjectPageInfo);var x=k.listBinding;var X=k.endIndex;var Y=k.selectedRelativeIndex+1;var Z=k.objectPageNavigationContexts;var $=k.tableMaxItems;var _=k.growingThreshold;var a1=C.getOwnerComponent();var b1=a1.getModel("_templPriv");if(Y&&Z){var c1=Z[Y];if(c1&&c1.getPath&&Y<X&&Y!==$-1){k.selectedRelativeIndex=Y;C._templateEventHandlers.handleNavigateToObject(c1,k);}else if(Y===X&&Y!==$-1){var d1=X+1+_;var e1=function(f1){var Z=f1.oSource.getContexts(0,d1);k.objectPageNavigationContexts=Z;k.endIndex=d1;c1=Z[Y];if(c1&&c1.getPath){b1.setProperty("/objectPage/navDownEnabled",true);}x.detachDataReceived(e1);};x.attachDataReceived(e1);x.loadData(0,d1);k.selectedRelativeIndex=Y;C._templateEventHandlers.handleNavigateToObject(c1,k);}else if(Y===$-1){k.selectedRelativeIndex=Y;C._templateEventHandlers.handleNavigateToObject(c1,k);}}}},handleShowPrevObject:function(i){var j=V()||t.oComponentUtils.getCurrentDisplayObject().dataFromLastPage;if(j&&j.nextObjectPageInfo){var k=jQuery.extend(true,{},j.nextObjectPageInfo);var x=k.selectedRelativeIndex-1;var X=k.objectPageNavigationContexts;if(x&&X){var Y=X[x];if(Y&&Y.getPath){k.selectedRelativeIndex=x;C._templateEventHandlers.handleNavigateToObject(Y,k);}}}},onShowMessages:function(i){m.showMessagePopover(i);},onEdit:function(){I=true;if(t.oCommonUtils.isDraftEnabled){var i=t.oServices.oDraftController.getDraftContext();var j=C.getOwnerComponent();var k=j.getEntitySet();if(i.isDraftRoot(k)){var x=j.getBindingContext();if(i.hasPreserveChanges(x)){v(true);}else{var X=j.getModel();X.read(x.getPath(),{urlParameters:{"$expand":"DraftAdministrativeData"},success:function(Y){if(Y.DraftAdministrativeData&&!Y.DraftAdministrativeData.DraftIsProcessedByMe&&!Y.DraftAdministrativeData.InProcessByUser){w(Y.DraftAdministrativeData.CreatedByUserDescription||Y.DraftAdministrativeData.CreatedByUser);}else{v();}}});}return;}}v();},onSave:function(){var i=C.getView().getBindingContext();var j=C.getView().getModel().getPendingChanges();j=j&&j[i.getPath().replace("/","")]||{};var k=Object.keys(j)||[];var x=t.oServices.oCRUDManager.saveEntity();x.then(function(Y){if(!t.oCommonUtils.isDraftEnabled()&&I){g(false);}else if(t.oCommonUtils.isDraftEnabled()){g(false);}if(t.oComponentUtils.getCreateMode()){if(Y){t.oServices.oNavigationController.navigateToContext(Y,undefined,true);}setTimeout(function(){b.show(t.oCommonUtils.getText("OBJECT_CREATED"));},10);}else{b.show(t.oCommonUtils.getText("OBJECT_SAVED"));if(!t.oCommonUtils.isDraftEnabled()&&!I){window.history.back();}}if(j){t.oServices.oApplicationController.executeSideEffects(i,k);}});var X={saveEntityPromise:x};t.oComponentUtils.fire(C,"AfterSave",X);},onActivate:function(){var i=t.oServices.oCRUDManager.activateDraftEntity();i.then(function(k){b.show(t.oCommonUtils.getText("OBJECT_SAVED"));if(k&&k.context){t.oServices.oNavigationController.setRootPageToDirty();t.oServices.oNavigationController.unbindChildren(C.getOwnerComponent());t.oServices.oNavigationController.navigateToContext(k.context,undefined,true);}});var j={activationPromise:i};t.oComponentUtils.fire(C,"AfterActivate",j);},onChange:function(i){t.oCommonEventHandlers.onChange(i);},onDiscardDraft:function(i){t.oCommonEventHandlers.onDiscardDraft(i);},onDelete:function(i){r();},onCallAction:function(i){var j=C.getOwnerComponent();var k=j.getNavigationProperty();var x=t.oCommonUtils.getCustomData(i);var X=[];X.push(C.getView().getBindingContext());if(X[0]&&x.Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){var Y={functionImportPath:x.Action,contexts:X,sourceControl:"",label:x.Label,operationGrouping:x.OperationGrouping,navigationProperty:C.getOwnerComponent().getNavigationProperty()};t.oServices.oCRUDManager.callAction(Y).then(function(Z){var $=Z&&Z[0];if($&&$.response&&$.response.context&&(!$.actionContext||$.actionContext&&$.response.context.getPath()!==$.actionContext.getPath())){t.oServices.oNavigationController.setParentToDirty(j,k);}});}},onCallActionFromList:function(i){t.oCommonEventHandlers.onCallActionFromList(i);},onBeforeRebindDetailTable:function(i){t.oCommonEventHandlers.onBeforeRebindTable(i);if(i.getSource().getTable()instanceof d){var j=i.getParameter("bindingParams");j.parameters.entitySet=i.getSource().getEntitySet();}},onShowDetails:function(i){var j=i.getSource();p(function(){t.oCommonEventHandlers.onShowDetails(j);});},onShowDetailsIntent:function(i){var j=i.getSource();p(function(){t.oCommonEventHandlers.onShowDetailsIntent(j);});},onListNavigate:function(i){var j=i.getSource();p(function(){t.oCommonEventHandlers.onListNavigate(j);});},onListNavigateIntent:function(i){var j=i.getSource();p(function(){t.oCommonEventHandlers.onListNavigateIntent(j);});},onBeforeSemanticObjectLinkPopoverOpens:function(i){var j=t.oCommonUtils.getNavigationHandler();if(j){var k=N();var x=i.getParameters();j.processBeforeSmartLinkPopoverOpens(x,k);}else{i.getParameters().open();}},onDataReceived:function(i){var j=C.getOwnerComponent().getAggregation("rootControl");var k=i.getSource().getTable();var x=j.byId(k.sId+"-tableLengthText");if(x){var X,Y=0;var Z=k.getBinding("items");if(!Z){Z=k.getBinding("rows");}X=Z.getLength();if(X>5){Y=5;}else{Y=X;}var $=this.getView().getModel("i18n").getResourceBundle();x.setText($.getText("TABLE_LENGTH",[Y,X]));}},onShowAll:function(i){var j=C.getOwnerComponent().getAppComponent();var k=i.getSource().getParent().getParent().getEntitySet();var x=t.oCommonUtils.getNavigationProperty(j.getConfig().pages[0].pages,k);j.getNavigationController().navigateToContext(null,x);},onHeaderImagePress:function(i){var j=P();var k=j.getModel("headerImage");k.setProperty("/src",i.getSource().getSrc());if(sap.ui.Device.system.phone){j.setProperty("stretch",true);}j.open();},onInlineDataFieldForAction:function(i){var j=i.getSource();var k=t.oCommonUtils.getElementCustomData(j);var x=t.oCommonUtils.getParentTable(j);var X=x.getParent().getTableBindingPath();t.oServices.oCRUDManager.callAction({functionImportPath:k.Action,contexts:[j.getBindingContext()],sourceControl:x,label:k.Label,operationGrouping:"",navigationProperty:""}).then(function(Y){if(Y){var Z=Y[0];if(Z.response&&Z.response.context&&(!Z.actionContext||Z.actionContext&&Z.response.context.getPath()!==Z.actionContext.getPath())){t.oServices.oNavigationController.setMeToDirty(this.getOwnerComponent(),X);}}});},onInlineDataFieldForIntentBasedNavigation:function(i){var j=i.getSource();var k=t.oCommonUtils.getElementCustomData(j);var x=t.oCommonUtils.getNavigationHandler();if(x){var X={};X=j.getBindingContext().getObject();delete X.__metadata;jQuery.extend(X,this.getView().getBindingContext().getObject());var Y=t.oCommonUtils.extractODataEntityPropertiesFromODataJSONFormattedEntity(X);Y=JSON.stringify(Y);var Z={};x.navigate(k.SemanticObject,k.Action,Y,Z,function($){if($ instanceof sap.ui.generic.app.navigation.service.NavError){sap.m.MessageBox.show($.getErrorCode(),{title:t.oCommonUtils.getText("ST_GENERIC_ERROR_TITLE")});}});}},onBeforeRebindChart:function(i){var j=i.getSource();j.oModels=j.getChart().oPropagatedProperties.oModels;}},formatters:{formatDefaultObjectTitle:function(i){var j=C.getView().getBindingContext();var k=j&&j.getObject();if(i&&k&&(k.IsActiveEntity===undefined||k.IsActiveEntity===false||k.HasActiveEntity===false)){return z();}}},extensionAPI:new E(t,C,s)};}};});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.ObjectPage.view.Details.controller')){jQuery.sap.declare('sap.suite.ui.generic.template.ObjectPage.view.Details.controller');sap.ui.define("sap/suite/ui/generic/template/ObjectPage/view/Details.controller",["sap/suite/ui/generic/template/lib/TemplateAssembler","sap/suite/ui/generic/template/ObjectPage/controller/ControllerImplementation"],function(T,C){"use strict";return T.getTemplateController(C.getMethods,"sap.suite.ui.generic.template.ObjectPage.view.Details",{});},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.QuickCreate.Component')){jQuery.sap.declare('sap.suite.ui.generic.template.QuickCreate.Component');jQuery.sap.require('sap.ca.ui.utils.Lessifier');sap.ui.define("sap/suite/ui/generic/template/QuickCreate/Component",["sap/suite/ui/generic/template/lib/TemplateAssembler","../js/AnnotationHelper","../js/QuickTemplates/AnnotationHelper","sap/ca/ui/utils/Lessifier"],function(T,A,Q,L){"use strict";function g(c,C){L.lessifyCSS("sap.suite.ui.generic.template.QuickCreate","css/custom.css",true);return{};}return T.getTemplateComponent(g,"sap.suite.ui.generic.template.QuickCreate.Component",{metadata:{library:"sap.suite.ui.generic.template",properties:{"templateName":{"type":"string","defaultValue":"sap.suite.ui.generic.template.QuickCreate.view.QuickCreate"}},"manifest":"json","includes":["css/custom.css"]}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.QuickView.Component')){jQuery.sap.declare('sap.suite.ui.generic.template.QuickView.Component');sap.ui.define("sap/suite/ui/generic/template/QuickView/Component",["sap/suite/ui/generic/template/lib/TemplateAssembler","../js/AnnotationHelper","../js/QuickTemplates/AnnotationHelper"],function(T,A,Q){"use strict";function g(c,C){return{};}return T.getTemplateComponent(g,"sap.suite.ui.generic.template.QuickView.Component",{metadata:{library:"sap.suite.ui.generic.template",properties:{"templateName":{"type":"string","defaultValue":"sap.suite.ui.generic.template.QuickView.view.QuickView"}},"manifest":"json"}});});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.extensionAPI.extensionAPI')){jQuery.sap.declare('sap.suite.ui.generic.template.extensionAPI.extensionAPI');sap.ui.define("sap/suite/ui/generic/template/extensionAPI/extensionAPI",["sap/suite/ui/generic/template/lib/TemplateAssembler"],function(T){"use strict";return{getExtensionAPI:function(c){return T.getExtensionAPI(c);},getExtensionAPIPromise:function(c){return T.getExtensionAPIPromise(c);}};});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.js.QuickTemplates.QuickActionBaseController')){jQuery.sap.declare('sap.suite.ui.generic.template.js.QuickTemplates.QuickActionBaseController');jQuery.sap.require('sap.m.MessageBox');sap.ui.define("sap/suite/ui/generic/template/js/QuickTemplates/QuickActionBaseController",["sap/suite/ui/generic/template/lib/TemplateAssembler","sap/m/MessageBox","./AnnotationHelper"],function(T,M,A){"use strict";function g(t,c){return{onInit:function(){c.oTemplateUtils=t;c._initialize();}};}var B=T.getTemplateController(g,"sap.suite.ui.generic.template.js.QuickTemplates.QuickActionBaseController",{_initialize:function(){if(!this._bIsInitialized){this._bIsInitialized=true;var c=this.getOwnerComponent();var v=this.getView();v.setModel(c.getModel());this.sEntitySet=c.getEntitySet();this.oDraftController=this.oTemplateUtils.oServices.oDraftController;this.bDraftEnabled=this.oDraftController.getDraftContext().isDraftEnabled(this.sEntitySet);var m=this.getView().getModel().getMetaModel();this.oEntitySetMeta=m.getODataEntitySet(this.sEntitySet);this.oEntityTypeMeta=m.getODataEntityType(this.oEntitySetMeta.entityType);this.oSmartFieldEventDelegate={onAfterRendering:jQuery.proxy(function(e){this._onSmartFieldAfterRendering(e);},this)};}},_onMetaModelLoaded:function(){},_onSmartFieldAfterRendering:function(e){},onBeforeRendering:function(){if(!this._bMetaDataInit){this._bMetaDataInit=true;this.getView().getModel().getMetaModel().loaded().then(jQuery.proxy(this._onMetaModelLoaded,this),jQuery.proxy(this.onError,this));}this.setBusy(false);},setBusy:function(b){if(this.getView().getModel("ui")){this.getView().getModel("ui").setProperty("/busy",b);this.getView().getModel("ui").updateBindings();}},bindView:function(c){var i=this._getFormatterInterface(c);var e=A.formatExpandBindingPathForHeaderObject(i,this.oEntityTypeMeta.namespace+"."+this.oEntityTypeMeta.name);this.oContext=c;this.getView().bindElement({path:c.getPath(),parameters:{expand:e}});},onError:function(e){this.setBusy(false);if(e.message){this._showErrorMessage(e);}else if(e.response){this._showErrorMessage(e.response);}else{this._showErrorMessage({message:this.oTemplateUtils.oCommonUtils.getText("QuickAction_Generic_Error")});}},onSmartFieldsCreated:function(e){var c=e.getParameters()[0];if(c&&typeof c.addEventDelegate==='function'){c.removeEventDelegate(this.oSmartFieldEventDelegate);c.addEventDelegate(this.oSmartFieldEventDelegate);}},formatI18NMessage:function(){if(arguments&&arguments[0]){var i=arguments[0];var r=this.getView().getModel("i18n").getResourceBundle();if(arguments.length>1){var a=Array.prototype.slice.call(arguments);return r.getText(i,a.splice(1,arguments.length-1));}return r.getText(i);}return arguments;},_getFormatterInterface:function(c){var a=c?c:this.getView().getBindingContext();return A.createFormatterInterface(a);},_setBindingContext:function(c){this.getView().setBindingContext(c);this.setBusy(false);},_showErrorMessage:function(e){var a=e.response||e;var d=a.message;if(a.statusText){d=a.statusText;}if(a&&a.responseText){try{var E=jQuery.parseJSON(a.responseText);var s=this._getErrorDetail(E);d=(s&&s.length>0)?s:d;}catch(b){}}M.show(d,{icon:M.Icon.ERROR,title:this.oTemplateUtils.oCommonUtils.getText("QuickAction_Error_Popover"),actions:[M.Action.OK]});},_getErrorDetail:function(e){var d="";if(e&&e.error&&e.error.message){if(e.error.innererror&&e.error.innererror.errordetails&&e.error.innererror.errordetails.length>0){jQuery.each(e.error.innererror.errordetails,jQuery.proxy(function(i,a){d+=a.severity+": "+a.message+"\n\n";},this));}else if(e.error.message.value){d=e.error.message.value;}}return d;}});return B;},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.lib.AppComponent')){jQuery.sap.declare('sap.suite.ui.generic.template.lib.AppComponent');jQuery.sap.require('sap.ui.core.UIComponent');jQuery.sap.require('sap.m.NavContainer');jQuery.sap.require('sap.ui.generic.app.ApplicationController');sap.ui.define("sap/suite/ui/generic/template/lib/AppComponent",["sap/ui/core/UIComponent","sap/m/NavContainer","sap/ui/generic/app/ApplicationController","sap/suite/ui/generic/template/lib/BusyHelper","sap/suite/ui/generic/template/lib/NavigationController","sap/suite/ui/generic/template/lib/TemplateAssembler","sap/suite/ui/generic/template/library"],function(U,N,A,B,a,T){"use strict";function g(o,t){var c;var n;var C;function d(){if(!C){var m=o.getMetadata();C=m.getManifestEntry("sap.ui.generic.app");}return C;}return{init:function(){var m=o.getModel();if(m){c=new A(m);n=new a(o,t);c.attachEvent("beforeSideEffectExecution",function(e){if(e.getParameter("valueChange")||e.getParameter("fieldControl")){var p=e.getParameter("promise");t.oBusyHelper.setBusy(p);}});if(!m.oMetadata||!m.oMetadata.isLoaded()){m.attachMetadataFailed(function(){n.navigateToMessagePage({title:t.getText("ST_GENERIC_ERROR_LOAD_DATA_TITLE"),text:t.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")});});}else if(m.oMetadata.isFailed()){n.navigateToMessagePage({title:t.getText("ST_GENERIC_ERROR_LOAD_DATA_TITLE"),text:t.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")});}}t.oBusyHelper.setBusyReason("initAppComponent",false);},exit:function(){if(t.oNavContainer){t.oNavContainer.destroy();}if(c){c.destroy();}if(n){n.destroy();}},publicMethods:{createContent:function(){if(t.oNavContainer){return"";}o.setModel(sap.ui.getCore().getMessageManager().getMessageModel(),"message");t.oNavContainer=new N({id:o.getId()+"-appContent"});t.oBusyHelper=new B(t);t.oBusyHelper.setBusyReason("initAppComponent",true,true);if(sap.ui.Device.system.desktop){t.oNavContainer.addStyleClass("sapUiSizeCompact");}t.oNavContainer.attachAfterNavigate(t.oApplication.onAfterNavigate);return t.oNavContainer;},getConfig:d,getTransactionController:function(){return c.getTransactionController();},getApplicationController:function(){return c;},getNavigationController:function(){return n;}}};}var b=T.getAppComponent(g,U,"sap.suite.ui.generic.template.lib.AppComponent",{metadata:{config:{"title":"SAP UI Application Component",fullWidth:true},routing:{config:{routerClass:"sap.m.routing.Router",viewType:"XML",viewPath:"",clearTarget:false},routes:[]},library:"sap.suite.ui.generic.template"}});delete T.getAppComponent;return b;});};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.QuickCreate.view.QuickCreate.controller')){jQuery.sap.declare('sap.suite.ui.generic.template.QuickCreate.view.QuickCreate.controller');jQuery.sap.require('sap.m.MessageToast');jQuery.sap.require('sap.ui.model.odata.AnnotationHelper');jQuery.sap.require('sap.ui.model.json.JSONModel');jQuery.sap.require('sap.ui.model.Context');sap.ui.define("sap/suite/ui/generic/template/QuickCreate/view/QuickCreate.controller",["../../js/QuickTemplates/QuickActionBaseController","../../js/QuickTemplates/QuickCreateAPI","sap/m/MessageToast","../../js/QuickTemplates/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","../../js/QuickTemplates/ODataModelHelper","sap/ui/model/json/JSONModel","sap/ui/model/Context"],function(B,Q,M,a,b,O,J,C){"use strict";var c=B.extend("sap.suite.ui.generic.template.QuickCreate.view.QuickCreate",{_initialize:function(){if(!this._bIsInitialized){B.prototype._initialize.apply(this);this.oQuickCreateAPI=this.getOwnerComponent().getAppComponent().oQuickCreateAPI;if(this.oQuickCreateAPI){this.oQuickCreateAPI.setRootView(this.getView());}this.sDraftEntityPath=this.oQuickCreateAPI?this.oQuickCreateAPI.getQuickCreateItem().draftid:undefined;this.bIsCreator=this.oQuickCreateAPI?this.oQuickCreateAPI.isCurrentUserCreator():true;this.sQuickCreateUserName=this.oQuickCreateAPI?this.oQuickCreateAPI.getQuickCreateItem().createdByName:"";this.bFormEnabled=!this.bDraftEnabled||this.bIsCreator;this._sDeferredGroupId="QuickCreateChanges";var q=new J({});this._sQuickCreateUIModelName="quickCreate";this.getView().setModel(q,this._sQuickCreateUIModelName);this.getView().getModel(this._sQuickCreateUIModelName).setProperty("/draftExists",true);this.getView().getModel(this._sQuickCreateUIModelName).setProperty("/quickCreateUser",this.sQuickCreateUserName);if(!this.bDraftEnabled){this.getView().getModel().setDeferredGroups([this._sDeferredGroupId]);}if(this.oQuickCreateAPI){this.oQuickCreateAPI.attachAutofillLineItems(this._onLineItemsFound,this);}}},onExit:function(){if(this._bIsBeingDestroyed||this._bDestroyed){return;}this._bIsBeingDestroyed=true;if(this.oQuickCreateAPI){this.oQuickCreateAPI.destroy();}if(B.prototype.onExit){B.prototype.onExit.apply(this);}this._bDestroyed=true;delete this._bIsBeingDestroyed;},onBeforeRendering:function(){B.prototype.onBeforeRendering.apply(this);this.getView().getModel("ui").setProperty("/enabled",this.bFormEnabled);this.getView().getModel("ui").setProperty("/editable",true);},_onMetaModelLoaded:function(){var t=this;this.setBusy(true);if(this.sDraftEntityPath){var o=new C(this.getView().getModel(),this.sDraftEntityPath);if(this.bDraftEnabled&&!this.bIsCreator){o._bLocalBinding=true;}else if(!this.bDraftEnabled){o._bLocalBinding=true;}if(o._bLocalBinding){if(this.oQuickCreateAPI){this.oQuickCreateAPI.loadQuickCreateModelFromJSON().then(jQuery.proxy(function(){if(o.getObject()){this.getView().getModel(this._sQuickCreateUIModelName).setProperty("/draftExists",true);}else{this.getView().getModel(this._sQuickCreateUIModelName).setProperty("/draftExists",false);}this.bindView(o);},this));}}else{this.getView().getModel().read(this.sDraftEntityPath,{success:jQuery.proxy(function(D,r){this.getView().getModel(this._sQuickCreateUIModelName).setProperty("/draftExists",true);this.bindView(o);},this),error:jQuery.proxy(function(e){this.getView().getModel(this._sQuickCreateUIModelName).setProperty("/draftExists",false);this.bindView(o);},this)});}}else if(this.bDraftEnabled){this.oDraftController.createNewDraftEntity(this.sEntitySet,"/"+this.sEntitySet).then(function(r){if(t.oQuickCreateAPI){t.oQuickCreateAPI.updateDraftID(r.context.getPath());}t.bindView(r.context);},jQuery.proxy(this.onError,this));}else{var d=this.getView().getModel().createEntry("/"+this.sEntitySet,{groupId:this._sDeferredGroupId});d._bLocalBinding=true;if(this.oQuickCreateAPI){this.oQuickCreateAPI.updateDraftID(d.getPath());}this._initializeObject(d,"FieldGroup");this.bindView(d);}},onChange:function(e){if(this.bDraftEnabled){this.oTemplateUtils.oCommonEventHandlers.onChange(e);}},onCreatePress:function(e){var t=this;this._createButton=e.getSource();this._createButton.setEnabled(false);this.setBusy(true);var r=function(R){t.setBusy(false);var f=null;var o=[];var p={key:"__metadata",matchCallback:function(h,i,j){o.push(i);return false;}};O.findObjects(R,p);var g=t.oEntityTypeMeta.namespace+"."+t.oEntityTypeMeta.name;jQuery.each(o,function(i,h){if(!f&&h.__metadata&&h.__metadata.type===g){var k=t.getView().getModel().getKey(h);f=new C(t.getView().getModel(),"/"+k);}});if(f){M.show(t.oTemplateUtils.oCommonUtils.getText("QuickCreate_Success_CreateObject"));if(t.oQuickCreateAPI){t.oQuickCreateAPI.objectCreated(f);}}else{this._showErrorMessage({message:t.oTemplateUtils.oCommonUtils.getText("QuickCreate_No_Created_Object")});}};var d=function(E){t.setBusy(false);if(t._createButton){t._createButton.setEnabled(true);}t.onError(E);};if(this.bDraftEnabled){this.oDraftController.activateDraftEntity(this.getView().getBindingContext()).then(r,d);}else{var f=this.getView().getBindingContext();var m=this.getView().getModel().getProperty(f.getPath(),f,true);var p={key:"results",matchCallback:function(g,h,i){if(h.__nestedKey&&Array.isArray(i)){g[h.__nestedKey]=i;}return true;},maxNestedLevel:5};O.findObjects(m,p);p={key:"__metadata",matchCallback:function(g,h,i){delete h["__metadata"];return true;},maxNestedLevel:5};O.findObjects(m,p);this.getView().getModel().create("/"+this.sEntitySet,m,{success:r,error:d});}},onAddLineItemPress:function(e){var t=this;this.setBusy(true);var d=this.getView().getBindingContext();var f=function(s){t._createLineItem(d).then(function(o){t._refreshLineItems();if(t.oQuickCreateAPI){t.oQuickCreateAPI.calculateViewHeight(t.getView(),true);}t.setBusy(false);},jQuery.proxy(t.onError,t));};if(this.bDraftEnabled){this.oTemplateUtils.oServices.oTransactionController.triggerSubmitChanges().then(function(s){f(s);},jQuery.proxy(this.onError,this));}else{f();}},onRemoveLineItemPress:function(e){var t=this;this.setBusy(true);var d=e.getSource().getBindingContext();if(this.bDraftEnabled){this.oTemplateUtils.oServices.oTransactionController.triggerSubmitChanges().then(function(r){t._deleteLineItem(d);},jQuery.proxy(function(E){this.setBusy(false);this.onError(E);},this));}else{this.getView().getModel().deleteCreatedEntry(d);this.setBusy(false);if(this.oQuickCreateAPI){this.oQuickCreateAPI.calculateViewHeight(this.getView(),false);}this._refreshLineItems();}},bindView:function(o){this.setBusy(false);if(this.getView().getModel(this._sQuickCreateUIModelName).getProperty("/draftExists")===false){return;}if(o._bLocalBinding){this._setBindingContext(o);if(!this.bFormEnabled){if(typeof this.getView().getModel()._submitRequest==='function'){this.getView().getModel()._submitRequest=function(){};}}this._refreshLineItems();}else{B.prototype.bindView.apply(this,arguments);}this._updateFieldControl(o);},hasLineItemAnnotation:function(){var i=this._getFormatterInterface();var m=a.getMetaModelContextForFacetType(i,this.oEntityTypeMeta.namespace+"."+this.oEntityTypeMeta.name,"LineItem");return m!==null;},_onLineItemsFound:function(e){if(!this.hasLineItemAnnotation()){return;}var n=e.getParameter("numberOfLineItems");if(n<=0){return;}this.setBusy(true);var m=this.getView().getBindingContext();var p=[];for(var i=0;i<n;i++){p.push(this._createLineItem(m));}Promise.all(p).then(jQuery.proxy(function(r){this._refreshLineItems();this.setBusy(false);},this));},_createLineItem:function(m){var t=this;var i=this._getFormatterInterface(m);var o=this.getView().getModel().getMetaModel();var d=a.getMetaModelContextForFacetType(i,this.oEntityTypeMeta.namespace+"."+this.oEntityTypeMeta.name,"LineItem");var s=b.getNavigationPath(d);s=s.replace(/[{}]/g,'');var l=o.getODataAssociationEnd(this.oEntityTypeMeta,s);var L=o.getODataEntityType(l.type);if(this.bDraftEnabled){return this.oDraftController.createNewDraftEntity(L.name,m.sPath+"/"+s);}else{return new Promise(function(r,e){var f=t.getView().getModel().createEntry(m.sPath+"/"+s,{groupId:t._sDeferredGroupId});t._initializeObject(f,"LineItem");r(f);});}},_deleteLineItem:function(o){this.oTemplateUtils.oServices.oTransactionController.deleteEntity(o).then(jQuery.proxy(function(r){this._refreshLineItems();this.setBusy(false);if(this.oQuickCreateAPI){this.oQuickCreateAPI.calculateViewHeight(this.getView(),false);}},this),jQuery.proxy(function(e){this.setBusy(false);this.onError(e);},this));},_onSmartFieldAfterRendering:function(e){if(typeof e.srcControl.setEnabled=='function'){e.srcControl.setEnabled(this.bFormEnabled);}if(this.oQuickCreateAPI){this.oQuickCreateAPI.calculateViewHeight(this.getView(),true);}jQuery(".copilotQuickCreateContainerBox .sapQuickCreateFieldGroup label").css("text-align","");jQuery(".sapQuickActionCreateButtonContainer > div").addClass("sapUiSmallMarginEnd");jQuery(".sapQuickActionCreateButtonContainer .sapMBtnInner").css("padding","0");},_refreshLineItems:function(){if(this._lineItemsTable){var d=this.getView().getBindingContext();if(d&&d._bLocalBinding){O.restoreLineItemReferences(this.oEntityTypeMeta.namespace+"."+this.oEntityTypeMeta.name,d);this._lineItemsTable.getModel().updateBindings();}else{this._lineItemsTable.getModel().refresh();}}},onTableUpdateStarted:function(e){this._lineItemsTable=e.getSource();},onTableUpdateFinished:function(e){this._updateFieldControl();},_initializeObject:function(o,f){var m=this.getView().getBindingContext()?this.getView().getBindingContext():o;var p=a.getAllPropertyPathsFromFacet(m,f);if(p&&p.length>0){O.initializeObjectProperties(o,p,{groupId:this._sDeferredGroupId});}},_updateFieldControl:function(o){var d=o?o:this.getView().getBindingContext();if(d&&this.getView().getModel().getProperty(d.getPath()+"/Update_mc")!==undefined){this.getView().getModel().setProperty(d.getPath()+"/Update_mc",true);}if(d){var h=a.getAllPropertyPathsFromFacet(d,"FieldGroup");var f=0;jQuery.each(h,jQuery.proxy(function(i,p){f=this.getView().getModel().getProperty(d.getPath()+"/"+p+"_fc");if(f!==undefined&&(f===0||f===1)){if(p.indexOf("BillToParty")>=0||p.indexOf("CustomerContact")>=0){this.getView().getModel().setProperty(d.getPath()+"/"+p+"_fc",7);}else{this.getView().getModel().setProperty(d.getPath()+"/"+p+"_fc",3);}}},this));}}});return c;},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.QuickView.view.QuickView.controller')){jQuery.sap.declare('sap.suite.ui.generic.template.QuickView.view.QuickView.controller');jQuery.sap.require('sap.ui.model.Context');sap.ui.define("sap/suite/ui/generic/template/QuickView/view/QuickView.controller",["sap/ui/model/Context","../../js/QuickTemplates/QuickActionBaseController"],function(C,B){"use strict";return B.extend("sap.suite.ui.generic.template.QuickView.view.QuickView",{_initialize:function(){if(!this._bIsInitialized){B.prototype._initialize.apply(this);this.sEntityPath=decodeURIComponent(this.getOwnerComponent().getAppComponent().getComponentData().startupParameters["entityPath"]);}},_onMetaModelLoaded:function(){var c=new C(this.getView().getModel(),this.sEntityPath);this.bindView(c);}});},true);};if(!jQuery.sap.isDeclared('sap.suite.ui.generic.template.extensionAPI.ReuseComponentSupport')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
jQuery.sap.declare('sap.suite.ui.generic.template.extensionAPI.ReuseComponentSupport');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.UIComponent');jQuery.sap.require('sap.ui.model.json.JSONModel');sap.ui.define("sap/suite/ui/generic/template/extensionAPI/ReuseComponentSupport",["jquery.sap.global","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/extensionAPI/extensionAPI"],function(q,U,J,e){"use strict";var R={},j="sap.suite.ui.generic.template.extensionAPI.ReuseComponentSupport";function a(c,C){c.attachEvent("modelContextChange",function(){var D=this.getBindingContext(),M=c.getModel(),p={defaultModelAvailable:!!M,model:M,bindingContextPath:D&&D.getPath(),bindingContext:D,firstTime:c._stContext.firstTime};q.sap.log.debug(c.getId()+":"+c.getMetadata().getName()+": modelAvailable="+p.defaultModelAvailable+" : context="+p.bindingContextPath,j);if(p.defaultModelAvailable&&p.bindingContextPath&&c._stContext.lastBindingContextPath!==p.bindingContextPath){c._stContext.lastBindingContextPath=p.bindingContextPath;if(c._stContext.firstTime){c._stContext.extensionAPIPromise=e.getExtensionAPIPromise(this.oContainer);c._stContext.firstTime=false;}C(p,c._stContext.extensionAPIPromise);}});}function d(p,E){var c=(p.firstTime&&this.stStart)||this.stRefresh;if(c){E.then(c.bind(this,p.model,p.bindingContext));}}function g(){if(!this._oComponentModel){this._oComponentModel=new J({});}return this._oComponentModel;}function m(c,C){c._stContext={lastBindingContextPath:"",firstTime:true};if(c.stRefresh||c.stStart){a(c,d.bind(c));}if(C){c.setProperty=function(n,v){U.prototype.setProperty.apply(this,arguments);this.getComponentModel().setProperty("/"+n,v);q.sap.log.debug(this.getId()+":"+this.getMetadata().getName()+": setProperty "+n+"="+v,j);};c.getComponentModel=g.bind(c);c.setModel(c.getComponentModel(),C);}}R.mixInto=function(c,C){m(c,C);};return R;});};
