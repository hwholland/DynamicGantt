sap.ui.define(["sap/suite/ui/generic/template/lib/TemplateAssembler"],function(T){"use strict";function g(c,C){var v;function b(){if(!v){return;}var r=c.getRouter();var p=r&&r.oHashChanger&&r.oHashChanger.getHash();if(!p){return;}p=p.split("?")[0];var s=p.split("/");if(s[0]===""||s[0]==="#"){s.splice(0,1);}s.pop();v.bindBreadCrumbs(s);}return{onActivate:function(B){var u=c.getModel("ui");if(C.getEditableNDC()){u.setProperty("/editable",true);}else if(v&&!v.isDraftEnabled()){u.setProperty("/editable",false);}v.onComponentActivate(B);},forView:{registerView:function(t){v=t;}},refreshBinding:function(u,r){if(u){var e=c.getComponentContainer().getElementBinding();if(e){e.refresh(true);}}else{v.refreshFacets(r);}},overwrite:{updateBindingContext:function(){sap.suite.ui.generic.template.lib.TemplateComponent.prototype.updateBindingContext.apply(c,arguments);var B=c.getBindingContext();if(B){c.getModel().getMetaModel().loaded().then(function(){var t=c.getModel("_templPriv");t.setProperty("/generic/draftIndicatorState",sap.m.DraftIndicatorState.Clear);var a=B.getObject();if(a){var u=c.getModel("ui");var d=c.getAppComponent().getTransactionController().getDraftController();var D=d.getDraftContext();var i=D.hasDraft(B)&&!a.IsActiveEntity;var h=a.HasActiveEntity;if(C.getCreateMode()){u.setProperty("/createMode",true);u.setProperty("/editable",true);u.setProperty("/enabled",true);}else if(i){if(h){u.setProperty("/createMode",false);u.setProperty("/editable",true);u.setProperty("/enabled",true);}else{u.setProperty("/createMode",true);u.setProperty("/editable",true);u.setProperty("/enabled",true);}}else{u.setProperty("/createMode",false);u.setProperty("/editable",C.getEditableNDC());if(a.hasOwnProperty("HasDraftEntity")&&a.HasDraftEntity&&D.hasSiblingEntity(c.getEntitySet())){u.setProperty("/enabled",false);c.getModel().read(B.getPath(),{urlParameters:{"$expand":"SiblingEntity,DraftAdministrativeData"},success:function(r){var s=c.getModel().getContext("/"+c.getModel().getKey(r.SiblingEntity));if(s){v.draftResume(s,a,r.DraftAdministrativeData);}u.setProperty("/enabled",true);}});}else{u.setProperty("/enabled",true);}}}});b();}}}};}return T.getTemplateComponent(g,"sap.suite.ui.generic.template.ObjectPage.Component",{metadata:{library:"sap.suite.ui.generic.template",properties:{"templateName":{"type":"string","defaultValue":"sap.suite.ui.generic.template.ObjectPage.view.Details"},"showRelatedApps":{"type":"boolean","defaultValue":"false"},"editableHeaderContent":{"type":"boolean","defaultValue":"false"},"gridTable":"boolean"},"manifest":"json"}});});
