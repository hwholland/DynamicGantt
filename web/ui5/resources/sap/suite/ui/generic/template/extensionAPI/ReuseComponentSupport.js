/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/suite/ui/generic/template/extensionAPI/extensionAPI"],function(q,U,J,e){"use strict";var R={},j="sap.suite.ui.generic.template.extensionAPI.ReuseComponentSupport";function a(c,C){c.attachEvent("modelContextChange",function(){var D=this.getBindingContext(),M=c.getModel(),p={defaultModelAvailable:!!M,model:M,bindingContextPath:D&&D.getPath(),bindingContext:D,firstTime:c._stContext.firstTime};q.sap.log.debug(c.getId()+":"+c.getMetadata().getName()+": modelAvailable="+p.defaultModelAvailable+" : context="+p.bindingContextPath,j);if(p.defaultModelAvailable&&p.bindingContextPath&&c._stContext.lastBindingContextPath!==p.bindingContextPath){c._stContext.lastBindingContextPath=p.bindingContextPath;if(c._stContext.firstTime){c._stContext.extensionAPIPromise=e.getExtensionAPIPromise(this.oContainer);c._stContext.firstTime=false;}C(p,c._stContext.extensionAPIPromise);}});}function d(p,E){var c=(p.firstTime&&this.stStart)||this.stRefresh;if(c){E.then(c.bind(this,p.model,p.bindingContext));}}function g(){if(!this._oComponentModel){this._oComponentModel=new J({});}return this._oComponentModel;}function m(c,C){c._stContext={lastBindingContextPath:"",firstTime:true};if(c.stRefresh||c.stStart){a(c,d.bind(c));}if(C){c.setProperty=function(n,v){U.prototype.setProperty.apply(this,arguments);this.getComponentModel().setProperty("/"+n,v);q.sap.log.debug(this.getId()+":"+this.getMetadata().getName()+": setProperty "+n+"="+v,j);};c.getComponentModel=g.bind(c);c.setModel(c.getComponentModel(),C);}}R.mixInto=function(c,C){m(c,C);};return R;});
