sap.ui.require.preload({
	"web/ui5/resources/sap/ovp/app/Component-dbg.js": "!function(){\"use strict\";jQuery.sap.declare(\"sap.ovp.app.Component\"),jQuery.sap.require(\"sap.ui.model.odata.AnnotationHelper\"),sap.ui.core.UIComponent.extend(\"sap.ovp.app.Component\",{metadata:{routing:{config:{routerClass:sap.ui.core.routing.Router},targets:{},routes:[]},properties:{cardContainerFragment:{type:\"string\",defaultValue:\"sap.ovp.app.CardContainer\"},dashboardLayoutUtil:{type:\"sap.ovp.ui.DashboardLayoutUtil\"}},version:\"1.38.10\",library:\"sap.ovp.app\",dependencies:{libs:[\"sap.m\",\"sap.ui.comp\",\"sap.uxap\"],components:[]},config:{fullWidth:!0,hideLightBackground:!0}},_addModelsMeasurements:function(){var e,t,a=this.oModels;for(t in a)(e=this.getModel(t)).getMetaModel()&&this._addModelMeasurements(e,t)},_addModelMeasurements:function(e,t){var a=\"ovp:ModelLoading-\"+t,o=\"ovp:ModelBatchCall-\"+t+\":\";jQuery.sap.measure.start(a,\"Component createContent -> MetaData loaded\",\"ovp\"),e.getMetaModel().loaded().then(function(){jQuery.sap.measure.end(a)}),e.attachBatchRequestSent(function(e){jQuery.sap.measure.start(o+e.getParameter(\"ID\"),\"BatchRequestSent -> BatchRequestCompleted\",\"ovp\")}),e.attachBatchRequestCompleted(function(e){jQuery.sap.measure.end(o+e.getParameter(\"ID\"))})},getOvpConfig:function(){for(var e,t=[],a=this.getMetadata();a&&\"sap.ovp.app\"!==a.getComponentName();)(e=a.getManifestEntry(\"sap.ovp\"))&&t.unshift(e),a=a.getParent();return t.unshift({}),t.unshift(!0),e=jQuery.extend.apply(jQuery,t)},createXMLView:function(e){jQuery.sap.measure.start(\"ovp:AppCreateContent\",\"OVP app Component createContent\",\"ovp\"),this._addModelsMeasurements(),this.getRouter().initialize();var t=this.getMetadata().getManifestEntry(\"sap.app\"),a=this.getMetadata().getManifestEntry(\"sap.ui\"),o=jQuery.sap.getObject(\"icons.icon\",void 0,a),r=this.getMetadata().getComponentName();e.baseUrl=jQuery.sap.getModulePath(r);var n=new sap.ui.model.json.JSONModel(e);n.setProperty(\"/title\",jQuery.sap.getObject(\"title\",void 0,t)),n.setProperty(\"/description\",jQuery.sap.getObject(\"description\",void 0,t)),o&&(o.indexOf(\"sap-icon\")<0&&\"/\"!==o.charAt(0)&&(o=e.baseUrl+\"/\"+o),n.setProperty(\"/icon\",o));var i,s=e.cards,p=[];for(var d in s)s.hasOwnProperty(d)&&s[d]&&((i=s[d]).id=d,p.push(i));if(p.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),n.setProperty(\"/cards\",p),e.containerLayout&&\"dashboard\"===e.containerLayout){jQuery.sap.require(\"sap.ovp.ui.DashboardLayoutUtil\"),n.setProperty(\"/cardContainerFragment\",\"sap.ovp.app.DashboardCardContainer\");var u=new sap.ovp.ui.DashboardLayoutUtil(n);this.setDashboardLayoutUtil(u)}else n.setProperty(\"/cardContainerFragment\",this.getCardContainerFragment());var l=this.createMapForValueHelpEntity(e);n.setProperty(\"/ValueHelpEntityMap\",l),this.setModel(n,\"ui\");var g=this.getModel(e.globalFilterModel);this.setModel(g);var c=g.getMetaModel().getODataEntityType(g.getMetaModel().getODataEntityContainer().namespace+\".\"+e.globalFilterEntityType,!0),y=sap.ui.view({height:\"100%\",preprocessors:{xml:{bindingContexts:{ui:n.createBindingContext(\"/\"),meta:g.getMetaModel().createBindingContext(c)},models:{ui:n,meta:g.getMetaModel()}}},type:sap.ui.core.mvc.ViewType.XML,viewName:\"sap.ovp.app.Main\"});return jQuery.sap.measure.end(\"ovp:AppCreateContent\"),y},setContainer:function(){var e=this.getOvpConfig(),t=this.getModel(e.globalFilterModel);sap.ui.core.UIComponent.prototype.setContainer.apply(this,arguments),t&&t.getMetaModel().loaded().then(function(){this.runAsOwner(function(){var t=this.createXMLView(e);this.setAggregation(\"rootControl\",t),this.oContainer.invalidate()}.bind(this))}.bind(this))},createMapForEntityContainer:function(e){for(var t={},a=e.entitySet,o=0;o<a.length;o++)t[a[o].name]=a[o].entityType;return t},createMapForValueHelpEntity:function(e){var t=this.getModel(e.globalFilterModel),a=[],o=t.getMetaModel().getODataEntityType(t.getMetaModel().getODataEntityContainer().namespace+\".\"+e.globalFilterEntityType);if(!o)return a;var r=[];r.push(o);var n=0,i=!1,s=this.createMapForEntityContainer(t.getMetaModel().getODataEntityContainer());for(o.navigationProperty&&(i=!0);0!=r.length;){for(var p=r.shift(),d=0;d<p.property.length;d++){var u=p.property[d];u[\"com.sap.vocabularies.Common.v1.ValueList\"]&&a.push(s[u[\"com.sap.vocabularies.Common.v1.ValueList\"].CollectionPath.String])}if(!i||!o.navigationProperty[n])break;var l=t.getMetaModel().getODataAssociationEnd(o,o.navigationProperty[n].name).type,g=t.getMetaModel().getODataEntityType(l);r.push(g),n++}return a}})}();",
	"web/ui5/resources/sap/ovp/app/Component.js": "!function(){\"use strict\";jQuery.sap.declare(\"sap.ovp.app.Component\"),jQuery.sap.require(\"sap.ui.model.odata.AnnotationHelper\"),sap.ui.core.UIComponent.extend(\"sap.ovp.app.Component\",{metadata:{routing:{config:{routerClass:sap.ui.core.routing.Router},targets:{},routes:[]},properties:{cardContainerFragment:{type:\"string\",defaultValue:\"sap.ovp.app.CardContainer\"},dashboardLayoutUtil:{type:\"sap.ovp.ui.DashboardLayoutUtil\"}},version:\"1.38.10\",library:\"sap.ovp.app\",dependencies:{libs:[\"sap.m\",\"sap.ui.comp\",\"sap.uxap\"],components:[]},config:{fullWidth:!0,hideLightBackground:!0}},_addModelsMeasurements:function(){var e,t,a=this.oModels;for(t in a)(e=this.getModel(t)).getMetaModel()&&this._addModelMeasurements(e,t)},_addModelMeasurements:function(e,t){var a=\"ovp:ModelLoading-\"+t,o=\"ovp:ModelBatchCall-\"+t+\":\";jQuery.sap.measure.start(a,\"Component createContent -> MetaData loaded\",\"ovp\"),e.getMetaModel().loaded().then(function(){jQuery.sap.measure.end(a)}),e.attachBatchRequestSent(function(e){jQuery.sap.measure.start(o+e.getParameter(\"ID\"),\"BatchRequestSent -> BatchRequestCompleted\",\"ovp\")}),e.attachBatchRequestCompleted(function(e){jQuery.sap.measure.end(o+e.getParameter(\"ID\"))})},getOvpConfig:function(){for(var e,t=[],a=this.getMetadata();a&&\"sap.ovp.app\"!==a.getComponentName();)(e=a.getManifestEntry(\"sap.ovp\"))&&t.unshift(e),a=a.getParent();return t.unshift({}),t.unshift(!0),e=jQuery.extend.apply(jQuery,t)},createXMLView:function(e){jQuery.sap.measure.start(\"ovp:AppCreateContent\",\"OVP app Component createContent\",\"ovp\"),this._addModelsMeasurements(),this.getRouter().initialize();var t=this.getMetadata().getManifestEntry(\"sap.app\"),a=this.getMetadata().getManifestEntry(\"sap.ui\"),o=jQuery.sap.getObject(\"icons.icon\",void 0,a),r=this.getMetadata().getComponentName();e.baseUrl=jQuery.sap.getModulePath(r);var n=new sap.ui.model.json.JSONModel(e);n.setProperty(\"/title\",jQuery.sap.getObject(\"title\",void 0,t)),n.setProperty(\"/description\",jQuery.sap.getObject(\"description\",void 0,t)),o&&(o.indexOf(\"sap-icon\")<0&&\"/\"!==o.charAt(0)&&(o=e.baseUrl+\"/\"+o),n.setProperty(\"/icon\",o));var i,s=e.cards,p=[];for(var d in s)s.hasOwnProperty(d)&&s[d]&&((i=s[d]).id=d,p.push(i));if(p.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),n.setProperty(\"/cards\",p),e.containerLayout&&\"dashboard\"===e.containerLayout){jQuery.sap.require(\"sap.ovp.ui.DashboardLayoutUtil\"),n.setProperty(\"/cardContainerFragment\",\"sap.ovp.app.DashboardCardContainer\");var u=new sap.ovp.ui.DashboardLayoutUtil(n);this.setDashboardLayoutUtil(u)}else n.setProperty(\"/cardContainerFragment\",this.getCardContainerFragment());var l=this.createMapForValueHelpEntity(e);n.setProperty(\"/ValueHelpEntityMap\",l),this.setModel(n,\"ui\");var g=this.getModel(e.globalFilterModel);this.setModel(g);var c=g.getMetaModel().getODataEntityType(g.getMetaModel().getODataEntityContainer().namespace+\".\"+e.globalFilterEntityType,!0),y=sap.ui.view({height:\"100%\",preprocessors:{xml:{bindingContexts:{ui:n.createBindingContext(\"/\"),meta:g.getMetaModel().createBindingContext(c)},models:{ui:n,meta:g.getMetaModel()}}},type:sap.ui.core.mvc.ViewType.XML,viewName:\"sap.ovp.app.Main\"});return jQuery.sap.measure.end(\"ovp:AppCreateContent\"),y},setContainer:function(){var e=this.getOvpConfig(),t=this.getModel(e.globalFilterModel);sap.ui.core.UIComponent.prototype.setContainer.apply(this,arguments),t&&t.getMetaModel().loaded().then(function(){this.runAsOwner(function(){var t=this.createXMLView(e);this.setAggregation(\"rootControl\",t),this.oContainer.invalidate()}.bind(this))}.bind(this))},createMapForEntityContainer:function(e){for(var t={},a=e.entitySet,o=0;o<a.length;o++)t[a[o].name]=a[o].entityType;return t},createMapForValueHelpEntity:function(e){var t=this.getModel(e.globalFilterModel),a=[],o=t.getMetaModel().getODataEntityType(t.getMetaModel().getODataEntityContainer().namespace+\".\"+e.globalFilterEntityType);if(!o)return a;var r=[];r.push(o);var n=0,i=!1,s=this.createMapForEntityContainer(t.getMetaModel().getODataEntityContainer());for(o.navigationProperty&&(i=!0);0!=r.length;){for(var p=r.shift(),d=0;d<p.property.length;d++){var u=p.property[d];u[\"com.sap.vocabularies.Common.v1.ValueList\"]&&a.push(s[u[\"com.sap.vocabularies.Common.v1.ValueList\"].CollectionPath.String])}if(!i||!o.navigationProperty[n])break;var l=t.getMetaModel().getODataAssociationEnd(o,o.navigationProperty[n].name).type,g=t.getMetaModel().getODataEntityType(l);r.push(g),n++}return a}})}();",
	"web/ui5/resources/sap/ovp/app/Main-dbg.controller.js": "!function(){\"use strict\";jQuery.sap.require(\"sap.ui.model.odata.ODataUtils\"),jQuery.sap.require(\"sap.ovp.cards.generic.Component\"),jQuery.sap.require(\"sap.ui.generic.app.navigation.service.NavigationHandler\"),jQuery.sap.require(\"sap.m.MessageBox\"),sap.ui.controller(\"sap.ovp.app.Main\",{onInit:function(){this.oCardsModels={},this.oLoadedComponents={},jQuery.sap.measure.start(\"ovp:GlobalFilter\",\"Main Controller init -> Global Filter loaded\",\"ovp\"),jQuery.sap.measure.start(\"ovp:Personalization\",\"Main Controller init -> Personalization loaded\",\"ovp\"),this.isInitialLoading=!0,this._initSmartVariantManagement(),this.getOwnerComponent()&&(this.oValueHelpMap=this.getOwnerComponent().getModel(\"ui\").getProperty(\"/ValueHelpEntityMap\")),this.getLayout().addStyleClass(\"ovpLayoutElement\"),this.oState={},this.oState.oSmartFilterbar=this.byId(\"ovpGlobalFilter\"),this._initGlobalFilter()},onBeforeRendering:function(){},onAfterRendering:function(){this.initialized||(this.initialized=!0,this.oPersistencyVariantPromise.then(function(t){var e;jQuery.sap.measure.end(\"ovp:Personalization\"),this.persistencyVariantLoaded=!0,this.aManifestOrderedCards=this._getCardArrayAsVariantFormat(this.getLayout().getContent()),\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName()?this.aOrderedCards=this._mergeLrepDashboardLayout(this.aManifestOrderedCards,t):this.aOrderedCards=this._mergeCards(this.aManifestOrderedCards,t),this._updateLayoutWithOrderedCards(),this.isDragAndDropEnabled()&&this._initShowHideCardsButton(),jQuery.sap.measure.start(\"ovp:CreateLoadingCards\",\"Create Loading cards\",\"ovp\");for(var a=0;a<this.aOrderedCards.length;a++)this.aOrderedCards[a].visibility&&(e=this._getCardFromManifest(this.aOrderedCards[a].id))&&this.createLoadingCard(e);jQuery.sap.measure.end(\"ovp:CreateLoadingCards\"),setTimeout(function(){this.getLayout().addStyleClass(\"ovpLayoutElementShow\")}.bind(this),0),setTimeout(function(){jQuery.sap.measure.start(\"ovp:CreateCards\",\"Create cards loop\",\"ovp\");for(var t=0;t<this.aOrderedCards.length;t++)this.aOrderedCards[t].visibility&&(e=this._getCardFromManifest(this.aOrderedCards[t].id))&&(e.settings.baseUrl=this._getBaseUrl(),this._initCardModel(e.model),this._loadCardComponent(e.template),this.createCard(e));jQuery.sap.measure.end(\"ovp:CreateCards\")}.bind(this),10),this.busyDialog&&this.busyDialog.close()}.bind(this),function(t){jQuery.sap.log.error(\"Could not load information from LREP Persistency\"),jQuery.sap.log.error(t)}),sap.ui.Device.system.phone&&(jQuery.sap.require(\"sap.ovp.ui.SmartphoneHeaderToggle\"),sap.ovp.ui.SmartphoneHeaderToggle.enable(this)),setTimeout(function(){this.persistencyVariantLoaded||(this.busyDialog=new sap.m.BusyDialog({text:this._getLibraryResourceBundle().getText(\"loading_dialog_text\")}),this.busyDialog.open(),this.busyDialog.addStyleClass(\"sapOVPBusyDialog\"))}.bind(this),500))},_getLibraryResourceBundle:function(){return this.oLibraryResourceBundle||(this.oLibraryResourceBundle=sap.ui.getCore().getLibraryResourceBundle(\"sap.ovp\")),this.oLibraryResourceBundle},_getCardsModel:function(){var t=this.getView().getModel(\"ui\");return this.oCards||(this.oCards=t.getProperty(\"/cards\")),this.oCards},_getBaseUrl:function(){var t=this.getView().getModel(\"ui\");return this.sBaseUrl||(this.sBaseUrl=t.getProperty(\"/baseUrl\")),this.sBaseUrl},_getCardFromManifest:function(t){for(var e=this._getCardsModel(),a=0;a<e.length;a++)if(e[a].id===t)return e[a];return null},_getCardArrayAsVariantFormat:function(t){for(var e=[],a=0;a<t.length;a++)e.push({id:this._getCardId(t[a].getId()),visibility:t[a].getVisible()});return e},_mergeCards:function(t,e){for(var a,i,r=e&&e.cards?e.cards:[],s=[],o=t&&t.length?t:[],n=0;n<r.length;n++){i=r[n].visibility;for(var d=0;d<o.length;d++)if(a=o[d].id,r[n].id===a){s.push({id:a,visibility:i});break}}for(d=0;d<o.length;d++){var l=!1;a=o[d].id,i=o[d].visibility;for(n=0;!l&&n<s.length;n++)s[n].id===a&&(l=!0);l||s.push({id:a,visibility:i})}return s},_mergeLrepDashboardLayout:function(t,e){var a=[],i=this.getLayout().getModel(\"ui\"),r={},s=null,o=i.getProperty(\"/dashboardLayout\");if(o){var n={};for(s in o)o.hasOwnProperty(s)&&o[s]&&((n=o[s]).id=s,n.__ovpDBLVarSource=\"manifest\",n.__ovpDBLVarId=\"C\"+parseInt(n.id.replace(/[^0-9\\.]/g,\"\"),10),r[n.__ovpDBLVarId]=n)}if(this.getLayout().getDashboardLayoutModel().setManifestLayoutsJSON(JSON.stringify(r)),this._bDashboardLayoutLrepActive=!0,e&&e.dashboardLayout)for(s in e.dashboardLayout)e.dashboardLayout[s]&&(e.dashboardLayout[s].__ovpDBLVarSource=\"lrep\",r[s]=e.dashboardLayout[s]);if(this.getLayout().getDashboardLayoutModel().setLayoutVars(r),i.setProperty(\"/initialDashboardLayout\",[this.getLayout().getDashboardLayoutUtil().buildLayout(jQuery(window).width())]),s){var d=i.getProperty(\"/cards\"),l=r[s];d&&l&&(a=this._initDashboardLayoutCardVisibility(d,l,t))}return 0===a.length&&(a=this._mergeCards(this.aManifestOrderedCards,n)),a},_initDashboardLayoutCardVisibility:function(t,e,a){var i,r=[],s=0,o=null,n=!0;if(e&&t){for(s=0;s<t.length;s++)n=!(o=e[i=t[s].id])||!o.hasOwnProperty(\"visible\")||o.visible,r.push({id:i,visibility:n});if(a&&a.length>0)for(s=0;s<a.length;s++)e[i=a[s].id]||r.push({id:i,visibility:a[s].visibility})}return r},_updateLayoutWithOrderedCards:function(){var t=this.getLayout(),e=this.aOrderedCards;t.removeAllContent();for(var a=0;a<e.length;a++){var i=this.getView().byId(e[a].id);i.setVisible(e[a].visibility),t.addContent(i)}},_updateDashboardLayoutCards:function(t){\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName()&&this.getLayout().getDashboardLayoutUtil()&&this.getLayout().getDashboardLayoutUtil().updateCardVisibility(t)},_resetDashboardLayout:function(){\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName()&&(this.getLayout().getDashboardLayoutUtil()&&this.getLayout().getDashboardLayoutUtil().resetToManifest(),this.getLayout().rerender())},verifyGlobalFilterLoaded:function(){return!!this.getGlobalFilter().search()},onGlobalFilterChange:function(){this.filterChanged=!0},onGlobalFilterSearch:function(){if(this.filterChanged){var t=\"ovp-\"+(new Date).getTime();for(var e in this.oCardsModels)this.oCardsModels.hasOwnProperty(e)&&this.oCardsModels[e].refresh(!1,!1,t);this.filterChanged=!1}},_initGlobalFilter:function(){var t=this.getGlobalFilter();if(!t)return this._parseNavigationVariant(),void jQuery.sap.measure.end(\"ovp:GlobalFilter\");this.oGlobalFilterLodedPromise=new Promise(function(e,a){t.attachAfterVariantLoad(function(){this.oParseNavigationPromise.done(function(t,e,a){this._setNavigationVariantToGlobalFilter(t,e,a)}.bind(this)),this.oParseNavigationPromise.fail(function(){jQuery.sap.log.error(\"Could not parse navigation variant from URL\")}),this.oParseNavigationPromise.always(function(){t&&this.verifyGlobalFilterLoaded()&&e()}.bind(this))},this),t.attachInitialise(function(){this._parseNavigationVariant(),t.getCurrentVariantId()||(this.oParseNavigationPromise?(this.oParseNavigationPromise.done(function(t,e,a){t&&this._setNavigationVariantToGlobalFilter(t,e,a)}.bind(this)),this.oParseNavigationPromise.fail(function(){jQuery.sap.log.error(\"Could not parse navigation variant from URL\")}),this.oParseNavigationPromise.always(function(){t&&this.verifyGlobalFilterLoaded()&&e()}.bind(this))):t&&this.verifyGlobalFilterLoaded()&&e())},this),t.attachSearch(function(){e(),this.onGlobalFilterSearch()},this),t.attachFilterChange(this.onGlobalFilterChange,this)}.bind(this)),this.oGlobalFilterLodedPromise.then(function(t){jQuery.sap.measure.end(\"ovp:GlobalFilter\")})},_loadCardComponent:function(t){this.oLoadedComponents[t]||(jQuery.sap.measure.start(\"ovp:CardComponentLoad:\"+t,\"Card Component load\",\"ovp\"),this.oLoadedComponents[t]=sap.ui.component.load({name:t,url:jQuery.sap.getModulePath(t),async:!0}),this.oLoadedComponents[t].then(function(){jQuery.sap.measure.end(\"ovp:CardComponentLoad:\"+t)}))},_initCardModel:function(t){!this.oCardsModels[t]&&t&&(this.oCardsModels[t]=this.getView().getModel(t),this.oCardsModels[t].setUseBatch(!0),this.getGlobalFilter()&&this._overrideCardModelRead(this.oCardsModels[t]))},toggleFilterBar:function t(){var e=this.getGlobalFilter();function a(t,e,a){e.height(a),t.css(\"top\",0)}function i(t,e,a){e.height(0),t.css(\"top\",\"-\"+a+\"px\")}var r=e.getVisible();if(sap.ui.Device.system.phone||sap.ui.Device.system.tablet)e.setVisible(!r);else if(!t.animationInProcess)if(t.animationInProcess=!0,r){var s=jQuery(e.getDomRef()),o=jQuery(this.getView().byId(\"ovpGlobalFilterWrapper\").getDomRef()),n=o.height();a(s,o,n),o.height(),o.one(\"transitionend\",function(a){e.setVisible(!1),t.animationInProcess=!1}),i(s,o,n)}else e.setVisible(!0),setTimeout(function(){var r=jQuery(e.getDomRef()),s=jQuery(this.getView().byId(\"ovpGlobalFilterWrapper\").getDomRef()),o=r.outerHeight();i(r,s,o),s.height(),s.one(\"transitionend\",function(e){s.css(\"height\",\"auto\"),t.animationInProcess=!1}),a(r,s,o)}.bind(this))},_overrideCardModelRead:function(t){var e=t.read,a=this;t.read=function(){var i=a.getGlobalFilter().getFilters(),r=arguments[1];r||(r={},Array.prototype.push.call(arguments,r));var s=a._getEntityTypeFromPath(t,arguments[0],r.context),o=!1;if(a.oValueHelpMap&&-1!=a.oValueHelpMap.indexOf(s.entityType)&&(o=!0),s&&!o){var n=a._getEntityRelevantFilters(s,i);if(n.length>0){var d=-1,l=r.urlParameters;if(l)for(var u=0;u<l.length;u++)if(0===l[u].lastIndexOf(\"$filter=\",0)){d=u;break}d>=0?l[d]=l[d]+\"%20and%20\"+sap.ui.model.odata.ODataUtils.createFilterParams(n,t.oMetadata,s).substr(8):r.filters=n}}e.apply(t,arguments)}},_getEntityTypeFromPath:function(t,e,a){var i=sap.ui.model.odata.v2.ODataModel.prototype._normalizePath.apply(t,[e,a]);return sap.ui.model.odata.ODataMetadata.prototype._getEntityTypeByPath.apply(t.oMetadata,[i])},_getEntityRelevantFilters:function(t,e){var a=[];if(e.length)for(var i=e[0].aFilters,r=t.property,s=0;s<i.length;s++){var o;o=i[s].aFilters?i[s].aFilters[0].sPath:i[s].sPath;for(var n=0;n<r.length;n++)if(r[n].name===o){a.push(i[s]);break}}if(0!=a.length){var d=[];return d.push(new sap.ui.model.Filter(a,e[0].bAnd)),d}return a},_checkIsCardValid:function(t){var e,a,i=t+\".Component\";jQuery.sap.require(i);var r=jQuery.sap.getObject(i);return!!r&&((r===sap.ovp.cards.generic.Component||r.prototype instanceof sap.ovp.cards.generic.Component)&&(!((e=r.getMetadata())&&(a=e.getCustomizing())&&a[\"sap.ui.viewReplacements\"]&&a[\"sap.ui.viewReplacements\"][\"sap.ovp.cards.generic.Card\"])&&(r.prototype.createContent==sap.ovp.cards.generic.Component.prototype.createContent&&r.prototype.getPreprocessors==sap.ovp.cards.generic.Component.prototype.getPreprocessors)))},_createCardComponent:function(t,e,a){var i=\"ovp:CreateCard-\"+a.template+\":\"+a.id;jQuery.sap.measure.start(i,\"Create Card\",\"ovp\");var r=t.getModel(\"@i18n\");if(a.template&&this._checkIsCardValid(a.template)){var s={name:a.template,componentData:{model:e,i18n:r,cardId:a.id,settings:a.settings,appComponent:this.getOwnerComponent()}},o=this.getGlobalFilter();o&&(s.componentData.globalFilter={getFilterDataAsString:o.getDataSuiteFormat.bind(o)});var n=sap.ui.component(s),d=t.byId(a.id),l=d.getComponentInstance();d.setComponent(n),l&&setTimeout(function(){l.destroy()},0)}else jQuery.sap.log.error(\"Could not create Card from '\"+a.template+\"' template. Card is not valid.\");jQuery.sap.measure.end(i)},createLoadingCard:function(t){var e=jQuery.extend(!0,{},t,{template:\"sap.ovp.cards.loading\"});this._createCardComponent(this.getView(),void 0,e)},createCard:function(t){var e=this.getView(),a=e.getModel(t.model);Promise.all([a.getMetaModel().loaded(),this.oGlobalFilterLodedPromise,this.oLoadedComponents[t.template]]).then(function(){this._createCardComponent(e,a,t)}.bind(this),function(e){jQuery.sap.log.error(\"Can't load card with id:'\"+t.id+\"' and type:'\"+t.template+\"', reason:\"+e)})},_getCardId:function(t){var e=this.getView().getId()+\"--\";if(-1!=t.indexOf(e)){var a=t.indexOf(e)+e.length;return t.substr(a)}return t},_initSmartVariantManagement:function(){var t=this._createPersistencyControlForSmartVariantManagement(),e=new sap.ui.comp.smartvariants.PersonalizableInfo({type:\"OVPVariant\",keyName:\"persistencyKey\",control:t});this.oPersistencyVariantPromise=new Promise(function(a,i){this.smartVariandManagement=new sap.ui.comp.smartvariants.SmartVariantManagement({personalizableControls:e,initialise:function(e){var i=e.getParameters().variantKeys;i.length?a(this.smartVariandManagement.getVariantContent(t,i[0])):a(null)}.bind(this)}),this.smartVariandManagement.initialise()}.bind(this))},layoutChanged:function(){if(\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName())this._bDashboardLayoutLrepActive&&this.saveVariant();else{var t=this.getLayout().getContent();this.aOrderedCards=this._getCardArrayAsVariantFormat(t),this.saveVariant()}},saveVariant:function(t){var e=this;this.smartVariandManagement.getVariantsInfo(function(t){var a=null;t&&t.length>0&&(a=t[0].key);var i={name:\"Personalisation\",global:!1,overwrite:null!==a,key:a,def:!0};e.smartVariandManagement.fireSave(i)})},getLayout:function(){return this.getView().byId(\"ovpLayout\")},_createPersistencyControlForSmartVariantManagement:function(){var t=this;sap.ui.core.Control.extend(\"sap.ovp.app.PersistencyControl\",{metadata:{properties:{persistencyKey:{type:\"string\",group:\"Misc\",defaultValue:null}}}});var e=new sap.ovp.app.PersistencyControl({persistencyKey:\"ovpVariant\"});return e.fetchVariant=function(){if(t.isInitialLoading)return t.isInitialLoading=!1,{};var e=this.getLayout();if(e){if(\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName())return{dashboardLayout:this.getLayout().getLayoutDataJSON()};var a=e.getContent(),i=this._getCardArrayAsVariantFormat(a);return this.oOrderedCards=i,{cards:i}}jQuery.sap.log.error(\"Could not save persistency variant - 'ovpLayout' does not exists\")}.bind(this),e},_initShowHideCardsButton:function(){var t,e=sap.ushell.services.AppConfiguration;(t=(new sap.m.Button).addStyleClass(\"ovpManageCardsBtn\")).setIcon(\"sap-icon://dimension\"),t.setTooltip(this._getLibraryResourceBundle().getText(\"hideCardsBtn_tooltip\")),t.setText(this._getLibraryResourceBundle().getText(\"hideCardsBtn_title\")),t.attachPress(this._onCardMenuButtonPress.bind(this)),e.addApplicationSettingsButtons([t])},_onCardMenuButtonPress:function(){var t;function e(t,e){for(var a=0;a<t.length;a++)if(t[a].id==e)return a;return-1}function a(t,a){for(var i=-1,r=0;r<a.length;r++)if(i=t[r].id==a[r].id?r:e(t,a[r].id),a[r].visibility!=t[i].visibility)if(!0===a[r].visibility){var s=this._getCardFromManifest(a[r].id);s&&(this.createLoadingCard(s),s.settings.baseUrl=this._getBaseUrl(),this._initCardModel(s.model),this._loadCardComponent(s.template),this.createCard(s))}else{var o=this.getView().byId(a[r].id).getComponentInstance();o&&o.destroy()}}var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:\"id\",formatter:function(t){var e=this._getCardFromManifest(t).settings;return e.title?e.title:e.category?e.category:e.subTitle?e.subTitle:t}.bind(this)}}),new sap.m.Switch({state:\"{visibility}\",customTextOff:\" \",customTextOn:\" \",change:function(t){var e=t.oSource.getParent();e.toggleStyleClass(\"sapOVPHideCardsTableItem\"),e.getCells()[0].toggleStyleClass(\"sapOVPHideCardsDisabledCell\")},tooltip:this._getLibraryResourceBundle().getText(\"hideCards_switchTooltip\")})]}),r=new sap.m.Table(\"sapOVPHideCardsTable\",{backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.Inner,columns:[new sap.m.Column({vAlign:\"Middle\"}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Right,vAlign:\"Middle\",width:\"4.94rem\"})]});r.addStyleClass(\"sapOVPHideCardsTable\"),r.bindItems({path:\"/cards\",template:i});var s=r.onAfterRendering;r.onAfterRendering=function(t){s.apply(r,arguments);var e=t.srcControl.mAggregations.items;if(e)for(var a=0;a<e.length;a++)e[a].getCells()[1].getState()||(e[a].addStyleClass(\"sapOVPHideCardsTableItem\"),e[a].getCells()[0].addStyleClass(\"sapOVPHideCardsDisabledCell\"));setTimeout(function(){jQuery(\".sapMListTblRow\").first().focus()},200)};var o=new sap.m.Button(\"manageCardsokBtn\",{text:this._getLibraryResourceBundle().getText(\"okBtn\"),press:function(){var t=this.oDialog.getModel().getProperty(\"/cards\");a.apply(this,[this.aOrderedCards,t]),this.aOrderedCards=t,this._updateDashboardLayoutCards(this.aOrderedCards),this._updateLayoutWithOrderedCards(),this.saveVariant(),this.oDialog.close()}.bind(this)}),n=new sap.m.Button(\"manageCardsCancelBtn\",{text:this._getLibraryResourceBundle().getText(\"cancelBtn\"),press:function(){this.oDialog.close()}.bind(this)}),d=new sap.m.Button(\"manageCardsResetBtn\",{text:this._getLibraryResourceBundle().getText(\"resetBtn\"),press:function(){sap.m.MessageBox.show(this._getLibraryResourceBundle().getText(\"reset_cards_confirmation_msg\"),{id:\"resetCardsConfirmation\",icon:sap.m.MessageBox.Icon.QUESTION,title:this._getLibraryResourceBundle().getText(\"reset_cards_confirmation_title\"),actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],onClose:function(t){t===sap.m.MessageBox.Action.OK&&this.smartVariandManagement.getVariantsInfo(function(t){var e=null;t&&t.length>0&&(e=t[0].key,this.smartVariandManagement.fireManage({deleted:[e]})),a.apply(this,[this.aOrderedCards,this.aManifestOrderedCards]),this.aOrderedCards=this.aManifestOrderedCards,this._resetDashboardLayout(),this._updateDashboardLayoutCards(this.aOrderedCards),this._updateLayoutWithOrderedCards(),this.oDialog.close()}.bind(this))}.bind(this)})}.bind(this)});this.oDialog=new sap.m.Dialog({title:this._getLibraryResourceBundle().getText(\"hideCardsBtn_title\"),contentWidth:\"29.6rem\",contentHeight:\"50%\",stretch:sap.ui.Device.system.phone,content:r,buttons:[d,o,n],afterClose:function(){this.oDialog.destroy()}.bind(this)}).addStyleClass(\"sapOVPCardsVisibilityDialog\");var l=jQuery.extend(!0,[],this.aOrderedCards);t=new sap.ui.model.json.JSONModel({cards:l}),this.oDialog.setModel(t),this.oDialog.open()},isDragAndDropEnabled:function(){return!sap.ui.Device.system.phone},getGlobalFilter:function(){return this.oGlobalFilter||(this.oGlobalFilter=this.getView().byId(\"ovpGlobalFilter\")),this.oGlobalFilter},_parseNavigationVariant:function(){this.oNavigationHandler=this.oNavigationHandler||new sap.ui.generic.app.navigation.service.NavigationHandler(this),this.oParseNavigationPromise=this.oNavigationHandler.parseNavigation(),jQuery.sap.require(\"sap.ovp.cards.CommonUtils\"),sap.ovp.cards.CommonUtils.enable(this,this.oNavigationHandler)},_setNavigationVariantToGlobalFilter:function(t,e,a){if(\"iAppState\"===a){var i=this.getGlobalFilter();if(i)for(var r=new sap.ui.generic.app.navigation.service.SelectionVariant(t.selectionVariant),s=r.getParameterNames().concat(r.getSelectOptionsPropertyNames()),o=0;o<s.length;o++)i.addFieldToAdvancedArea(s[o])}}})}();",
	"web/ui5/resources/sap/ovp/app/Main.controller.js": "!function(){\"use strict\";jQuery.sap.require(\"sap.ui.model.odata.ODataUtils\"),jQuery.sap.require(\"sap.ovp.cards.generic.Component\"),jQuery.sap.require(\"sap.ui.generic.app.navigation.service.NavigationHandler\"),jQuery.sap.require(\"sap.m.MessageBox\"),sap.ui.controller(\"sap.ovp.app.Main\",{onInit:function(){this.oCardsModels={},this.oLoadedComponents={},jQuery.sap.measure.start(\"ovp:GlobalFilter\",\"Main Controller init -> Global Filter loaded\",\"ovp\"),jQuery.sap.measure.start(\"ovp:Personalization\",\"Main Controller init -> Personalization loaded\",\"ovp\"),this.isInitialLoading=!0,this._initSmartVariantManagement(),this.getOwnerComponent()&&(this.oValueHelpMap=this.getOwnerComponent().getModel(\"ui\").getProperty(\"/ValueHelpEntityMap\")),this.getLayout().addStyleClass(\"ovpLayoutElement\"),this.oState={},this.oState.oSmartFilterbar=this.byId(\"ovpGlobalFilter\"),this._initGlobalFilter()},onBeforeRendering:function(){},onAfterRendering:function(){this.initialized||(this.initialized=!0,this.oPersistencyVariantPromise.then(function(t){var e;jQuery.sap.measure.end(\"ovp:Personalization\"),this.persistencyVariantLoaded=!0,this.aManifestOrderedCards=this._getCardArrayAsVariantFormat(this.getLayout().getContent()),\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName()?this.aOrderedCards=this._mergeLrepDashboardLayout(this.aManifestOrderedCards,t):this.aOrderedCards=this._mergeCards(this.aManifestOrderedCards,t),this._updateLayoutWithOrderedCards(),this.isDragAndDropEnabled()&&this._initShowHideCardsButton(),jQuery.sap.measure.start(\"ovp:CreateLoadingCards\",\"Create Loading cards\",\"ovp\");for(var a=0;a<this.aOrderedCards.length;a++)this.aOrderedCards[a].visibility&&(e=this._getCardFromManifest(this.aOrderedCards[a].id))&&this.createLoadingCard(e);jQuery.sap.measure.end(\"ovp:CreateLoadingCards\"),setTimeout(function(){this.getLayout().addStyleClass(\"ovpLayoutElementShow\")}.bind(this),0),setTimeout(function(){jQuery.sap.measure.start(\"ovp:CreateCards\",\"Create cards loop\",\"ovp\");for(var t=0;t<this.aOrderedCards.length;t++)this.aOrderedCards[t].visibility&&(e=this._getCardFromManifest(this.aOrderedCards[t].id))&&(e.settings.baseUrl=this._getBaseUrl(),this._initCardModel(e.model),this._loadCardComponent(e.template),this.createCard(e));jQuery.sap.measure.end(\"ovp:CreateCards\")}.bind(this),10),this.busyDialog&&this.busyDialog.close()}.bind(this),function(t){jQuery.sap.log.error(\"Could not load information from LREP Persistency\"),jQuery.sap.log.error(t)}),sap.ui.Device.system.phone&&(jQuery.sap.require(\"sap.ovp.ui.SmartphoneHeaderToggle\"),sap.ovp.ui.SmartphoneHeaderToggle.enable(this)),setTimeout(function(){this.persistencyVariantLoaded||(this.busyDialog=new sap.m.BusyDialog({text:this._getLibraryResourceBundle().getText(\"loading_dialog_text\")}),this.busyDialog.open(),this.busyDialog.addStyleClass(\"sapOVPBusyDialog\"))}.bind(this),500))},_getLibraryResourceBundle:function(){return this.oLibraryResourceBundle||(this.oLibraryResourceBundle=sap.ui.getCore().getLibraryResourceBundle(\"sap.ovp\")),this.oLibraryResourceBundle},_getCardsModel:function(){var t=this.getView().getModel(\"ui\");return this.oCards||(this.oCards=t.getProperty(\"/cards\")),this.oCards},_getBaseUrl:function(){var t=this.getView().getModel(\"ui\");return this.sBaseUrl||(this.sBaseUrl=t.getProperty(\"/baseUrl\")),this.sBaseUrl},_getCardFromManifest:function(t){for(var e=this._getCardsModel(),a=0;a<e.length;a++)if(e[a].id===t)return e[a];return null},_getCardArrayAsVariantFormat:function(t){for(var e=[],a=0;a<t.length;a++)e.push({id:this._getCardId(t[a].getId()),visibility:t[a].getVisible()});return e},_mergeCards:function(t,e){for(var a,i,r=e&&e.cards?e.cards:[],s=[],o=t&&t.length?t:[],n=0;n<r.length;n++){i=r[n].visibility;for(var d=0;d<o.length;d++)if(a=o[d].id,r[n].id===a){s.push({id:a,visibility:i});break}}for(d=0;d<o.length;d++){var l=!1;a=o[d].id,i=o[d].visibility;for(n=0;!l&&n<s.length;n++)s[n].id===a&&(l=!0);l||s.push({id:a,visibility:i})}return s},_mergeLrepDashboardLayout:function(t,e){var a=[],i=this.getLayout().getModel(\"ui\"),r={},s=null,o=i.getProperty(\"/dashboardLayout\");if(o){var n={};for(s in o)o.hasOwnProperty(s)&&o[s]&&((n=o[s]).id=s,n.__ovpDBLVarSource=\"manifest\",n.__ovpDBLVarId=\"C\"+parseInt(n.id.replace(/[^0-9\\.]/g,\"\"),10),r[n.__ovpDBLVarId]=n)}if(this.getLayout().getDashboardLayoutModel().setManifestLayoutsJSON(JSON.stringify(r)),this._bDashboardLayoutLrepActive=!0,e&&e.dashboardLayout)for(s in e.dashboardLayout)e.dashboardLayout[s]&&(e.dashboardLayout[s].__ovpDBLVarSource=\"lrep\",r[s]=e.dashboardLayout[s]);if(this.getLayout().getDashboardLayoutModel().setLayoutVars(r),i.setProperty(\"/initialDashboardLayout\",[this.getLayout().getDashboardLayoutUtil().buildLayout(jQuery(window).width())]),s){var d=i.getProperty(\"/cards\"),l=r[s];d&&l&&(a=this._initDashboardLayoutCardVisibility(d,l,t))}return 0===a.length&&(a=this._mergeCards(this.aManifestOrderedCards,n)),a},_initDashboardLayoutCardVisibility:function(t,e,a){var i,r=[],s=0,o=null,n=!0;if(e&&t){for(s=0;s<t.length;s++)n=!(o=e[i=t[s].id])||!o.hasOwnProperty(\"visible\")||o.visible,r.push({id:i,visibility:n});if(a&&a.length>0)for(s=0;s<a.length;s++)e[i=a[s].id]||r.push({id:i,visibility:a[s].visibility})}return r},_updateLayoutWithOrderedCards:function(){var t=this.getLayout(),e=this.aOrderedCards;t.removeAllContent();for(var a=0;a<e.length;a++){var i=this.getView().byId(e[a].id);i.setVisible(e[a].visibility),t.addContent(i)}},_updateDashboardLayoutCards:function(t){\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName()&&this.getLayout().getDashboardLayoutUtil()&&this.getLayout().getDashboardLayoutUtil().updateCardVisibility(t)},_resetDashboardLayout:function(){\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName()&&(this.getLayout().getDashboardLayoutUtil()&&this.getLayout().getDashboardLayoutUtil().resetToManifest(),this.getLayout().rerender())},verifyGlobalFilterLoaded:function(){return!!this.getGlobalFilter().search()},onGlobalFilterChange:function(){this.filterChanged=!0},onGlobalFilterSearch:function(){if(this.filterChanged){var t=\"ovp-\"+(new Date).getTime();for(var e in this.oCardsModels)this.oCardsModels.hasOwnProperty(e)&&this.oCardsModels[e].refresh(!1,!1,t);this.filterChanged=!1}},_initGlobalFilter:function(){var t=this.getGlobalFilter();if(!t)return this._parseNavigationVariant(),void jQuery.sap.measure.end(\"ovp:GlobalFilter\");this.oGlobalFilterLodedPromise=new Promise(function(e,a){t.attachAfterVariantLoad(function(){this.oParseNavigationPromise.done(function(t,e,a){this._setNavigationVariantToGlobalFilter(t,e,a)}.bind(this)),this.oParseNavigationPromise.fail(function(){jQuery.sap.log.error(\"Could not parse navigation variant from URL\")}),this.oParseNavigationPromise.always(function(){t&&this.verifyGlobalFilterLoaded()&&e()}.bind(this))},this),t.attachInitialise(function(){this._parseNavigationVariant(),t.getCurrentVariantId()||(this.oParseNavigationPromise?(this.oParseNavigationPromise.done(function(t,e,a){t&&this._setNavigationVariantToGlobalFilter(t,e,a)}.bind(this)),this.oParseNavigationPromise.fail(function(){jQuery.sap.log.error(\"Could not parse navigation variant from URL\")}),this.oParseNavigationPromise.always(function(){t&&this.verifyGlobalFilterLoaded()&&e()}.bind(this))):t&&this.verifyGlobalFilterLoaded()&&e())},this),t.attachSearch(function(){e(),this.onGlobalFilterSearch()},this),t.attachFilterChange(this.onGlobalFilterChange,this)}.bind(this)),this.oGlobalFilterLodedPromise.then(function(t){jQuery.sap.measure.end(\"ovp:GlobalFilter\")})},_loadCardComponent:function(t){this.oLoadedComponents[t]||(jQuery.sap.measure.start(\"ovp:CardComponentLoad:\"+t,\"Card Component load\",\"ovp\"),this.oLoadedComponents[t]=sap.ui.component.load({name:t,url:jQuery.sap.getModulePath(t),async:!0}),this.oLoadedComponents[t].then(function(){jQuery.sap.measure.end(\"ovp:CardComponentLoad:\"+t)}))},_initCardModel:function(t){!this.oCardsModels[t]&&t&&(this.oCardsModels[t]=this.getView().getModel(t),this.oCardsModels[t].setUseBatch(!0),this.getGlobalFilter()&&this._overrideCardModelRead(this.oCardsModels[t]))},toggleFilterBar:function t(){var e=this.getGlobalFilter();function a(t,e,a){e.height(a),t.css(\"top\",0)}function i(t,e,a){e.height(0),t.css(\"top\",\"-\"+a+\"px\")}var r=e.getVisible();if(sap.ui.Device.system.phone||sap.ui.Device.system.tablet)e.setVisible(!r);else if(!t.animationInProcess)if(t.animationInProcess=!0,r){var s=jQuery(e.getDomRef()),o=jQuery(this.getView().byId(\"ovpGlobalFilterWrapper\").getDomRef()),n=o.height();a(s,o,n),o.height(),o.one(\"transitionend\",function(a){e.setVisible(!1),t.animationInProcess=!1}),i(s,o,n)}else e.setVisible(!0),setTimeout(function(){var r=jQuery(e.getDomRef()),s=jQuery(this.getView().byId(\"ovpGlobalFilterWrapper\").getDomRef()),o=r.outerHeight();i(r,s,o),s.height(),s.one(\"transitionend\",function(e){s.css(\"height\",\"auto\"),t.animationInProcess=!1}),a(r,s,o)}.bind(this))},_overrideCardModelRead:function(t){var e=t.read,a=this;t.read=function(){var i=a.getGlobalFilter().getFilters(),r=arguments[1];r||(r={},Array.prototype.push.call(arguments,r));var s=a._getEntityTypeFromPath(t,arguments[0],r.context),o=!1;if(a.oValueHelpMap&&-1!=a.oValueHelpMap.indexOf(s.entityType)&&(o=!0),s&&!o){var n=a._getEntityRelevantFilters(s,i);if(n.length>0){var d=-1,l=r.urlParameters;if(l)for(var u=0;u<l.length;u++)if(0===l[u].lastIndexOf(\"$filter=\",0)){d=u;break}d>=0?l[d]=l[d]+\"%20and%20\"+sap.ui.model.odata.ODataUtils.createFilterParams(n,t.oMetadata,s).substr(8):r.filters=n}}e.apply(t,arguments)}},_getEntityTypeFromPath:function(t,e,a){var i=sap.ui.model.odata.v2.ODataModel.prototype._normalizePath.apply(t,[e,a]);return sap.ui.model.odata.ODataMetadata.prototype._getEntityTypeByPath.apply(t.oMetadata,[i])},_getEntityRelevantFilters:function(t,e){var a=[];if(e.length)for(var i=e[0].aFilters,r=t.property,s=0;s<i.length;s++){var o;o=i[s].aFilters?i[s].aFilters[0].sPath:i[s].sPath;for(var n=0;n<r.length;n++)if(r[n].name===o){a.push(i[s]);break}}if(0!=a.length){var d=[];return d.push(new sap.ui.model.Filter(a,e[0].bAnd)),d}return a},_checkIsCardValid:function(t){var e,a,i=t+\".Component\";jQuery.sap.require(i);var r=jQuery.sap.getObject(i);return!!r&&((r===sap.ovp.cards.generic.Component||r.prototype instanceof sap.ovp.cards.generic.Component)&&(!((e=r.getMetadata())&&(a=e.getCustomizing())&&a[\"sap.ui.viewReplacements\"]&&a[\"sap.ui.viewReplacements\"][\"sap.ovp.cards.generic.Card\"])&&(r.prototype.createContent==sap.ovp.cards.generic.Component.prototype.createContent&&r.prototype.getPreprocessors==sap.ovp.cards.generic.Component.prototype.getPreprocessors)))},_createCardComponent:function(t,e,a){var i=\"ovp:CreateCard-\"+a.template+\":\"+a.id;jQuery.sap.measure.start(i,\"Create Card\",\"ovp\");var r=t.getModel(\"@i18n\");if(a.template&&this._checkIsCardValid(a.template)){var s={name:a.template,componentData:{model:e,i18n:r,cardId:a.id,settings:a.settings,appComponent:this.getOwnerComponent()}},o=this.getGlobalFilter();o&&(s.componentData.globalFilter={getFilterDataAsString:o.getDataSuiteFormat.bind(o)});var n=sap.ui.component(s),d=t.byId(a.id),l=d.getComponentInstance();d.setComponent(n),l&&setTimeout(function(){l.destroy()},0)}else jQuery.sap.log.error(\"Could not create Card from '\"+a.template+\"' template. Card is not valid.\");jQuery.sap.measure.end(i)},createLoadingCard:function(t){var e=jQuery.extend(!0,{},t,{template:\"sap.ovp.cards.loading\"});this._createCardComponent(this.getView(),void 0,e)},createCard:function(t){var e=this.getView(),a=e.getModel(t.model);Promise.all([a.getMetaModel().loaded(),this.oGlobalFilterLodedPromise,this.oLoadedComponents[t.template]]).then(function(){this._createCardComponent(e,a,t)}.bind(this),function(e){jQuery.sap.log.error(\"Can't load card with id:'\"+t.id+\"' and type:'\"+t.template+\"', reason:\"+e)})},_getCardId:function(t){var e=this.getView().getId()+\"--\";if(-1!=t.indexOf(e)){var a=t.indexOf(e)+e.length;return t.substr(a)}return t},_initSmartVariantManagement:function(){var t=this._createPersistencyControlForSmartVariantManagement(),e=new sap.ui.comp.smartvariants.PersonalizableInfo({type:\"OVPVariant\",keyName:\"persistencyKey\",control:t});this.oPersistencyVariantPromise=new Promise(function(a,i){this.smartVariandManagement=new sap.ui.comp.smartvariants.SmartVariantManagement({personalizableControls:e,initialise:function(e){var i=e.getParameters().variantKeys;i.length?a(this.smartVariandManagement.getVariantContent(t,i[0])):a(null)}.bind(this)}),this.smartVariandManagement.initialise()}.bind(this))},layoutChanged:function(){if(\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName())this._bDashboardLayoutLrepActive&&this.saveVariant();else{var t=this.getLayout().getContent();this.aOrderedCards=this._getCardArrayAsVariantFormat(t),this.saveVariant()}},saveVariant:function(t){var e=this;this.smartVariandManagement.getVariantsInfo(function(t){var a=null;t&&t.length>0&&(a=t[0].key);var i={name:\"Personalisation\",global:!1,overwrite:null!==a,key:a,def:!0};e.smartVariandManagement.fireSave(i)})},getLayout:function(){return this.getView().byId(\"ovpLayout\")},_createPersistencyControlForSmartVariantManagement:function(){var t=this;sap.ui.core.Control.extend(\"sap.ovp.app.PersistencyControl\",{metadata:{properties:{persistencyKey:{type:\"string\",group:\"Misc\",defaultValue:null}}}});var e=new sap.ovp.app.PersistencyControl({persistencyKey:\"ovpVariant\"});return e.fetchVariant=function(){if(t.isInitialLoading)return t.isInitialLoading=!1,{};var e=this.getLayout();if(e){if(\"sap.ovp.ui.DashboardLayout\"===this.getLayout().getMetadata().getName())return{dashboardLayout:this.getLayout().getLayoutDataJSON()};var a=e.getContent(),i=this._getCardArrayAsVariantFormat(a);return this.oOrderedCards=i,{cards:i}}jQuery.sap.log.error(\"Could not save persistency variant - 'ovpLayout' does not exists\")}.bind(this),e},_initShowHideCardsButton:function(){var t,e=sap.ushell.services.AppConfiguration;(t=(new sap.m.Button).addStyleClass(\"ovpManageCardsBtn\")).setIcon(\"sap-icon://dimension\"),t.setTooltip(this._getLibraryResourceBundle().getText(\"hideCardsBtn_tooltip\")),t.setText(this._getLibraryResourceBundle().getText(\"hideCardsBtn_title\")),t.attachPress(this._onCardMenuButtonPress.bind(this)),e.addApplicationSettingsButtons([t])},_onCardMenuButtonPress:function(){var t;function e(t,e){for(var a=0;a<t.length;a++)if(t[a].id==e)return a;return-1}function a(t,a){for(var i=-1,r=0;r<a.length;r++)if(i=t[r].id==a[r].id?r:e(t,a[r].id),a[r].visibility!=t[i].visibility)if(!0===a[r].visibility){var s=this._getCardFromManifest(a[r].id);s&&(this.createLoadingCard(s),s.settings.baseUrl=this._getBaseUrl(),this._initCardModel(s.model),this._loadCardComponent(s.template),this.createCard(s))}else{var o=this.getView().byId(a[r].id).getComponentInstance();o&&o.destroy()}}var i=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:{path:\"id\",formatter:function(t){var e=this._getCardFromManifest(t).settings;return e.title?e.title:e.category?e.category:e.subTitle?e.subTitle:t}.bind(this)}}),new sap.m.Switch({state:\"{visibility}\",customTextOff:\" \",customTextOn:\" \",change:function(t){var e=t.oSource.getParent();e.toggleStyleClass(\"sapOVPHideCardsTableItem\"),e.getCells()[0].toggleStyleClass(\"sapOVPHideCardsDisabledCell\")},tooltip:this._getLibraryResourceBundle().getText(\"hideCards_switchTooltip\")})]}),r=new sap.m.Table(\"sapOVPHideCardsTable\",{backgroundDesign:sap.m.BackgroundDesign.Transparent,showSeparators:sap.m.ListSeparators.Inner,columns:[new sap.m.Column({vAlign:\"Middle\"}),new sap.m.Column({hAlign:sap.ui.core.TextAlign.Right,vAlign:\"Middle\",width:\"4.94rem\"})]});r.addStyleClass(\"sapOVPHideCardsTable\"),r.bindItems({path:\"/cards\",template:i});var s=r.onAfterRendering;r.onAfterRendering=function(t){s.apply(r,arguments);var e=t.srcControl.mAggregations.items;if(e)for(var a=0;a<e.length;a++)e[a].getCells()[1].getState()||(e[a].addStyleClass(\"sapOVPHideCardsTableItem\"),e[a].getCells()[0].addStyleClass(\"sapOVPHideCardsDisabledCell\"));setTimeout(function(){jQuery(\".sapMListTblRow\").first().focus()},200)};var o=new sap.m.Button(\"manageCardsokBtn\",{text:this._getLibraryResourceBundle().getText(\"okBtn\"),press:function(){var t=this.oDialog.getModel().getProperty(\"/cards\");a.apply(this,[this.aOrderedCards,t]),this.aOrderedCards=t,this._updateDashboardLayoutCards(this.aOrderedCards),this._updateLayoutWithOrderedCards(),this.saveVariant(),this.oDialog.close()}.bind(this)}),n=new sap.m.Button(\"manageCardsCancelBtn\",{text:this._getLibraryResourceBundle().getText(\"cancelBtn\"),press:function(){this.oDialog.close()}.bind(this)}),d=new sap.m.Button(\"manageCardsResetBtn\",{text:this._getLibraryResourceBundle().getText(\"resetBtn\"),press:function(){sap.m.MessageBox.show(this._getLibraryResourceBundle().getText(\"reset_cards_confirmation_msg\"),{id:\"resetCardsConfirmation\",icon:sap.m.MessageBox.Icon.QUESTION,title:this._getLibraryResourceBundle().getText(\"reset_cards_confirmation_title\"),actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],onClose:function(t){t===sap.m.MessageBox.Action.OK&&this.smartVariandManagement.getVariantsInfo(function(t){var e=null;t&&t.length>0&&(e=t[0].key,this.smartVariandManagement.fireManage({deleted:[e]})),a.apply(this,[this.aOrderedCards,this.aManifestOrderedCards]),this.aOrderedCards=this.aManifestOrderedCards,this._resetDashboardLayout(),this._updateDashboardLayoutCards(this.aOrderedCards),this._updateLayoutWithOrderedCards(),this.oDialog.close()}.bind(this))}.bind(this)})}.bind(this)});this.oDialog=new sap.m.Dialog({title:this._getLibraryResourceBundle().getText(\"hideCardsBtn_title\"),contentWidth:\"29.6rem\",contentHeight:\"50%\",stretch:sap.ui.Device.system.phone,content:r,buttons:[d,o,n],afterClose:function(){this.oDialog.destroy()}.bind(this)}).addStyleClass(\"sapOVPCardsVisibilityDialog\");var l=jQuery.extend(!0,[],this.aOrderedCards);t=new sap.ui.model.json.JSONModel({cards:l}),this.oDialog.setModel(t),this.oDialog.open()},isDragAndDropEnabled:function(){return!sap.ui.Device.system.phone},getGlobalFilter:function(){return this.oGlobalFilter||(this.oGlobalFilter=this.getView().byId(\"ovpGlobalFilter\")),this.oGlobalFilter},_parseNavigationVariant:function(){this.oNavigationHandler=this.oNavigationHandler||new sap.ui.generic.app.navigation.service.NavigationHandler(this),this.oParseNavigationPromise=this.oNavigationHandler.parseNavigation(),jQuery.sap.require(\"sap.ovp.cards.CommonUtils\"),sap.ovp.cards.CommonUtils.enable(this,this.oNavigationHandler)},_setNavigationVariantToGlobalFilter:function(t,e,a){if(\"iAppState\"===a){var i=this.getGlobalFilter();if(i)for(var r=new sap.ui.generic.app.navigation.service.SelectionVariant(t.selectionVariant),s=r.getParameterNames().concat(r.getSelectOptionsPropertyNames()),o=0;o<s.length;o++)i.addFieldToAdvancedArea(s[o])}}})}();",
	"web/ui5/resources/sap/ovp/app/CardContainer.fragment.xml": "<core:FragmentDefinition\n        xmlns=\"sap.m\"\n        xmlns:core=\"sap.ui.core\"\n        xmlns:ovp=\"sap.ovp.ui\"\n        xmlns:template=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1\"><ovp:EasyScanLayout id=\"ovpLayout\" dragAndDropRootSelector=\".ovpApplication\" afterDragEnds=\"layoutChanged\"\n                        dragAndDropEnabled=\"{path:'ui>', formatter:'.isDragAndDropEnabled'}\"><ovp:content><template:repeat list=\"{ui>/cards}\" var=\"card\"><core:ComponentContainer id=\"{card>id}\"/></template:repeat></ovp:content></ovp:EasyScanLayout></core:FragmentDefinition>",
	"web/ui5/resources/sap/ovp/app/DashboardCardContainer.fragment.xml": "<core:FragmentDefinition\n        xmlns=\"sap.m\"\n        xmlns:core=\"sap.ui.core\"\n        xmlns:ovp=\"sap.ovp.ui\"\n        xmlns:template=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1\"><ovp:DashboardLayout id=\"ovpLayout\" dragAndDropRootSelector=\".ovpApplication\" afterDragEnds=\"layoutChanged\"\n                        dragAndDropEnabled=\"{path:'ui>', formatter:'.isDragAndDropEnabled'}\"><ovp:content><template:repeat list=\"{ui>/cards}\" var=\"card\"><core:ComponentContainer id=\"{card>id}\"/></template:repeat></ovp:content></ovp:DashboardLayout></core:FragmentDefinition>",
	"web/ui5/resources/sap/ovp/app/Main.view.xml": "<mvc:View\n\tcontrollerName=\"sap.ovp.app.Main\"\n\txmlns=\"sap.m\"\n    xmlns:uxap=\"sap.uxap\"\n    xmlns:l=\"sap.ui.layout\"\n\txmlns:commons=\"sap.ui.commons\"\n\txmlns:core=\"sap.ui.core\"\n    xmlns:smartFilterBar=\"sap.ui.comp.smartfilterbar\"\n\txmlns:mvc=\"sap.ui.core.mvc\"\n    xmlns:ovp=\"sap.ovp.ui\"\n    xmlns:template=\"http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1\"\n    xmlns:build=\"sap.build\"\n\t><l:FixFlex class=\"fixFlexFixedSize ovpApplication\" build:metadata=\"#pattern:OVP\"><l:fixContent><VBox><uxap:ObjectPageHeader class=\"ovpPageHeader\"\n                        id=\"ovpPageHeader\"\n                        objectTitle=\"{ui>/title}\"\n                        objectSubtitle=\"{ui>/description}\"\n                        objectImageURI=\"{= ${ui>/icon} ? ${ui>/icon} : '' }\"\n                        objectImageShape=\"Circle\"\n                        isObjectIconAlwaysVisible=\"true\"\n                        build:metadata=\"#pattern:Header;prop:objectTitle:Title:\\{i18n>title\\};prop:objectSubtitile:Description:\\{i18n>description\\};prop:objectImageURI:ImageSource:\\{manifest>sap.ui/icons/icon\\}\" ><template:if test=\"{ui>/globalFilterEntityType}\"><uxap:actions><uxap:ObjectPageHeaderActionButton class=\"showFilterButton\" press=\"toggleFilterBar\" iconFirst=\"true\" icon=\"sap-icon://filter\" /></uxap:actions></template:if></uxap:ObjectPageHeader><template:if test=\"{ui>/globalFilterEntityType}\"><VBox id=\"ovpGlobalFilterWrapper\" class=\"ovpGlobalFilterWrapper\"><smartFilterBar:SmartFilterBar id=\"ovpGlobalFilter\"\n                                                       visible=\"false\"\n                                                       entityType=\"{ui>/globalFilterEntityType}\"\n                                                       persistencyKey=\"ovpGlobalFilter\"\n                                                       class=\"ovpSmartFilterBar\"\n                                                       filterBarExpanded=\"true\"\n                                ><template:if test=\"{meta>}\"><smartFilterBar:controlConfiguration><template:with path='meta>com.sap.vocabularies.UI.v1.SelectionFields'\n                                                   var='selectionField'><template:repeat list=\"{selectionField>}\"><smartFilterBar:ControlConfiguration\n                                                    key=\"{= (${selectionField>PropertyPath}).replace('/', '.') }\"\n                                                    groupId=\"_BASIC\"\n                                                    /></template:repeat></template:with></smartFilterBar:controlConfiguration></template:if></smartFilterBar:SmartFilterBar></VBox></template:if></VBox></l:fixContent><l:flexContent><core:Fragment fragmentName=\"{ui>/cardContainerFragment}\" type=\"XML\"/></l:flexContent></l:FixFlex></mvc:View>"
}, "web/ui5/resources/sap/ovp/app/Component-preload");