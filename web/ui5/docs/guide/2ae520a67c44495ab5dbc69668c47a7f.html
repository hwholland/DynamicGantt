<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>





<meta name="abstract" content="The sap.ui.comp.filterbar.FilterBar control is used to provide a user-friendly interface for queries."/>
<meta name="description" content="The sap.ui.comp.filterbar.FilterBar control is used to provide a user-friendly interface for queries."/>

<link rel="stylesheet" type="text/css" href="css/documentation.css?x=5633093908200988"/>
<title>Filter Bar</title>
<!--[if lte IE 7]><style>
      .codeblock{
          overflow:visible;
      }</style><![endif]-->

  <script src="../../resources/sap/ui/thirdparty/jquery.js"></script>
    <script src="../../resources/sap/ui/demokit/js/highlight-query-terms.js"></script>
    <script src="../../resources/sap/ui/demokit/js/framewrapper.js"></script>
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" />
    <script src="../../resources/sap/ui/demokit/js/google-code-prettify/run_prettify.js"></script>
    <script src="../../resources/sap/ui/demokit/js/google-code-prettify/lang-css.js"></script>
    <link rel="stylesheet" type="text/css" href="../../resources/sap/ui/demokit/js/google-code-prettify/prettify.css" />
  </head>
<body class="" id="loio2ae520a67c44495ab5dbc69668c47a7f">
<div id="wrapper"><div id="container">

	<h1 class="title topictitle1">Filter Bar</h1>

	
	<div class="body conbody"><p class="shortdesc">The <samp class="ph codeph">sap.ui.comp.filterbar.FilterBar</samp> control is used to provide a
		user-friendly interface for queries.</p>

		<p class="p">For more information about
			this control, see the <a class="xref" href="../../docs/api/symbols/sap.ui.comp.filterbar.FilterBar.html" alt="../../docs/api/symbols/sap.ui.comp.filterbar.FilterBar.html" title="../../docs/api/symbols/sap.ui.comp.filterbar.FilterBar.html">API Reference</a> in the Demo Kit
			and the <a class="xref" target="_blank" href="../../explored.html#/entity/sap.ui.comp.filterbar.FilterBar/samples" alt="../../explored.html#/entity/sap.ui.comp.filterbar.FilterBar/samples" title="../../explored.html#/entity/sap.ui.comp.filterbar.FilterBar/samples">sample</a> in the <span class="ph uicontrol">Explored</span>
			app in the Demo Kit.</p>

		<div class="section"><div class="section_title">Overview</div><div type="Overview">
			
			<p class="p">The <samp class="ph codeph">FilterBar</samp> control has been implemented as a toolbar with a
				collapsible filter area. Whereas the toolbar is always visible, the user can hide
				the filter area to reduce the space required.</p>

			<div class="note note"><span class="notetitle">Note</span> This applies to desktop use. On tablets, the filter area is always collapsed but can be
				expanded by the user. On phones, the filter area is not displayed at all. You can
				access the filters through the <samp class="ph codeph">Filters</samp> dialog.</div>

			<p class="p">The
				toolbar includes the <samp class="ph codeph">VariantManagement</samp> control
				and contains the following buttons:</p>

			<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_cpp_d3t_xw">
				<li class="li"><span class="ph uicontrol">Hide Filter Bar</span> /<span class="ph uicontrol">Show Filter Bar </span><p class="p">Hides or
						displays the filter area.</p>
<div class="note note"><span class="notetitle">Note</span> This function is only available for
						desktop use.</div>
</li>

				<li class="li"><span class="ph uicontrol">Filters</span><p class="p">Lists the filters available and, if selected,
						displays the filter dialog.</p>
</li>

				<li class="li"><span class="ph uicontrol">Go</span><p class="p">Executes the query.</p>
<p class="p">A <samp class="ph codeph">Search</samp> event is
						raised, and the consuming control must respond to it. The
							<samp class="ph codeph">showGoButton</samp> property is set to <samp class="ph codeph">True</samp>
						by default and determines whether the button is visible.</p>
</li>

			</ul>

			<div class="note note"><span class="notetitle">Note</span> You can also deactivate the toolbar using the <samp class="ph codeph">useToolbar=false</samp> property
				setting. In this case the filter bar buttons are rendered in the filter area right
				behind the filters. The <samp class="ph codeph">Filters</samp> dialog is then called <samp class="ph codeph">Adapt
					Filters</samp> dialog.</div>

			<div class="note note"><span class="notetitle">Note</span> The <samp class="ph codeph">FilterBar</samp> control can be used on its own. However, it is
				strongly recommended to use it in combination with the
					<samp class="ph codeph">SmartFilterBar</samp> control.</div>

		</div></div>

		<div class="section"><div class="section_title">Details</div><div type="Details"><div class="sectiondiv subsection">
				<p class="p subsectiontitle"><samp class="ph codeph">FilterItems</samp> and
					<samp class="ph codeph">FilterGroupItems</samp></p>

				<p class="p">Filters are similar to query parameters. A filter is represented either by a
						<samp class="ph codeph">FilterItem</samp>
					element or its specialization, the <samp class="ph codeph">FilterGroupItem</samp> element.
					They are populated via the <samp class="ph codeph">FilterItems</samp> or
						<samp class="ph codeph">FilterGroupItems</samp> aggregations. The main difference is that
					the <samp class="ph codeph">FilterGroupItem</samp> has the <samp class="ph codeph">group</samp> attribute.
					The <samp class="ph codeph">FilterItem</samp> is internally processed as a
						<samp class="ph codeph">FilterGroupItem</samp> that belongs to the <samp class="ph codeph">Basic</samp>
					group.</p>

				<p class="p">The embedding component of the <samp class="ph codeph">FilterBar</samp> control determines if a
					filter is mandatory and visible, defines its label, and whether the filter is
					visible in the filter area.</p>

			</div><div class="sectiondiv subsection">
				<p class="p subsectiontitle">Filters Dialog</p>

				<p class="p">The <span class="ph uicontrol">Filters</span> dialog provides all the functions that are available with
					the <samp class="ph codeph">FilterBar</samp> control. The user can define which filter is
					visible in the filter bar and whether a filter is shown in the
					current
					variant at all. The user can also clear and restore values by
					selecting <span class="ph uicontrol">Clear</span> and <span class="ph uicontrol">Restore</span> and
					trigger the query execution.</p>

				<div class="note note"><span class="notetitle">Note</span> Some of the buttons are hidden and must be enabled first.</div>

				<p class="p">The information in this dialog is row-based. The
					first
					element is the <samp class="ph codeph">VariantManagement</samp> control,
					followed by the filters. The filters are organized in groups, each starting with
					a group title. For each filter, the user can select the <span class="ph uicontrol">Add to Filter
						Bar</span>
					checkbox
					to make the filter visible in the filter bar.</p>

				<div class="note note"><span class="notetitle">Note</span> This function is only available for desktop use.</div>

				<p class="p">The filters of the <span class="ph uicontrol">Basic</span> group are always included in the
					current
					variant. All other group filters are initially not assigned
					to the current variant. The user can assign a filter that is different from the
					basic filter group by selecting <span class="ph uicontrol">More Filters</span> (all filters
					that have not yet been assigned and belong to this group) or <span class="ph uicontrol">Change
						Filters</span>, if all filters of the current group have already been
					added to the current variant. This takes the user to the <span class="ph uicontrol">Select
						Filters</span>
					dialog
					where the user can define which filters are included in the current variant.
					This dialog displays all filters of a group.</p>

				<div class="note note"><span class="notetitle">Note</span> The <span class="ph uicontrol">Select Filters</span> dialog is available on its own and can be used
					in other scenarios, for example, in the value help dialog.</div>

				<p class="p">Once filters have been included in the current variant, they can also be added to
					the filter bar. A filter can only be removed from the current variant if it is
					not visible in the filter bar.</p>

				<p class="p">Mandatory filters can only be removed from the filter bar if they have a value.
					As long as a mandatory filter does not have a value, it will be treated as added
					to the filter bar.</p>

				<p class="p">The
					buttons
					in the dialog offer the following functions:</p>

				<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_f1g_bmt_xw">
					<li class="li"><span class="ph uicontrol">Save</span><p class="p">Represents the <span class="ph uicontrol">Save</span> function for the
								<samp class="ph codeph">VariantManagement</samp> control on the user
							interface.</p>
<p class="p">It either saves the current
							variant
							or provides the <span class="ph uicontrol">Save</span> dialog for variant
							management if a <span class="ph uicontrol">Save As</span>
							function is required.</p>
</li>

					<li class="li"><span class="ph uicontrol">Clear</span><p class="p">Clears all filters by raising the
								<samp class="ph codeph">Clear</samp> event.</p>
<p class="p">The
								<samp class="ph codeph">showClearButton</samp> property is set to
								<samp class="ph codeph">False</samp> by default and determines whether the button
							is visible.</p>
</li>

					<li class="li"><span class="ph uicontrol">Restore</span><p class="p">Reverts all changes of the current variant
							by raising the <samp class="ph codeph">Reset</samp> event and applies the current
							variant again.</p>
<p class="p">The <samp class="ph codeph">showRestoreButton</samp> property is
							set to <samp class="ph codeph">True</samp> by default and determines whether the
							button is visible.</p>
</li>

					<li class="li"><span class="ph uicontrol">Go</span><p class="p">Executes the query.</p>
<p class="p">The function of the
							button is the same as for the one in the filter bar. However, here the
							button is always visible.</p>
</li>

					<li class="li"><span class="ph uicontrol">Cancel</span><p class="p">Reverts all changes made by the user since the dialog was
							opened and closes the dialog.</p>
</li>

				</ul>

			</div></div></div>

		<div class="section"><div class="section_title">Integration with Value Help Dialog</div><div type="Integration with Value Help Dialog">
			
			<p class="p">The filter bar is also used in the <span class="ph uicontrol">Value Help</span> dialog
				scenarios. The filter bar property <samp class="ph codeph">advancedMode</samp> must be set to
					<samp class="ph codeph">true</samp> to enable this function.</p>

			<p class="p">The embedding component has to provide a search field using the
					<samp class="ph codeph">FilterItems</samp> aggregation and an advanced search using the
					<samp class="ph codeph">FilterGroupItems</samp> aggregation. For the search, the
					<samp class="ph codeph">Search</samp> event is raised.</p>

		</div></div>

		<div class="section"><div class="section_title">Integration with Smart Variant Management</div><div type="Integration with Smart Variant Management"><p class="p">A variant represents a set of
				filters. Variants are handled and represented on the user interface by the
					<samp class="ph codeph">VariantManagement</samp> control that is included in the toolbar of
				the <samp class="ph codeph">FilterBar</samp> control. Variants are stored in a backend system and
				also retrieved from there.</p>
<p class="p">For variants, the following services are
				available:</p>
<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_jqk_zh5_fq">
				<li class="li">Shell service for
					personalization</li>

				<li class="li"><span class="ph"><span class="ph pname">SAPUI5</span></span> flexibility
					services</li>

			</ul>
<p class="p">They
				can be accessed using the <samp class="ph codeph">SmartVariantManagement</samp> or
					<samp class="ph codeph">SmartVariantManagementUI2</samp> control.</p>
<p class="p">For more information
				about the shell services, see the <a class="xref" href="../../docs/api/symbols/sap.ushell.services.Personalization.html" alt="../../docs/api/symbols/sap.ushell.services.Personalization.html" title="../../docs/api/symbols/sap.ushell.services.Personalization.html">API Reference</a> in the Demo
				Kit.</p>
<p class="p">For
				more information about flexibility services, see <a class="xref" href="a8e55aa2f8bc4127923b20685a6d1621.html" title="SAPUI5 flexibility services enable functions for different user groups to personalize SAP Fiori apps and adapt their user interface at runtime.">SAPUI5 Flexibility Services</a>.</p>
<p class="p">The consuming control
				that is using the <samp class="ph codeph">SmartVariantManagement</samp> control has to provide the
				following
				dedicated
				methods:</p>
<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_efg_cq5_fq">
				<li class="li"><samp class="ph codeph">applyVariant</samp> (<samp class="ph codeph">oVariantContent</samp>)</li>

				<li class="li"><samp class="ph codeph">var oVariantContent</samp> = <samp class="ph codeph">fetchVariant</samp> ()</li>

			</ul>
<p class="p">The <samp class="ph codeph">fetchVariant</samp> has to return a JSON object. This is the
				information that is stored along with some administrative information, such as the
				name of the variant and the ID. Once the variant has been retrieved from the backend
				system and transferred to the consuming control, the <samp class="ph codeph">applyVariant</samp>
				is executed. During execution, the consuming control must know the format of
					<samp class="ph codeph">oVariantContent</samp>, since the control must also provide the method
				and react on it.</p>
<p class="p">The following table shows which controls are used by the
				filter bar controls to handle variants:</p>

<div class="table-wrapper tablenoborder"><table summary="" id="loio2ae520a67c44495ab5dbc69668c47a7f__table_z1p_2vb_zw" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Controls for Variant Management Integration</span></caption>
<colgroup><col width="50%"/><col width="50%"/></colgroup>

					
					
					<thead class="thead" align="left">
						<tr class="row">
							<th class="entry" align="left" valign="top" width="50%" id="d2108093e434">
								<p class="p">Control</p>

							</th>

							<th class="entry" align="left" valign="top" width="50%" id="d2108093e440">
								<p class="p">Uses</p>

							</th>

						</tr>

					</thead>

					<tbody class="tbody">
						<tr class="row">
							<td class="entry" align="left" valign="top" width="50%" headers="d2108093e434 ">
								<p class="p"><samp class="ph codeph">FilterBar</samp></p>

							</td>

							<td class="entry" align="left" valign="top" width="50%" headers="d2108093e440 ">
								<p class="p"><samp class="ph codeph">SmartVariantManagementUI2</samp></p>

							</td>

						</tr>

						<tr class="row">
							<td class="entry" align="left" valign="top" width="50%" headers="d2108093e434 ">
								<p class="p"><samp class="ph codeph">SmartFilterBar</samp></p>

							</td>

							<td class="entry" align="left" valign="top" width="50%" headers="d2108093e440 ">
								<p class="p"><samp class="ph codeph">SmartVariantManagement</samp></p>

							</td>

						</tr>

					</tbody>

				</table>
</div>
<div class="note note"><span class="notetitle">Note</span> You can also hide <samp class="ph codeph">VariantManagement</samp> if no
					<samp class="ph codeph">persistencyKey</samp> is provided. Also, you can separate the
					<samp class="ph codeph">VariantManagement</samp> control from the <samp class="ph codeph">FilterBar</samp>
				control by using the page variant of the <samp class="ph codeph">SmartVariantManagement</samp>
				control.</div>
<div class="sectiondiv subsection">
				<p class="p subsectiontitle">Shell
					Service
					for Personalization </p>

				<p class="p">The
					shell
					service for personalization is handled internally by the
						<samp class="ph codeph">FilterBar</samp> control. The basic variant handling is
					implemented by the <samp class="ph codeph">SmartVariantManagementUI2</samp> control. It
					extends the <samp class="ph codeph">VariantManagement</samp> control. The shell service for
					personalization only supports end user personalization.</p>

				<p class="p">The consuming control of the <samp class="ph codeph">FilterBar</samp> has to provide two
					methods, one for fetching the data that must be stored as the content of the
					variant, and one for applying this data, if the variant is set. Both methods
					have to be registered using the corresponding methods of the
						<samp class="ph codeph">FilterBar</samp> control:</p>

				<ul class="ul" id="loio2ae520a67c44495ab5dbc69668c47a7f__ul_vxd_dmd_hq">
					<li class="li"><samp class="ph codeph">registerApplyData</samp> (<samp class="ph codeph">fApplyData</samp>) –
						interface: <samp class="ph codeph">fApplyData
						</samp>(<samp class="ph codeph">oVariantContent</samp>)</li>

					<li class="li"><samp class="ph codeph">registerFetchData</samp> (<samp class="ph codeph">fFetchData</samp>) –
						interface: <samp class="ph codeph">oVariantContent</samp> = <samp class="ph codeph">fFetchData</samp>
						()</li>

				</ul>

				<p class="p">A persistence key <samp class="ph codeph">setPersistencyKey</samp> (<samp class="ph codeph">sKey</samp>) must
					be provided as well. This key identifies the storage area and saves/retrieves
					the variants currently used.</p>

				<p class="p">To trigger the retrieval of the variants, the consuming control must register to
					the <samp class="ph codeph">Initialise</samp> event of the <samp class="ph codeph">FilterBar</samp> and call
					the <samp class="ph codeph">fireInitialise</samp>() method in the <samp class="ph codeph">FilterBar</samp>
					control. </p>

				<div class="note note"><span class="notetitle">Note</span> The retrieval of the initial variants is done asynchronously. If the retrieval
					has been completed, the <samp class="ph codeph">SmartVariantManagementUI2</samp> control will
					be populated with the variant information, and the event handler for the
						<samp class="ph codeph">Initialise</samp> event will be called.</div>

			</div><div class="sectiondiv subsection">
				<p class="p subsectiontitle"><span class="ph"><span class="ph pname">SAPUI5</span></span>
					Flexibility Services</p>

				<p class="p">Flexibility services are handled internally by the
						<samp class="ph codeph">SmartFilterBar</samp> control. The basic variant handling is
					implemented by the <samp class="ph codeph">SmartVariantManagement</samp> control. It extends
					the <samp class="ph codeph">VariantManagement</samp> control. Flexibility services support end
					user personalization and also allow to create and store VENDOR-specific
					variants.</p>

				<div class="note note"><span class="notetitle">Note</span> We recommend that you always use the <span class="ph"><span class="ph pname">SAPUI5</span></span> flexibility
					services rather than the shell service.</div>

			</div></div></div>

		<div class="section"><div class="section_title">FAQ</div><div type="FAQ"><div class="sectiondiv subsection">
				<p class="p subsectiontitle">Question</p>

				<p class="p">How can I use <span class="ph"><span class="ph pname">SAPUI5</span></span>
					flexibility services in <samp class="ph codeph">FilterBar</samp>?</p>

			</div><div class="sectiondiv subsection collapsible">
				<p class="p subsectiontitle">Answer</p>

				<p class="p">In general, the <samp class="ph codeph">FilterBar</samp> control supports the shell service for
					personalization. The following steps describe how to enable the
						<samp class="ph codeph">FilterBar</samp> control to use the flexibility services provided
					the <samp class="ph codeph">FilterBar</samp> is already used, and the consuming control
					supports the shell service via the <samp class="ph codeph">FilterBar</samp> control. If this
					is not the case, make sure the shell service is used as described above before
					you start.</p>

				<p class="p">After that, here is what you need to do:</p>

				<ol class="ol" id="loio2ae520a67c44495ab5dbc69668c47a7f__ol_zcf_thw_yw">
					<li class="li">Extend the <samp class="ph codeph">FilterBar</samp> to create a new
							<samp class="ph codeph">FilterBar</samp>
						control.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><samp class="ph codeph">#!js</samp>
sap.ui.comp.filterbar.FilterBar.extend(“my.ui5flex.FilterBar”) {..}</pre></div>
</li>

					<li class="li">Overwrite the internal <samp class="ph codeph">_initializeVariantManagement</samp>
						function of the <samp class="ph codeph">FilterBar</samp>
						control.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><samp class="ph codeph">#!js</samp>
my.ui5flex.FilterBar.prototype._initializeVariantManagement = function() {
      	if (this._oSmartVM &amp;&amp; this.getPersistencyKey()) {
            var oPersInfo = new sap.ui.comp.smartvariants.PersonalizableInfo({
		     type: "filterBar",
		     keyName: "persistencyKey"		
             });
	     oPersInfo.addControl(this);

	     oSmartVM.addPersonalizableControl(oPersInfo);					        
             sap.ui.comp.filterbar.FilterBar.prototype._initializeVariantManagement.apply(this, arguments);

	 } else {
		this.fireInitialise();
 }
    };
</pre></div>
</li>

					<li class="li">Overwrite the internal <samp class="ph codeph">_createVariantManagement</samp> function of
						the <samp class="ph codeph">FilterBar</samp>
						control.<div class="div_pre_codeblock"><pre class="pre codeblock prettyprint"><samp class="ph codeph">#!js</samp>
my.ui5flex.FilterBar.prototype._createVariantManagement = function() {
         this._oSmartVM = new sap.ui.comp.smartvariants.SmartVariantManagement({
                	showExecuteOnSelection: true,
                	showShare: true
           	   });
                return this._oSmartVM;
};
</pre></div>
</li>

				</ol>

			</div></div></div>

		<div class="section"><div class="section_title">Further Communication between FilterBar, SmartFilterBar, and Consuming Control</div><div type="Further Communication between FilterBar, SmartFilterBar, and Consuming Control">
			
			<p class="p">The following is also valid for the <samp class="ph codeph">SmartFilterBar</samp> control: Before a variant
				is saved, the <samp class="ph codeph">FilterBar</samp> control triggers the
					<samp class="ph codeph">beforeVariantSave</samp> event. This allows the consuming control to
				prepare for the <samp class="ph codeph">fetchData</samp> call, if required. Right after this event
				is raised, the <samp class="ph codeph">FilterBar</samp> control calls the method provided by the
					<samp class="ph codeph">registerFetchData</samp> method. If a user selects a variant from the
					<samp class="ph codeph">VariantManagement</samp> control or the
					<samp class="ph codeph">SmartVariantManagement</samp> respectively after the
					<samp class="ph codeph">FilterBar</samp> has called the method provided by the
					<samp class="ph codeph">registerApplyData</samp> method, the <samp class="ph codeph">afterVariantLoad</samp>
				event is raised.</p>

			<div class="note note"><span class="notetitle">Note</span> The <samp class="ph codeph">afterVariantLoad</samp> event is also raised internally when the
				user selects <span class="ph uicontrol">Cancel</span> or <span class="ph uicontrol">Reset</span> in the
					<span class="ph uicontrol">Filters</span> dialog of the filter bar.</div>

		</div></div>

		<div class="section"><div class="section_title">Related Information</div><div type="Related Information">
			
			<p class="p"><a class="xref" href="7bcdffc056a94731b4341db73251e32b.html" title="The sap.ui.comp.smartfilterbar.SmartFilterBar control analyzes the $metadata document of an OData service and renders a FilterBar that can be used to filter a table.">Smart Filter Bar</a></p>

			<p class="p"><a class="xref" href="06a4c3ac1cf545a7b51864e7f3aa02da.html" title="The sap.ui.comp.smartvariants.SmartVariantManagement control provides an interface to enable a simple integration of the VariantManagement control and access to the flexibility layer for easy communication.">Smart Variant Management</a></p>

		</div></div>

	</div>

</div></div>

<SCRIPT LANGUAGE="JavaScript"><!--
 var page_title="Filter Bar";

        if (page_title !='' &&
        parent.document.title != null) {
 parent.document.title =
          page_title;
 } 
 var
        anchor = document.getElementById(location.hash.substring(+1)); if (typeof (anchor)
        !='undefined' && anchor !=null){
        var top = anchor.getBoundingClientRect().top; } 
//-->
</SCRIPT>
</body>
</html>