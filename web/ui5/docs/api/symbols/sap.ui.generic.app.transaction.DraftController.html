<!DOCTYPE html> <html xml:lang="en" lang="en"><head><meta charset="UTF-8" ><meta name="generator" content="JsDoc + OpenUI5/SAPUI5 template" ><title>JsDoc Report - SAP UI development Toolkit for HTML5 - API Reference - sap.ui.generic.app.transaction.DraftController</title><link rel="stylesheet" href="../default.css" ><script src="../../../resources/sap/ui/thirdparty/jquery.js"></script><script src="../../../resources/sap/ui/demokit/js/highlight-query-terms.js"></script><link rel="stylesheet" href="../../../resources/sap/ui/demokit/themes/base/highlight-query-terms.css" /></head><body><div id="main"><div id="content"><h1 class="classTitle static">Class <span class="package">sap.ui.generic.app.transaction.</span>DraftController<span class="module"><span>Module: </span><a href="../modules/sap_ui_generic_app_transaction_DraftController.html">sap/ui/generic/app/transaction/DraftController</a></span></h1><hr><div class="full-description"><p>Gives access to runtime draft handling for applications. Assuming state-less communication, each single data modification request (or change set in an OData $batch request) is a "mini-transaction", which saves data to the database. The class implements the transactional interaction patterns specified for OData services that support draft documents and provides methods for draft-specific actions, for example validate, prepare, activate. </p><p> Additionally, it handles transactional request processing, ensures concurrency control and correct ETag handling. It provides access to the simple interaction patterns of runtime handling for drafts according to the draft specification. These can be combined as required by client applications. Additionally, error handling is provided to notify client implementations of error situations. The event <code>fatalError</code> is thrown, if fatal errors occur during execution of OData requests.</p><br /><i>Since: </i>1.30.0. </div><div class="summary section"><div class="sectionTitle">Constructor Summary</div><div class="sectionItems"><div class="sectionItem classConstructor static"><div class="itemName"><b class="icon" title="Constructor for a new draft controller instance.">new <a href="sap.ui.generic.app.transaction.DraftController.html#constructor">sap.ui.generic.app.transaction.DraftController</a></b><span class='signature'>(<span title="(sap.ui.model.odata.ODataModel) The OData model currently used">oModel</span>, <span title="(sap.ui.generic.app.util.Queue) Optional HTTP request queue">oQueue</span>)</span><span class='description'>Constructor for a new draft controller instance.</span></div></div></div></div><div class="summary section"><div class="sectionTitle">Method Summary</div><div class="sectionItems"><div class="sectionItem classMethod static"><b class="icon" title="Creates a new subclass of class sap.ui.generic.app.transaction.DraftController with name sClassName and enriches it with the information contained in oClassInfo."><a href="sap.ui.generic.app.transaction.DraftController.html#.extend"><span class="package">sap.ui.generic.app.transaction.DraftController.</span>extend</a></b><span class='signature'>(<span title="(string) Name of the class being created">sClassName</span>, <span title="(object) Object literal with information about the class">oClassInfo</span><i class="help" title="Optional parameter">?</i>, <span title="(function) Constructor function for the metadata object; if not given, it defaults to sap.ui.core.ElementMetadata">FNMetaImpl</span><i class="help" title="Optional parameter">?</i>)</span><span class='description'>Creates a new subclass of class sap.ui.generic.app.transaction.DraftController with name <code>sClassName</code> and enriches it with the information contained in <code>oClassInfo</code>.</span></div><div class="sectionItem classMethod static"><b class="icon" title="Returns a metadata object for class sap.ui.generic.app.transaction.DraftController."><a href="sap.ui.generic.app.transaction.DraftController.html#.getMetadata"><span class="package">sap.ui.generic.app.transaction.DraftController.</span>getMetadata</a></b><span class='signature'>()</span><span class='description'>Returns a metadata object for class sap.ui.generic.app.transaction.DraftController.</span></div><div class="sectionItem classMethod"><b class="icon" title="Submits changes to the back-end and activates a draft entity in the back-end."><a href="sap.ui.generic.app.transaction.DraftController.html#activateDraftEntity">activateDraftEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class='description'>Submits changes to the back-end and activates a draft entity in the back-end.</span></div><div class="sectionItem classMethod"><b class="icon" title="Creates an edit draft in the back-end."><a href="sap.ui.generic.app.transaction.DraftController.html#createEditDraftEntity">createEditDraftEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The given binding context">oContext</span>, <span title="(boolean) Set to true to avoid the creation of a new draft when unsaved changes exist in the back-end">bPreserveChanges</span><i class="help" title="Optional parameter">?</i>)</span><span class='description'>Creates an edit draft in the back-end.</span></div><div class="sectionItem classMethod"><b class="icon" title="Creates a new edit draft on the client and sends it to the back-end."><a href="sap.ui.generic.app.transaction.DraftController.html#createNewDraftEntity">createNewDraftEntity</a></b><span class='signature'>(<span title="(string) The name of the entity set">sEntitySet</span>, <span title="(string) Path identifying the new entity instance">sPath</span>)</span><span class='description'>Creates a new edit draft on the client and sends it to the back-end.</span></div><div class="sectionItem classMethod"><b class="icon" title="Frees all resources claimed during the life-time of this instance."><a href="sap.ui.generic.app.transaction.DraftController.html#destroy">destroy</a></b><span class='signature'>()</span><span class='description'>Frees all resources claimed during the life-time of this instance.</span></div><div class="sectionItem classMethod"><b class="icon" title="Returns the current draft context instance."><a href="sap.ui.generic.app.transaction.DraftController.html#getDraftContext">getDraftContext</a></b><span class='signature'>()</span><span class='description'>Returns the current draft context instance.</span></div><div class="sectionItem classMethod"><b class="icon" title="Retrieves a possibly existing draft entity for the given active entity using the binding context of the active entity from the back-end."><a href="sap.ui.generic.app.transaction.DraftController.html#getDraftForActiveEntity">getDraftForActiveEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The binding context of the active entity">oContext</span>)</span><span class='description'>Retrieves a possibly existing draft entity for the given active entity using the binding context of the active entity from the back-end.</span></div><div class="sectionItem classMethod"><b class="icon" title="Checks whether an entity has an active entity associated."><a href="sap.ui.generic.app.transaction.DraftController.html#hasActiveEntity">hasActiveEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class='description'>Checks whether an entity has an active entity associated.</span></div><div class="sectionItem classMethod"><b class="icon" title="Checks whether an entity set is active."><a href="sap.ui.generic.app.transaction.DraftController.html#isActiveEntity">isActiveEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class='description'>Checks whether an entity set is active.</span></div><div class="sectionItem classMethod"><b class="icon" title="Submits changes to the back-end and prepares an existing draft entity in the back-end for later activation by invoking the preparation action."><a href="sap.ui.generic.app.transaction.DraftController.html#prepareDraftEntity">prepareDraftEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class='description'>Submits changes to the back-end and prepares an existing draft entity in the back-end for later activation by invoking the preparation action.</span></div><div class="sectionItem classMethod"><b class="icon" title="Submits changes to the back-end and prepares a draft entity in the back-end for later activation by invoking the preparation action."><a href="sap.ui.generic.app.transaction.DraftController.html#saveAndPrepareDraftEntity">saveAndPrepareDraftEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The given binding context">oContext</span>, <span title="(map) Parameters to control the behavior of the request">mParameters</span>)</span><span class='description'>Submits changes to the back-end and prepares a draft entity in the back-end for later activation by invoking the preparation action.</span></div><div class="sectionItem classMethod"><b class="icon" title="Submits changes to the back-end and prepares an existing draft entity in the back-end for later activation by invoking the validation action."><a href="sap.ui.generic.app.transaction.DraftController.html#validateDraftEntity">validateDraftEntity</a></b><span class='signature'>(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class='description'>Submits changes to the back-end and prepares an existing draft entity in the back-end for later activation by invoking the validation action.</span></div></div></div><div class="section details"><div class="sectionTitle"> Constructor Detail </div><div class="sectionItems"><div class="sectionItem classItem itemName static"><div class="details"><a name="constructor"></a><div class="icon"> new <b>sap.ui.generic.app.transaction.DraftController</b>(<span title="(sap.ui.model.odata.ODataModel) The OData model currently used">oModel</span>, <span title="(sap.ui.generic.app.util.Queue) Optional HTTP request queue">oQueue</span>) </div><div class="full-description"> Constructor for a new draft controller instance. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.odata.ODataModel.html">sap.ui.model.odata.ODataModel</a>}</span></td><td class="methodItemName"><b>oModel</b></td><td class="methodItemDesc"> The OData model currently used </td></tr><tr><td class="methodItemType"><span class="light">{sap.ui.generic.app.util.Queue}</span></td><td class="methodItemName"><b>oQueue</b></td><td class="methodItemDesc"> Optional HTTP request queue </td></tr></tbody></table><dl class="detailList"><dt class="heading">Exceptions:</dt><dt><span class="light">{Error}</span><b></b></dt><dd>Throws an error if no model is handed over as input parameter</dd></dl> <!-- --> </div></div></div></div><div class="details section"><div class="sectionTitle"> Method Detail </div><div class="sectionItems"><div class='sectionItem classMethod static'><a name=".extend"></a><div class="itemTitle icon"> sap.ui.generic.app.transaction.DraftController.extend<span class="signature">(<span title="(string) Name of the class being created">sClassName</span>, <span title="(object) Object literal with information about the class">oClassInfo</span><i class="help" title="Optional parameter">?</i>, <span title="(function) Constructor function for the metadata object; if not given, it defaults to sap.ui.core.ElementMetadata">FNMetaImpl</span><i class="help" title="Optional parameter">?</i>)</span><span class="light" title="returns function">: function</span></div><div class="full-description"> Creates a new subclass of class sap.ui.generic.app.transaction.DraftController with name <code>sClassName</code> and enriches it with the information contained in <code>oClassInfo</code>. </p><p><code>oClassInfo</code> might contain the same kind of information as described in <a href="sap.ui.base.Object.html#.extend">Object.extend</a>. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{string}</span></td><td class="methodItemName"><b>sClassName</b></td><td class="methodItemDesc"> Name of the class being created </td></tr><tr><td class="methodItemType"><span class="light">{object}</span></td><td class="methodItemName"><b>oClassInfo</b><i class="help" title="Optional parameter">?</i></td><td class="methodItemDesc"> Object literal with information about the class </td></tr><tr><td class="methodItemType"><span class="light">{function}</span></td><td class="methodItemName"><b>FNMetaImpl</b><i class="help" title="Optional parameter">?</i></td><td class="methodItemDesc"> Constructor function for the metadata object; if not given, it defaults to <code>sap.ui.core.ElementMetadata</code></td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{function}</span></td><td class="methodItemDesc"> Created class / constructor function </td></tr></tbody></table></div><div class='sectionItem classMethod static'><a name=".getMetadata"></a><div class="itemTitle icon"> sap.ui.generic.app.transaction.DraftController.getMetadata<span class="signature">()</span><span class="light" title="returns sap.ui.base.Metadata">: <a href="sap.ui.base.Metadata.html">sap.ui.base.Metadata</a></span></div><div class="full-description"> Returns a metadata object for class sap.ui.generic.app.transaction.DraftController. </div><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.base.Metadata.html">sap.ui.base.Metadata</a>}</span></td><td class="methodItemDesc"> Metadata object describing this class </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="activateDraftEntity"></a><div class="itemTitle icon"> activateDraftEntity<span class="signature">(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class="light" title="returns Promise">: Promise</span></div><div class="full-description"> Submits changes to the back-end and activates a draft entity in the back-end. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The given binding context </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Promise}</span></td><td class="methodItemDesc"> A <code>Promise</code> for asynchronous execution </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="createEditDraftEntity"></a><div class="itemTitle icon"> createEditDraftEntity<span class="signature">(<span title="(sap.ui.model.Context) The given binding context">oContext</span>, <span title="(boolean) Set to true to avoid the creation of a new draft when unsaved changes exist in the back-end">bPreserveChanges</span><i class="help" title="Optional parameter">?</i>)</span><span class="light" title="returns Promise">: Promise</span></div><div class="full-description"> Creates an edit draft in the back-end. Additionally, possible changes that have been collected on the client are sent to the back-end. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The given binding context </td></tr><tr><td class="methodItemType"><span class="light">{boolean}</span></td><td class="methodItemName"><b>bPreserveChanges</b><i class="help" title="Optional parameter">?</i></td><td class="methodItemDesc"> Set to <code>true</code> to avoid the creation of a new draft when unsaved changes exist in the back-end </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Promise}</span></td><td class="methodItemDesc"> A <code>Promise</code> for asynchronous execution </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="createNewDraftEntity"></a><div class="itemTitle icon"> createNewDraftEntity<span class="signature">(<span title="(string) The name of the entity set">sEntitySet</span>, <span title="(string) Path identifying the new entity instance">sPath</span>)</span><span class="light" title="returns Promise">: Promise</span></div><div class="full-description"> Creates a new edit draft on the client and sends it to the back-end. Additionally, possible changes that have been collected on the client are sent to the back-end. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{string}</span></td><td class="methodItemName"><b>sEntitySet</b></td><td class="methodItemDesc"> The name of the entity set </td></tr><tr><td class="methodItemType"><span class="light">{string}</span></td><td class="methodItemName"><b>sPath</b></td><td class="methodItemDesc"> Path identifying the new entity instance </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Promise}</span></td><td class="methodItemDesc"> A <code>Promise</code> for asynchronous execution of the request </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="destroy"></a><div class="itemTitle icon"> destroy<span class="signature">()</span></div><div class="full-description"> Frees all resources claimed during the life-time of this instance. </div></div><div class='sectionItem classMethod'><a name="getDraftContext"></a><div class="itemTitle icon"> getDraftContext<span class="signature">()</span><span class="light" title="returns sap.ui.generic.app.transaction.DraftContext">: <a href="sap.ui.generic.app.transaction.DraftContext.html">sap.ui.generic.app.transaction.DraftContext</a></span></div><div class="full-description"> Returns the current draft context instance. If no instance exists, it is created lazily. </div><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.generic.app.transaction.DraftContext.html">sap.ui.generic.app.transaction.DraftContext</a>}</span></td><td class="methodItemDesc"> The current draft context instance </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="getDraftForActiveEntity"></a><div class="itemTitle icon"> getDraftForActiveEntity<span class="signature">(<span title="(sap.ui.model.Context) The binding context of the active entity">oContext</span>)</span><span class="light" title="returns Promise">: Promise</span></div><div class="full-description"> Retrieves a possibly existing draft entity for the given active entity using the binding context of the active entity from the back-end. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The binding context of the active entity </td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.32.0</dd></dl><div class="heading">Exceptions:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Error}</span><b></b></td><td class="methodItemDesc"> Throws an error if no context is handed over as input parameter </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Promise}</span></td><td class="methodItemDesc"> A <code>Promise</code> for asynchronous execution </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="hasActiveEntity"></a><div class="itemTitle icon"> hasActiveEntity<span class="signature">(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class="light" title="returns boolean">: boolean</span></div><div class="full-description"> Checks whether an entity has an active entity associated. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The given binding context </td></tr></tbody></table><dl class="detailList since"><dt class="heading since">Since:</dt><dd>1.32.0</dd></dl><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{boolean}</span></td><td class="methodItemDesc"><code>true</code>, if an active entity exists, <code>false</code> otherwise </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="isActiveEntity"></a><div class="itemTitle icon"> isActiveEntity<span class="signature">(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class="light" title="returns boolean">: boolean</span></div><div class="full-description"> Checks whether an entity set is active. The entity set name is derived from the given binding context </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The given binding context </td></tr></tbody></table><div class="heading">Exceptions:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Error}</span><b></b></td><td class="methodItemDesc"> Throws an error if no context is handed over as input parameter </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{boolean}</span></td><td class="methodItemDesc"><code>true</code>, if a given entity set is active, <code>false</code> otherwise </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="prepareDraftEntity"></a><div class="itemTitle icon"> prepareDraftEntity<span class="signature">(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class="light" title="returns Promise">: Promise</span></div><div class="full-description"> Submits changes to the back-end and prepares an existing draft entity in the back-end for later activation by invoking the preparation action. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The given binding context </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Promise}</span></td><td class="methodItemDesc"> A <code>Promise</code> for asynchronous execution </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="saveAndPrepareDraftEntity"></a><div class="itemTitle icon"> saveAndPrepareDraftEntity<span class="signature">(<span title="(sap.ui.model.Context) The given binding context">oContext</span>, <span title="(map) Parameters to control the behavior of the request">mParameters</span>)</span><span class="light" title="returns Promise">: Promise</span></div><div class="full-description"> Submits changes to the back-end and prepares a draft entity in the back-end for later activation by invoking the preparation action. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The given binding context </td></tr><tr><td class="methodItemType"><span class="light">{map}</span></td><td class="methodItemName"><b>mParameters</b></td><td class="methodItemDesc"> Parameters to control the behavior of the request </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Promise}</span></td><td class="methodItemDesc"> A <code>Promise</code> for asynchronous execution </td></tr></tbody></table></div><div class='sectionItem classMethod'><a name="validateDraftEntity"></a><div class="itemTitle icon"> validateDraftEntity<span class="signature">(<span title="(sap.ui.model.Context) The given binding context">oContext</span>)</span><span class="light" title="returns Promise">: Promise</span></div><div class="full-description"> Submits changes to the back-end and prepares an existing draft entity in the back-end for later activation by invoking the validation action. </div><div class="heading">Parameters:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{<a href="sap.ui.model.Context.html">sap.ui.model.Context</a>}</span></td><td class="methodItemName"><b>oContext</b></td><td class="methodItemDesc"> The given binding context </td></tr></tbody></table><div class="heading">Returns:</div><table class="methodItem"><tbody><tr><td class="methodItemType"><span class="light">{Promise}</span></td><td class="methodItemDesc"> A <code>Promise</code> for asynchronous execution </td></tr></tbody></table></div></div></div></div></div></body></html>